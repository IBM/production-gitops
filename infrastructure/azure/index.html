<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta name=author content="Cloud Pak Production Deployment Guides development team"><link rel=icon href=../../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.1.10"><title>Microsoft Azure - Cloud Pak Production Deployment Guides</title><link rel=stylesheet href=../../assets/stylesheets/main.d6be258b.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.e6a45f82.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CIBM+Plex+Mono&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><link rel=stylesheet href=../../css/extra.css><link rel=stylesheet href=../../css/toolkit-code.css><script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q0FLL49YN3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&gtag("event","search",{search_term:this.value})}),"undefined"!=typeof location$&&location$.subscribe(function(e){gtag("config","G-Q0FLL49YN3",{page_path:e.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q0FLL49YN3"></script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="Cloud Pak Production Deployment Guides - Microsoft Azure"><meta property=og:description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta property=og:url content=None><meta property=og:image content=assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#production-deployment-guide-for-openshift-on-azure class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Cloud Pak Production Deployment Guides" class="md-header__button md-logo" aria-label="Cloud Pak Production Deployment Guides" data-md-component=logo> <img src=../../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Cloud Pak Production Deployment Guides </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Microsoft Azure </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../overview/overview/ class=md-tabs__link> Production Considerations </a> </li> <li class=md-tabs__item> <a href=../../quickstart/overview/ class=md-tabs__link> Quick Start Demos </a> </li> <li class=md-tabs__item> <a href=../../guides/guides-overview/ class="md-tabs__link md-tabs__link--active"> Tutorials </a> </li> <li class=md-tabs__item> <a href=../ad/ class=md-tabs__link> References </a> </li> <li class=md-tabs__item> <a href=../../overview/whats-new/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!-- Determine class according to configuration --> <!-- Main navigation --> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <!-- Site title --> <!--
  <label class="md-nav__title" for="__drawer">
    <a
      href="../.."
      title="Cloud Pak Production Deployment Guides"
      class="md-nav__button md-logo"
      aria-label="Cloud Pak Production Deployment Guides"
      data-md-component="logo"
    >
      
  <img src="../../images/cloudnativetoolkit.png" alt="logo">

    </a>
    Cloud Pak Production Deployment Guides
  </label>
--> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> <!-- Render item list --> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Production Considerations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Production Considerations" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Production Considerations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/overview/ class=md-nav__link> Objective </a> </li> <li class=md-nav__item> <a href=../../gitops/personas/ class=md-nav__link> Personas </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> DevOps Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="DevOps Automation" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> DevOps Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../automation/why-automate/ class=md-nav__link> Why Automate? </a> </li> <li class=md-nav__item> <a href=../../gitops/structure/ class=md-nav__link> GitOps Structure </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> Golden Topologies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Golden Topologies" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Golden Topologies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../golden-topology/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../golden-topology-azure/ class=md-nav__link> Azure Unmanaged </a> </li> <li class=md-nav__item> <a href=../golden-topology-aro/ class=md-nav__link> Azure Managed (ARO) </a> </li> <li class=md-nav__item> <a href=../golden-topology-aws/ class=md-nav__link> AWS Unmanaged </a> </li> <li class=md-nav__item> <a href=../golden-topology-rosa/ class=md-nav__link> AWS Managed (ROSA) </a> </li> <li class=md-nav__item> <a href=../golden-topology-roks/ class=md-nav__link> IBM Cloud Managed (ROKS) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5> Cloud Pak <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak" data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Cloud Pak </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_1 type=checkbox id=__nav_2_5_1> <label class=md-nav__link for=__nav_2_5_1> App Connect Enterprise <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="App Connect Enterprise" data-md-level=3> <label class=md-nav__title for=__nav_2_5_1> <span class="md-nav__icon md-icon"></span> App Connect Enterprise </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/ace/overview/architecture/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_2 type=checkbox id=__nav_2_5_2> <label class=md-nav__link for=__nav_2_5_2> MQ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MQ data-md-level=3> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> MQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/mq/overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/security/information/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/cloud-native/promote-environments/ class=md-nav__link> Promoting across environments </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/performance/performance/ class=md-nav__link> Performance </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/high-availability/overview/ class=md-nav__link> High Availability </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3 type=checkbox id=__nav_2_5_3> <label class=md-nav__link for=__nav_2_5_3> API Connect <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="API Connect" data-md-level=3> <label class=md-nav__title for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> API Connect </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3_1 type=checkbox id=__nav_2_5_3_1> <label class=md-nav__link for=__nav_2_5_3_1> Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Architecture data-md-level=4> <label class=md-nav__title for=__nav_2_5_3_1> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/apic/architecture/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/apic/architecture/multi-cloud/ class=md-nav__link> Multi-cloud </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../guides/cp4i/apic/security/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/apic/high-availability/overview/ class=md-nav__link> High Availability </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/apic/disaster-recovery/overview/ class=md-nav__link> Disaster Recovery </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_4 type=checkbox id=__nav_2_5_4> <label class=md-nav__link for=__nav_2_5_4> Automation Decision Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Automation Decision Services" data-md-level=3> <label class=md-nav__title for=__nav_2_5_4> <span class="md-nav__icon md-icon"></span> Automation Decision Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4ba/ads/architecture/ads/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../guides/cp4ba/process-mining/architecture/ibm-cloud/ class=md-nav__link> Process Mining </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_6 type=checkbox id=__nav_2_5_6> <label class=md-nav__link for=__nav_2_5_6> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=3> <label class=md-nav__title for=__nav_2_5_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4d-hadr/cpdbase/overview/architecture/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Quick Start Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Quick Start Demos" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Quick Start Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../quickstart/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../quickstart/quickstart-cntk/ class=md-nav__link> Cloud Native Toolkit </a> </li> <li class=md-nav__item> <a href=../../quickstart/quickstart-ace/ class=md-nav__link> ACE (CP4I) </a> </li> <li class=md-nav__item> <a href=../../quickstart/quickstart-mq/ class=md-nav__link> MQ (CP4I) </a> </li> <li class=md-nav__item> <a href=../../quickstart/quickstart-cp4s/ class=md-nav__link> Security (CP4S) </a> </li> <li class=md-nav__item> <a href=../../quickstart/quickstart-apic/ class=md-nav__link> APIC (CP4I) </a> </li> <li class=md-nav__item> <a href=../../quickstart/quickstart-process-mining/ class=md-nav__link> Process Mining (CP4BA) </a> </li> <li class=md-nav__item> <a href=../../quickstart/quickstart-cp4d/ class=md-nav__link> Cloud Pak for Data </a> </li> <li class=md-nav__item> <a href=../../quickstart/quickstart-cp4d-ws/ class=md-nav__link> Watson Studio (CP4D) </a> </li> <li class=md-nav__item> <a href=../../quickstart/quickstart-instana-agent/ class=md-nav__link> Instana Agent </a> </li> <li class=md-nav__item> <a href=../../quickstart/quickstart-instana-grafana/ class=md-nav__link> Instana & Grafana </a> </li> <li class=md-nav__item> <a href=../../quickstart/quickstart-instana-server/ class=md-nav__link> Instana Server </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/guides-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2 checked> <label class=md-nav__link for=__nav_4_2> Infrastructure <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Infrastructure data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../infra-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_2 type=checkbox id=__nav_4_2_2> <label class=md-nav__link for=__nav_4_2_2> Managed Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Managed Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> Managed Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../roks/ class=md-nav__link> IBM ROKS </a> </li> <li class=md-nav__item> <a href=../rosa/ class=md-nav__link> Amazon ROSA </a> </li> <li class=md-nav__item> <a href=../aro/ class=md-nav__link> Microsoft ARO </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_3 type=checkbox id=__nav_4_2_3 checked> <label class=md-nav__link for=__nav_4_2_3> Unmanaged Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Unmanaged Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> Unmanaged Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../aws/ class=md-nav__link> Amazon AWS </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Microsoft Azure <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Microsoft Azure </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#golden-topology class=md-nav__link> Golden Topology </a> </li> <li class=md-nav__item> <a href=#machinesets class=md-nav__link> MachineSets </a> </li> <li class=md-nav__item> <a href=#storage class=md-nav__link> Storage </a> </li> <li class=md-nav__item> <a href=#installation-scenarios class=md-nav__link> Installation Scenarios </a> <nav class=md-nav aria-label="Installation Scenarios"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#node-sizing class=md-nav__link> Node Sizing </a> </li> <li class=md-nav__item> <a href=#private-endpoints class=md-nav__link> Private Endpoints </a> </li> <li class=md-nav__item> <a href=#bring-your-own-resource-group class=md-nav__link> Bring Your Own Resource Group </a> </li> <li class=md-nav__item> <a href=#bring-your-own-network class=md-nav__link> Bring Your Own Network </a> </li> <li class=md-nav__item> <a href=#user-defined-routing class=md-nav__link> User Defined Routing </a> </li> <li class=md-nav__item> <a href=#bring-your-own-dns class=md-nav__link> Bring Your Own DNS </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#user-provided-infrastructure class=md-nav__link> User Provided Infrastructure </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../restricted-networks/ class=md-nav__link> Restricted Networks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Cloud Pak for Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Integration" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Cloud Pak for Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1 type=checkbox id=__nav_4_3_1> <label class=md-nav__link for=__nav_4_3_1> ACE <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=ACE data-md-level=3> <label class=md-nav__title for=__nav_4_3_1> <span class="md-nav__icon md-icon"></span> ACE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/ace/overview/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/ace/overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_3 type=checkbox id=__nav_4_3_1_3> <label class=md-nav__link for=__nav_4_3_1_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/ace/cluster-create/ibm-setup/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_4 type=checkbox id=__nav_4_3_1_4> <label class=md-nav__link for=__nav_4_3_1_4> Configure the Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the Cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_4> <span class="md-nav__icon md-icon"></span> Configure the Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/ace/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps, Tekton & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/ace/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/ace/cluster-config/services/ class=md-nav__link> Deploying Services </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../guides/cp4i/ace/cloud-native-example/example/ class=md-nav__link> Cloud Native Example </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/ace/deploy-backend-service/deploy-backend-service/ class=md-nav__link> Deploy Backend Service </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/ace/environment-promotion/promoting-environments/ class=md-nav__link> Environment Promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2 type=checkbox id=__nav_4_3_2> <label class=md-nav__link for=__nav_4_3_2> MQ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MQ data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> MQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/mq/using/this-guide/ class=md-nav__link> The MQ tutorial </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/overview/architecture/ class=md-nav__link> Target architecture </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/cluster-create/ibm-setup/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_4 type=checkbox id=__nav_4_3_2_4> <label class=md-nav__link for=__nav_4_3_2_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/mq/cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/cluster-config/services/ class=md-nav__link> Add services </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_5 type=checkbox id=__nav_4_3_2_5> <label class=md-nav__link for=__nav_4_3_2_5> Build Queue Manager <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build Queue Manager" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_5> <span class="md-nav__icon md-icon"></span> Build Queue Manager </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/mq/qmgr-pipeline/topic1/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/qmgr-pipeline/topic2/ class=md-nav__link> Running the pipeline </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/qmgr-pipeline/topic3/ class=md-nav__link> Deploying and using </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/qmgr-pipeline/topic4/ class=md-nav__link> Continuous updates </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_6 type=checkbox id=__nav_4_3_2_6> <label class=md-nav__link for=__nav_4_3_2_6> Build MQ application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build MQ application" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_6> <span class="md-nav__icon md-icon"></span> Build MQ application </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/mq/app-pipeline/topic1/ class=md-nav__link> Sample application </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/app-pipeline/topic2/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/app-pipeline/topic3/ class=md-nav__link> Managing an application change </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_7 type=checkbox id=__nav_4_3_2_7> <label class=md-nav__link for=__nav_4_3_2_7> Environment Promotion <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Environment Promotion" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_7> <span class="md-nav__icon md-icon"></span> Environment Promotion </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/mq/cloud-native/promoting-environments-dev-stage/ class=md-nav__link> Promote from dev to staging </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/cloud-native/promoting-environments-stage-prod/ class=md-nav__link> Promote from staging to prod </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/mq/cloud-native/automate-promotion/ class=md-nav__link> Automate promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_8 type=checkbox id=__nav_4_3_2_8> <label class=md-nav__link for=__nav_4_3_2_8> Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Security data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_8> <span class="md-nav__icon md-icon"></span> Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/mq/security/handson/mtls/ class=md-nav__link> Secure data in motion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_9 type=checkbox id=__nav_4_3_2_9> <label class=md-nav__link for=__nav_4_3_2_9> Architecture Decisions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Architecture Decisions" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_9> <span class="md-nav__icon md-icon"></span> Architecture Decisions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/mq/ad/ class=md-nav__link> Decision Index </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3 type=checkbox id=__nav_4_3_3> <label class=md-nav__link for=__nav_4_3_3> APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=APIC data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/apic/overview/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_2 type=checkbox id=__nav_4_3_3_2> <label class=md-nav__link for=__nav_4_3_3_2> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_2> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/apic/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_3 type=checkbox id=__nav_4_3_3_3> <label class=md-nav__link for=__nav_4_3_3_3> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_3> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/apic/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps, Tekton & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/apic/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_4 type=checkbox id=__nav_4_3_3_4> <label class=md-nav__link for=__nav_4_3_3_4> Deploy APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_4> <span class="md-nav__icon md-icon"></span> Deploy APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/apic/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_5 type=checkbox id=__nav_4_3_3_5> <label class=md-nav__link for=__nav_4_3_3_5> Configure APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_5> <span class="md-nav__icon md-icon"></span> Configure APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/apic/configuration/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_6 type=checkbox id=__nav_4_3_3_6> <label class=md-nav__link for=__nav_4_3_3_6> Publish APIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Publish APIs" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_6> <span class="md-nav__icon md-icon"></span> Publish APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/apic/publish/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4 type=checkbox id=__nav_4_3_4> <label class=md-nav__link for=__nav_4_3_4> APIC Multi-Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="APIC Multi-Cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_3_4> <span class="md-nav__icon md-icon"></span> APIC Multi-Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/apic/multi-cluster/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/apic/multi-cluster/create-clusters/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4_3 type=checkbox id=__nav_4_3_4_3> <label class=md-nav__link for=__nav_4_3_4_3> Configure the clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the clusters" data-md-level=4> <label class=md-nav__title for=__nav_4_3_4_3> <span class="md-nav__icon md-icon"></span> Configure the clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/apic/multi-cluster/configure-clusters-gitops/ class=md-nav__link> GitOps repos & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/apic/multi-cluster/configure-clusters-gitops-config/ class=md-nav__link> Configure GitOps repos </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../guides/cp4i/apic/multi-cluster/deploy/ class=md-nav__link> Deploy APIC </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/apic/multi-cluster/config-pipeline/ class=md-nav__link> Configure APIC </a> </li> <li class=md-nav__item> <a href=../../guides/cp4i/apic/multi-cluster/publish-pipeline/ class=md-nav__link> Publish APIs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5 type=checkbox id=__nav_4_3_5> <label class=md-nav__link for=__nav_4_3_5> Event-Driven Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Event-Driven Architecture" data-md-level=3> <label class=md-nav__title for=__nav_4_3_5> <span class="md-nav__icon md-icon"></span> Event-Driven Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4i/eda/link/ class=md-nav__link> EDA GitOps Solution </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Cloud Pak for Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Security" data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Cloud Pak for Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4s/cp4s-tree/using/this-guide/ class=md-nav__link> The CP4S tutorial </a> </li> <li class=md-nav__item> <a href=../../guides/cp4s/cp4s-tree/overview/architecture/ class=md-nav__link> CP4S architecture </a> </li> <li class=md-nav__item> <a href=../../guides/cp4s/cp4s-tree/cluster-create/ibm-setup/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_4 type=checkbox id=__nav_4_4_4> <label class=md-nav__link for=__nav_4_4_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_4_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4s/cp4s-tree/cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../guides/cp4s/cp4s-tree/cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../guides/cp4s/cp4s-tree/cluster-config/services/ class=md-nav__link> Add services </a> </li> <li class=md-nav__item> <a href=../../guides/cp4s/cp4s-tree/cluster-config/backup-recovery-upgrade/ class=md-nav__link> Managing Lifecycle for CP4S </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4d/overview/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_2 type=checkbox id=__nav_4_5_2> <label class=md-nav__link for=__nav_4_5_2> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_5_2> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4d/cluster-create/ibm-setup/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_3 type=checkbox id=__nav_4_5_3> <label class=md-nav__link for=__nav_4_5_3> Configure the Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the Cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_5_3> <span class="md-nav__icon md-icon"></span> Configure the Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4d/cluster-config/gitops-argocd/ class=md-nav__link> GitOps and ArgoCD </a> </li> <li class=md-nav__item> <a href=../../guides/cp4d/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../guides/cp4d/cp4d/deployment/ class=md-nav__link> Deployment </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5 type=checkbox id=__nav_4_5_5> <label class=md-nav__link for=__nav_4_5_5> Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Services data-md-level=3> <label class=md-nav__title for=__nav_4_5_5> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5_1 type=checkbox id=__nav_4_5_5_1> <label class=md-nav__link for=__nav_4_5_5_1> Watson Studio <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Studio" data-md-level=4> <label class=md-nav__title for=__nav_4_5_5_1> <span class="md-nav__icon md-icon"></span> Watson Studio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4d/watson-studio/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../guides/cp4d/watson-studio/deployment/ class=md-nav__link> Deployment </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5_2 type=checkbox id=__nav_4_5_5_2> <label class=md-nav__link for=__nav_4_5_5_2> Watson Knowledge Catalog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Knowledge Catalog" data-md-level=4> <label class=md-nav__title for=__nav_4_5_5_2> <span class="md-nav__icon md-icon"></span> Watson Knowledge Catalog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4d/wkc/overview/ class=md-nav__link> Overview </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6> Cloud Pak for Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Automation" data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1 type=checkbox id=__nav_4_6_1> <label class=md-nav__link for=__nav_4_6_1> Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Process Mining" data-md-level=3> <label class=md-nav__title for=__nav_4_6_1> <span class="md-nav__icon md-icon"></span> Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4ba/process-mining/overview/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../guides/cp4ba/process-mining/using/this-guide/ class=md-nav__link> Using this guide </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_3 type=checkbox id=__nav_4_6_1_3> <label class=md-nav__link for=__nav_4_6_1_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4ba/process-mining/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_4 type=checkbox id=__nav_4_6_1_4> <label class=md-nav__link for=__nav_4_6_1_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4ba/process-mining/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../guides/cp4ba/process-mining/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_5 type=checkbox id=__nav_4_6_1_5> <label class=md-nav__link for=__nav_4_6_1_5> Deploy Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy Process Mining" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_5> <span class="md-nav__icon md-icon"></span> Deploy Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../guides/cp4ba/process-mining/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=References data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ad/ class=md-nav__link> Architectural Decisions </a> </li> <li class=md-nav__item> <a href=../../references/prerequisites/instructions/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../references/training/training/ class=md-nav__link> Training </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=About data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/whats-new/ class=md-nav__link> What's New </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_2 type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2> Contributing Content <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Contributing Content" data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Contributing Content </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../contribute/githubflow/ class=md-nav__link> GitHub Open Source Contribution </a> </li> <li class=md-nav__item> <a href=../../contribute/documentation/ class=md-nav__link> Running a Local Site Instance </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#golden-topology class=md-nav__link> Golden Topology </a> </li> <li class=md-nav__item> <a href=#machinesets class=md-nav__link> MachineSets </a> </li> <li class=md-nav__item> <a href=#storage class=md-nav__link> Storage </a> </li> <li class=md-nav__item> <a href=#installation-scenarios class=md-nav__link> Installation Scenarios </a> <nav class=md-nav aria-label="Installation Scenarios"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#node-sizing class=md-nav__link> Node Sizing </a> </li> <li class=md-nav__item> <a href=#private-endpoints class=md-nav__link> Private Endpoints </a> </li> <li class=md-nav__item> <a href=#bring-your-own-resource-group class=md-nav__link> Bring Your Own Resource Group </a> </li> <li class=md-nav__item> <a href=#bring-your-own-network class=md-nav__link> Bring Your Own Network </a> </li> <li class=md-nav__item> <a href=#user-defined-routing class=md-nav__link> User Defined Routing </a> </li> <li class=md-nav__item> <a href=#bring-your-own-dns class=md-nav__link> Bring Your Own DNS </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#user-provided-infrastructure class=md-nav__link> User Provided Infrastructure </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/edit/master/docs/infrastructure/azure.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=production-deployment-guide-for-openshift-on-azure>Production Deployment Guide for OpenShift on Azure<a class=headerlink href=#production-deployment-guide-for-openshift-on-azure title="Permanent link">&para;</a></h1> <!--- cSpell:ignore qube cntk autoplay allowfullscreen cloudpak yamls clusterid machineset VNET Loadbalancer loadbalancer loadbalancers ipaddresses --> <h2 id=golden-topology>Golden Topology<a class=headerlink href=#golden-topology title="Permanent link">&para;</a></h2> <p>Before reading this document, familiarize yourself with the <a href=../golden-topology/ >Golden Topology</a> section of this Production Deployment Guide. Unless otherwise stated, all the items in that section apply to the Cluster Infrastructure we will provision on Azure.</p> <p>Read Red Hat's documentation on <a href=https://docs.openshift.com/container-platform/4.7/installing/installing_azure/installing-azure-default.html>Installing a cluster quickly on Azure</a> to deploy a cluster with no modifications.</p> <p>Deploying a cluster with <code>openshift-install</code> will provide the following topology.<br> <img alt=ipi-cluster src=../images/gt/gt-ipi.png></p> <hr> <h2 id=machinesets>MachineSets<a class=headerlink href=#machinesets title="Permanent link">&para;</a></h2> <p>The following templates can be used to generate your infrastructure, cloudpak and storage MachineSets</p> <div class=tabbed-set data-tabs=1:4><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>MachineSets</label><div class=tabbed-content> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Click on each tab above for sample yamls to create your infrastructure</p> </div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>Infrastructure</label><div class=tabbed-content> <p>Infrastructure MachineConfigPool</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machineconfiguration.openshift.io/v1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MachineConfigPool</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">infra</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>machineConfigSelector</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>matchExpressions</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machineconfiguration.openshift.io/role</span><span class=w></span>
<span class=w>      </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">In</span><span class=w></span>
<span class=w>      </span><span class=nt>values</span><span class=p>:</span><span class=w> </span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">worker</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">infra</span><span class=w></span>
<span class=w>  </span><span class=nt>nodeSelector</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>node-role.kubernetes.io/infra</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
</code></pre></div> <p>Infrastructure MachineSet</p> <p>Create 3 Infrastructure MachineSets, the $region, $zone and $clusterid variables in the sample below. <code>zone</code> should be 1 2 and 3, respectively, on each machineset yaml file. The default node type is Standard_D4s_v3 (4CPU, 16GB mem), if your infrastructure needs are bigger, you can increase it to a bigger node type, or increase the replica count per Availability Zone. To obtain your Cluster ID, you can run the following command.</p> <div class=highlight><pre><span></span><code>$ oc get -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.status.infrastructureName}{&quot;\n&quot;}&#39;</span> infrastructure cluster
</code></pre></div> <p>If you <a href=#bring-your-own-network>Bring Your Own Network</a>, update lines 48, 57 and 61</p> <p>If you <a href=#bring-your-own-resource-group>Bring Your Own Resource Group</a>, update lines 41 and 56.</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machine.openshift.io/v1beta1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MachineSet</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>machine.openshift.io/cluster-api-cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>    </span><span class=nt>machine.openshift.io/cluster-api-machine-role</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">infra</span><span class=w></span>
<span class=w>    </span><span class=nt>machine.openshift.io/cluster-api-machine-type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">infra</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-infra-$region$zone</span><span class=w></span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">openshift-machine-api</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>machine.openshift.io/cluster-api-cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>      </span><span class=nt>machine.openshift.io/cluster-api-machineset</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-infra-$region$zone</span><span class=w></span>
<span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-machine-role</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">infra</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-machine-type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">infra</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-machineset</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-infra-$region$zone</span><span class=w></span>
<span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>taints</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>effect</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">NoSchedule</span><span class=w></span>
<span class=w>        </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">infra</span><span class=w></span>
<span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>      </span><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<span class=w>          </span><span class=nt>node-role.kubernetes.io/infra</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>      </span><span class=nt>providerSpec</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w></span>
<span class=w>          </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">azureproviderconfig.openshift.io/v1beta1</span><span class=w></span>
<span class=w>          </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">AzureMachineProviderSpec</span><span class=w></span>
<span class=w>          </span><span class=nt>credentialsSecret</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">azure-cloud-credentials</span><span class=w></span>
<span class=w>            </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">openshift-machine-api</span><span class=w></span>
<span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>offer</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>            </span><span class=nt>publisher</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>            </span><span class=nt>resourceID</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/resourceGroups/$clusterid-rg/providers/Microsoft.Compute/images/$clusterid</span><span class=w></span>
<span class=w>            </span><span class=nt>sku</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>            </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>          </span><span class=nt>location</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$region</span><span class=w></span>
<span class=w>          </span><span class=nt>managedIdentity</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-identity</span><span class=w></span>
<span class=w>          </span><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>creationTimestamp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class=w></span>
<span class=w>          </span><span class=nt>networkResourceGroup</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-rg</span><span class=w></span>
<span class=w>          </span><span class=nt>osDisk</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>diskSizeGB</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">128</span><span class=w></span>
<span class=w>            </span><span class=nt>managedDisk</span><span class=p>:</span><span class=w></span>
<span class=w>              </span><span class=nt>storageAccountType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Premium_LRS</span><span class=w></span>
<span class=w>            </span><span class=nt>osType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Linux</span><span class=w></span>
<span class=w>          </span><span class=nt>publicIP</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class=w></span>
<span class=w>          </span><span class=nt>publicLoadBalancer</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>          </span><span class=nt>resourceGroup</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-rg</span><span class=w></span>
<span class=w>          </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-worker-subnet</span><span class=w></span>
<span class=w>          </span><span class=nt>userDataSecret</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">worker-user-data</span><span class=w></span>
<span class=w>          </span><span class=nt>vmSize</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Standard_D4s_v3</span><span class=w></span>
<span class=w>          </span><span class=nt>vnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-vnet</span><span class=w></span>
<span class=w>          </span><span class=nt>zone</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$zone&quot;</span><span class=w></span>
</code></pre></div> </td></tr></table> <p>Infrastructure Component Placement</p> <p>Follow the <a href=../golden-topology/#image-registry>Golden Topology Guidelines</a> to control placement of infrastructure components.</p> </div> <input id=__tabbed_1_3 name=__tabbed_1 type=radio><label for=__tabbed_1_3>Storage</label><div class=tabbed-content> <p>Storage MachineConfigPool</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machineconfiguration.openshift.io/v1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MachineConfigPool</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">storage</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>machineConfigSelector</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>matchExpressions</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machineconfiguration.openshift.io/role</span><span class=w></span>
<span class=w>      </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">In</span><span class=w></span>
<span class=w>      </span><span class=nt>values</span><span class=p>:</span><span class=w> </span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">worker</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">storage</span><span class=w></span>
<span class=w>  </span><span class=nt>nodeSelector</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>cluster.ocs.openshift.io/openshift-storage</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>      </span><span class=nt>node-role.kubernetes.io/storage</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
</code></pre></div> <p>Storage MachineSet</p> <p>Create 3 Storage MachineSets, replacing the region, $zone and $clusterid variables in the sample below. <code>zone</code> should be 1 2 and 3, respectively, on each machineset yaml file. The default node type is Standard_D16s_v3 (16CPU, 64GB mem), To obtain your Cluster ID, you can run the following command.</p> <div class=highlight><pre><span></span><code>$ oc get -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.status.infrastructureName}{&quot;\n&quot;}&#39;</span> infrastructure cluster
</code></pre></div> <p>If you <a href=#bring-your-own-network>Bring Your Own Network</a>, update lines 49, 58 and 62</p> <p>If you <a href=#bring-your-own-resource-group>Bring Your Own Resource Group</a>, update lines 42 and 57.</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machine.openshift.io/v1beta1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MachineSet</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>machine.openshift.io/cluster-api-cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>    </span><span class=nt>machine.openshift.io/cluster-api-machine-role</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">storage</span><span class=w></span>
<span class=w>    </span><span class=nt>machine.openshift.io/cluster-api-machine-type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">storage</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-storage-$region$zone</span><span class=w></span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">openshift-machine-api</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class=w></span>
<span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>machine.openshift.io/cluster-api-cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>      </span><span class=nt>machine.openshift.io/cluster-api-machineset</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-storage-$region$zone</span><span class=w></span>
<span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-machine-role</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">storage</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-machine-type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">storage</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-machineset</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-storage-$region$zone</span><span class=w></span>
<span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>taints</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>effect</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">NoSchedule</span><span class=w></span>
<span class=w>        </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">node.ocs.openshift.io/storage</span><span class=w></span>
<span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span><span class=w></span>
<span class=w>      </span><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<span class=w>          </span><span class=nt>cluster.ocs.openshift.io/openshift-storage</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>          </span><span class=nt>node-role.kubernetes.io/storage</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>      </span><span class=nt>providerSpec</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w></span>
<span class=w>          </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">azureproviderconfig.openshift.io/v1beta1</span><span class=w></span>
<span class=w>          </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">AzureMachineProviderSpec</span><span class=w></span>
<span class=w>          </span><span class=nt>credentialsSecret</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">azure-cloud-credentials</span><span class=w></span>
<span class=w>            </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">openshift-machine-api</span><span class=w></span>
<span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>offer</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>            </span><span class=nt>publisher</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>            </span><span class=nt>resourceID</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/resourceGroups/$clusterid-rg/providers/Microsoft.Compute/images/$clusterid</span><span class=w></span>
<span class=w>            </span><span class=nt>sku</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>            </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>          </span><span class=nt>location</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$region</span><span class=w></span>
<span class=w>          </span><span class=nt>managedIdentity</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-identity</span><span class=w></span>
<span class=w>          </span><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>creationTimestamp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class=w></span>
<span class=w>          </span><span class=nt>networkResourceGroup</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-rg</span><span class=w></span>
<span class=w>          </span><span class=nt>osDisk</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>diskSizeGB</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">128</span><span class=w></span>
<span class=w>            </span><span class=nt>managedDisk</span><span class=p>:</span><span class=w></span>
<span class=w>              </span><span class=nt>storageAccountType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Premium_LRS</span><span class=w></span>
<span class=w>            </span><span class=nt>osType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Linux</span><span class=w></span>
<span class=w>          </span><span class=nt>publicIP</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class=w></span>
<span class=w>          </span><span class=nt>publicLoadBalancer</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>          </span><span class=nt>resourceGroup</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-rg</span><span class=w></span>
<span class=w>          </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-worker-subnet</span><span class=w></span>
<span class=w>          </span><span class=nt>userDataSecret</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">worker-user-data</span><span class=w></span>
<span class=w>          </span><span class=nt>vmSize</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Standard_D16s_v3</span><span class=w></span>
<span class=w>          </span><span class=nt>vnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-vnet</span><span class=w></span>
<span class=w>          </span><span class=nt>zone</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$zone&quot;</span><span class=w></span>
</code></pre></div> </td></tr></table> </div> <input id=__tabbed_1_4 name=__tabbed_1 type=radio><label for=__tabbed_1_4>CloudPak</label><div class=tabbed-content> <p>CloudPak MachineConfigPool</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machineconfiguration.openshift.io/v1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MachineConfigPool</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cp4x</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>machineConfigSelector</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>matchExpressions</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machineconfiguration.openshift.io/role</span><span class=w></span>
<span class=w>      </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">In</span><span class=w></span>
<span class=w>      </span><span class=nt>values</span><span class=p>:</span><span class=w> </span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">worker</span><span class=w></span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cp4x</span><span class=w></span>
<span class=w>  </span><span class=nt>nodeSelector</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>node-role.kubernetes.io/cp4x</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
</code></pre></div> <p>CloudPak Tuned Configuration</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tuned.openshift.io/v1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Tuned</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cp4x-tuned</span><span class=w></span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">openshift-cluster-node-tuning-operator</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>profile</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cp4x-tuned</span><span class=w></span>
<span class=w>    </span><span class=nt>data</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span><span class=w></span>
<span class=w>      </span><span class=no>[main]</span><span class=w></span>
<span class=w>      </span><span class=no>summary=Tune Kernel parameters on OpenShift Worker Nodes running CloudPak workloads</span><span class=w></span>
<span class=w>      </span><span class=no>[sysctl]</span><span class=w></span>
<span class=w>      </span><span class=no>kernel.shmall = 33554432</span><span class=w></span>
<span class=w>      </span><span class=no>kernel.shmmax = 68719476736</span><span class=w></span>
<span class=w>      </span><span class=no>kernel.shmmni = 16384</span><span class=w></span>
<span class=w>      </span><span class=no>kernel.sem = 250 1024000 100 16384</span><span class=w></span>
<span class=w>      </span><span class=no>kernel.msgmax = 65536</span><span class=w></span>
<span class=w>      </span><span class=no>kernel.msgmnb = 65536</span><span class=w></span>
<span class=w>      </span><span class=no>kernel.msgmni = 32768</span><span class=w></span>
<span class=w>      </span><span class=no>vm.max_map_count = 262144</span><span class=w></span>
<span class=w>  </span><span class=nt>recommend</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>match</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>label</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">node-role.kubernetes.io/cp4x</span><span class=w>    </span>
<span class=w>    </span><span class=nt>priority</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class=w></span>
<span class=w>    </span><span class=nt>profile</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cp4x-tuned</span><span class=w></span>
</code></pre></div> <p>CloudPak ContainerRuntimeConfig</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machineconfiguration.openshift.io/v1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ContainerRuntimeConfig</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cp4x-containerruntimeconfig</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>machineConfigPoolSelector</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>limits-crio</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cp4x-containerruntimeconfig</span><span class=w></span>
<span class=w>  </span><span class=nt>containerRuntimeConfig</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>pidsLimit</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">12288</span><span class=w></span>
</code></pre></div> <p>CloudPak MachineSet</p> <p>Create 3 Storage MachineSets, replacing the region, $zone and $clusterid variables in the sample below. <code>zone</code> should be 1 2 and 3, respectively, on each machineset yaml file. The default node type is Standard_D8s_v3 (8CPU, 32GB mem) and can be modified on line 56. To obtain your Cluster ID, you can run the following command.</p> <div class=highlight><pre><span></span><code>$ oc get -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.status.infrastructureName}{&quot;\n&quot;}&#39;</span> infrastructure cluster
</code></pre></div> <p>If you <a href=#bring-your-own-network>Bring Your Own Network</a>, change lines 44, 53 and 57.</p> <p>If you <a href=#bring-your-own-resource-group>Bring Your Own Resource Group</a>, change line 37 and 52.</p> <table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 1</span>
<span class=normal> 2</span>
<span class=normal> 3</span>
<span class=normal> 4</span>
<span class=normal> 5</span>
<span class=normal> 6</span>
<span class=normal> 7</span>
<span class=normal> 8</span>
<span class=normal> 9</span>
<span class=normal>10</span>
<span class=normal>11</span>
<span class=normal>12</span>
<span class=normal>13</span>
<span class=normal>14</span>
<span class=normal>15</span>
<span class=normal>16</span>
<span class=normal>17</span>
<span class=normal>18</span>
<span class=normal>19</span>
<span class=normal>20</span>
<span class=normal>21</span>
<span class=normal>22</span>
<span class=normal>23</span>
<span class=normal>24</span>
<span class=normal>25</span>
<span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span></pre></div></td><td class=code><div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machine.openshift.io/v1beta1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MachineSet</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>machine.openshift.io/cluster-api-cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>    </span><span class=nt>machine.openshift.io/cluster-api-machine-role</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cp4x</span><span class=w></span>
<span class=w>    </span><span class=nt>machine.openshift.io/cluster-api-machine-type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cp4x</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-cp4x-$region$zone</span><span class=w></span>
<span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">openshift-machine-api</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class=w></span>
<span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>machine.openshift.io/cluster-api-cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>      </span><span class=nt>machine.openshift.io/cluster-api-machineset</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-cp4x-$region$zone</span><span class=w></span>
<span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-machine-role</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">worker</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-machine-type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">worker</span><span class=w></span>
<span class=w>        </span><span class=nt>machine.openshift.io/cluster-api-machineset</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-cp4x-$region$zone</span><span class=w></span>
<span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>labels</span><span class=p>:</span><span class=w></span>
<span class=w>          </span><span class=nt>node-role.kubernetes.io/cp4x</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>      </span><span class=nt>providerSpec</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w></span>
<span class=w>          </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">azureproviderconfig.openshift.io/v1beta1</span><span class=w></span>
<span class=w>          </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">AzureMachineProviderSpec</span><span class=w></span>
<span class=w>          </span><span class=nt>credentialsSecret</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">azure-cloud-credentials</span><span class=w></span>
<span class=w>            </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">openshift-machine-api</span><span class=w></span>
<span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>offer</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>            </span><span class=nt>publisher</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>            </span><span class=nt>resourceID</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/resourceGroups/$clusterid-rg/providers/Microsoft.Compute/images/$clusterid</span><span class=w></span>
<span class=w>            </span><span class=nt>sku</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>            </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>          </span><span class=nt>location</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$region</span><span class=w></span>
<span class=w>          </span><span class=nt>managedIdentity</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-identity</span><span class=w></span>
<span class=w>          </span><span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>creationTimestamp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class=w></span>
<span class=w>          </span><span class=nt>networkResourceGroup</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-rg</span><span class=w></span>
<span class=w>          </span><span class=nt>osDisk</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>diskSizeGB</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">128</span><span class=w></span>
<span class=w>            </span><span class=nt>managedDisk</span><span class=p>:</span><span class=w></span>
<span class=w>              </span><span class=nt>storageAccountType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Premium_LRS</span><span class=w></span>
<span class=w>            </span><span class=nt>osType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Linux</span><span class=w></span>
<span class=w>          </span><span class=nt>publicIP</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class=w></span>
<span class=w>          </span><span class=nt>publicLoadBalancer</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid</span><span class=w></span>
<span class=w>          </span><span class=nt>resourceGroup</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-rg</span><span class=w></span>
<span class=w>          </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-worker-subnet</span><span class=w></span>
<span class=w>          </span><span class=nt>userDataSecret</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">worker-user-data</span><span class=w></span>
<span class=w>          </span><span class=nt>vmSize</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Standard_D8s_v3</span><span class=w></span>
<span class=w>          </span><span class=nt>vnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">$clusterid-vnet</span><span class=w></span>
<span class=w>          </span><span class=nt>zone</span><span class=p>:</span><span class=w> </span><span class=s>&quot;$zone&quot;</span><span class=w></span>
</code></pre></div> </td></tr></table> </div> </div> <hr> <h2 id=storage>Storage<a class=headerlink href=#storage title="Permanent link">&para;</a></h2> <p>In a default OpenShift deployment on Azure, you will have a single storage class called <code>managed-premium</code> which only provides ReadWriteOnce (RWO) access modes.</p> <div class=highlight><pre><span></span><code>$ oc get storageclass
NAME                        PROVISIONER                RECLAIMPOLICY   VOLUMEBINDINGMODE      ALLOWVOLUMEEXPANSION   AGE
managed-premium <span class=o>(</span>default<span class=o>)</span>   kubernetes.io/azure-disk   Delete          WaitForFirstConsumer   <span class=nb>true</span>                   34h
</code></pre></div> <p>This storage class will consume azure-disk resources from a Storage Account in the cluster resource group.</p> <p>If your CloudPak workloads require a ReadWriteMany (RWX) compatible storage class, the recommended solution is to use <a href=../golden-topology/#deploying-openshift-container-storage>OpenShift Container Storage</a>.</p> <hr> <h2 id=installation-scenarios>Installation Scenarios<a class=headerlink href=#installation-scenarios title="Permanent link">&para;</a></h2> <p>The recommended method for installing OpenShift into Azure is using an <a href=#installer-provisioned-infrastructure-ipi-deployment>Installer Provisioned Infrastructure Deployment</a>. It is a solid foundation that encompass most of the best practices and recommendations outlined in the <a href=../golden-topology/ >Golden Topology</a>. The installation process is fully supported by IBM and Red Hat, and you won't need to manage and maintain additional code assets to deploy your cluster.</p> <p>Customers requirements may prevent you from using an unmodified OpenShift installation in Azure. Below are some of the most common customer requests, as well as ways of handling. All these methods begin with the same process</p> <div class=highlight><pre><span></span><code>$ openshift-install create install-config
? SSH Public Key /Users/ncolon/.ssh/openshift_rsa.pub
? Platform azure
? azure subscription id ceb9d1a9-d0e8-46f9-a404-f2635fba6829
? azure tenant id fcf67057-50c9-4ad4-98f3-ffca64add9e9
? azure service principal client id a10be0dd-d46f-4592-9a2c-31d1c0bbecbe
? azure service principal client secret <span class=o>[</span>? <span class=k>for</span> help<span class=o>]</span> **********************************
INFO Saving user credentials to <span class=s2>&quot;/Users/ncolon/.azure/osServicePrincipal.json&quot;</span>
INFO Credentials loaded from file <span class=s2>&quot;/Users/ncolon/.azure/osServicePrincipal.json&quot;</span>
? Region centralus
? Base Domain azure.ibm-gtmaa.dev
? Cluster Name mycluster
? Pull Secret <span class=o>[</span>? <span class=k>for</span> help<span class=o>]</span> ***************************
INFO Install-Config created <span class=k>in</span>: .
</code></pre></div> <p>Once you've modified your <code>install-config.yaml</code> to fit your needs, create your manifests files.</p> <div class=highlight><pre><span></span><code>$ openshift-install create manifests
INFO Credentials loaded from file <span class=s2>&quot;/Users/ncolon/.azure/osServicePrincipal.json&quot;</span>
INFO Consuming Install Config from target directory
INFO Manifests created <span class=k>in</span>: manifests and openshift
</code></pre></div> <p>Once you've modified your manifests files, you can proceed to create your OpenShift Cluster.</p> <div class=highlight><pre><span></span><code>$ openshift-install create cluster
</code></pre></div> <p>Below is a sample install-config.yaml file for an Azure OpenShift Cluster.</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span><span class=w></span>
<span class=nt>baseDomain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">azure.ibm-gtmaa.dev</span><span class=w></span>
<span class=nt>compute</span><span class=p>:</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class=nt>architecture</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">amd64</span><span class=w></span>
<span class=w>  </span><span class=nt>hyperthreading</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Enabled</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">worker</span><span class=w></span>
<span class=w>  </span><span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w></span>
<span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class=w></span>
<span class=nt>controlPlane</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>architecture</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">amd64</span><span class=w></span>
<span class=w>  </span><span class=nt>hyperthreading</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Enabled</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">master</span><span class=w></span>
<span class=w>  </span><span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w></span>
<span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>creationTimestamp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mycluster</span><span class=w></span>
<span class=nt>networking</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>clusterNetwork</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>cidr</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.128.0.0/14</span><span class=w></span>
<span class=w>    </span><span class=nt>hostPrefix</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">23</span><span class=w></span>
<span class=w>  </span><span class=nt>machineNetwork</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>cidr</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.0/16</span><span class=w></span>
<span class=w>  </span><span class=nt>networkType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">OpenShiftSDN</span><span class=w></span>
<span class=w>  </span><span class=nt>serviceNetwork</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">172.30.0.0/16</span><span class=w></span>
<span class=nt>platform</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>azure</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>baseDomainResourceGroupName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ncolon-openshift4-rg</span><span class=w></span>
<span class=w>    </span><span class=nt>cloudName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">AzurePublicCloud</span><span class=w></span>
<span class=w>    </span><span class=nt>outboundType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Loadbalancer</span><span class=w></span>
<span class=w>    </span><span class=nt>region</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">centralus</span><span class=w></span>
<span class=nt>publish</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">External</span><span class=w></span>
<span class=nt>pullSecret</span><span class=p>:</span><span class=w> </span><span class=s>&#39;{&quot;auths&quot;:{...}}&#39;</span><span class=w></span>
<span class=nt>sshKey</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span><span class=w></span>
<span class=w>  </span><span class=no>ssh-rsa AAAAB3N...</span><span class=w></span>
</code></pre></div> <h3 id=node-sizing>Node Sizing<a class=headerlink href=#node-sizing title="Permanent link">&para;</a></h3> <h4 id=control-plane-nodes>Control Plane Nodes<a class=headerlink href=#control-plane-nodes title="Permanent link">&para;</a></h4> <p>The default control plane node size and count in an unmodified IPI installation is 3 <code>Standard_D8s_v3</code> nodes with a 1024Gb disk. You can configure the node size by modifying the <code>compute</code> section of your <code>install-config.yaml</code>.</p> <div class=highlight><pre><span></span><code><span class=nn>...</span><span class=w></span>
<span class=nt>controlPlane</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>architecture</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">amd64</span><span class=w></span>
<span class=w>  </span><span class=nt>hyperthreading</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Enabled</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">master</span><span class=w></span>
<span class=hll><span class=w>  </span><span class=nt>platform</span><span class=p>:</span><span class=w></span>
</span><span class=hll><span class=w>    </span><span class=nt>azure</span><span class=p>:</span><span class=w></span>
</span><span class=hll><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Standard_D16s_v3</span><span class=w></span>
</span><span class=hll><span class=w>      </span><span class=nt>osDisk</span><span class=p>:</span><span class=w></span>
</span><span class=hll><span class=w>        </span><span class=nt>diskSizeGB</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1024</span><span class=w></span>
</span><span class=hll><span class=w>        </span><span class=nt>diskType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Premium_LRS</span><span class=w></span>
</span><span class=hll><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class=w></span>
</span><span class=nn>...</span><span class=w></span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Only 3 replicas are supported for HA</p> </div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>IOPS Performance on Azure is tied to disk size as well as type. In order to meet the performance requirements of the ETCD database on the control plane nodes, a minimum of 1024Gb disk size is recommended, as well as using the <code>Premium_LRS</code> storage tier.</p> </div> <p>For a complete list of available <code>platform.azure.type</code> options, check out <a href=https://azure.microsoft.com/en-us/pricing/details/virtual-machines/series/ >Azure's documentation</a>. The recommended series is the General Purpose Compute D-Series, with a minimum spec of <code>Standard_D8s_v3</code> for production.</p> <h5 id=compute-nodes>Compute Nodes<a class=headerlink href=#compute-nodes title="Permanent link">&para;</a></h5> <p>The default worker node size and count in an unmodified IPI installation is 3 <code>Standard_D2s_v3</code> nodes with a 128Gb disk. You can configure the node size by modifying the <code>compute</code> section of your <code>install-config.yaml</code></p> <div class=highlight><pre><span></span><code><span class=nn>...</span><span class=w></span>
<span class=nt>compute</span><span class=p>:</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class=nt>architecture</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">amd64</span><span class=w></span>
<span class=w>  </span><span class=nt>hyperthreading</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Enabled</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">worker</span><span class=w></span>
<span class=hll><span class=w>  </span><span class=nt>platform</span><span class=p>:</span><span class=w></span>
</span><span class=hll><span class=w>    </span><span class=nt>azure</span><span class=p>:</span><span class=w></span>
</span><span class=hll><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Standard_D8s_v3</span><span class=w></span>
</span><span class=hll><span class=w>      </span><span class=nt>osDisk</span><span class=p>:</span><span class=w></span>
</span><span class=hll><span class=w>        </span><span class=nt>diskSizeGB</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">512</span><span class=w></span>
</span><span class=hll><span class=w>        </span><span class=nt>diskType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Premium_LRS</span><span class=w></span>
</span><span class=hll><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class=w></span>
</span><span class=nn>...</span><span class=w></span>
</code></pre></div> <p>For a complete list of available <code>platform.azure.type</code> options, check out <a href=https://azure.microsoft.com/en-us/pricing/details/virtual-machines/series/ >Azure's documentation</a>. The recommended series is the General Purpose Compute D-Series, but your workload requirements may dictate another series. If your workloads require GPU intensive tasks, take a look at the N-Series GPU Enabled Virtual Machines.</p> <h3 id=private-endpoints>Private Endpoints<a class=headerlink href=#private-endpoints title="Permanent link">&para;</a></h3> <p>An unmodified OpenShift installation will provision publicly facing LoadBalancers for <code>api</code> and <code>*.apps</code> (<code>api-int</code> is ALWAYS private). If your customer requires private endpoints, modify your install-config.yaml by appending <code>publish: Internal</code> to it. The <code>api</code> and <code>*.apps</code> LoadBalancers will be created within your VNET CIDR range on the master and worker subnets</p> <div class=highlight><pre><span></span><code><span class=nn>...</span><span class=w></span>
<span class=nt>sshKey</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span><span class=w></span>
<span class=w>  </span><span class=no>ssh-rsa AAAAB3N...</span><span class=w></span>
<span class=hll><span class=nt>publish</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Internal</span><span class=w></span>
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>There are limitations on how Azure VMs can reach the internet. They either have to</p> <ol> <li> <p>Have a Public IP address attached to them</p> </li> <li> <p>Your VNET provides alternate ways of reaching the internet</p> </li> <li> <p>The VMs are connected to a LoadBalancer with a public IP address(although no traffic is send their way)</p> </li> </ol> </div> <p>When you deploy a cluster with <code>publish: Internal</code>, OpenShift operators will create a LoadBalancer with a public IP address (scenario 3 above) listening on port 27627. The loadbalancer is created as a service called <code>outbound-provider</code> in the <code>openshift-config-managed</code> Namespace.</p> <h3 id=bring-your-own-resource-group>Bring Your Own Resource Group<a class=headerlink href=#bring-your-own-resource-group title="Permanent link">&para;</a></h3> <p>Customers may wish to use a pre-existing resource group as the target for OpenShift components. This can be achieved by setting the <code>platform.azure.resourceGroupName</code> configuration parameter in <code>install-config.yaml</code></p> <div class=highlight><pre><span></span><code><span class=nn>...</span><span class=w></span>
<span class=nt>platform</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>azure</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>baseDomainResourceGroupName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">os4-common</span><span class=w></span>
<span class=w>    </span><span class=nt>cloudName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">AzurePublicCloud</span><span class=w></span>
<span class=w>    </span><span class=nt>outboundType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Loadbalancer</span><span class=w></span>
<span class=w>    </span><span class=nt>region</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">centralus</span><span class=w></span>
<span class=hll><span class=w>    </span><span class=nt>resourceGroupName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">example-rg</span><span class=w></span>
</span><span class=nn>...</span><span class=w></span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>The resource group used <strong>MUST</strong> be empty, and will be deleted when the cluster is destroyed</p> </div> <h3 id=bring-your-own-network>Bring Your Own Network<a class=headerlink href=#bring-your-own-network title="Permanent link">&para;</a></h3> <p>Customers may wish to use their pre-existing VNET infrastructure as the target for OpenShift networking environment. This can be achieved by setting the <code>networkResourceGroupName</code>, <code>virtualNetwork</code>, <code>controlPlaneSubnet</code> and <code>computeSubnet</code> configuration parameters in the <code>platform.azure</code> section of <code>install-config.yaml</code></p> <div class=highlight><pre><span></span><code><span class=nn>...</span><span class=w></span>
<span class=nt>platform</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>azure</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>baseDomainResourceGroupName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ncolon-openshift4-rg</span><span class=w></span>
<span class=w>    </span><span class=nt>cloudName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">AzurePublicCloud</span><span class=w></span>
<span class=w>    </span><span class=nt>outboundType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Loadbalancer</span><span class=w></span>
<span class=w>    </span><span class=nt>region</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">centralus</span><span class=w></span>
<span class=hll><span class=w>    </span><span class=nt>networkResourceGroupName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-vnet-rg</span><span class=w></span>
</span><span class=hll><span class=w>    </span><span class=nt>virtualNetwork</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-vnet</span><span class=w></span>
</span><span class=hll><span class=w>    </span><span class=nt>controlPlaneSubnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-master-subnet</span><span class=w></span>
</span><span class=hll><span class=w>    </span><span class=nt>computeSubnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-worker-subnet</span><span class=w></span>
</span><span class=nn>...</span><span class=w></span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>While deploying into existing VNET and Subnets is a supported scenario, it is the customer's responsibility that there are no policies that prevent OpenShift from deploying, any security groups that block traffic, etc</p> <p>Only one <code>virtualNetwork</code> is supported per cluster.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>You can set your controlPlaneSubnet and computeSubnet to the same if your customer requires a flat network in their VNET.</p> </div> <h3 id=user-defined-routing>User Defined Routing<a class=headerlink href=#user-defined-routing title="Permanent link">&para;</a></h3> <p>If absolutely no public endpoints can be present in the deployment of OpenShift on the customer's VNET, the scenario described on <a href=#private-endpoints>Private Endpoints</a> is not enough. You also need to set the <code>platform.azure.outboundType</code> flag to <code>UserDefinedRouting</code>. This will instruct the OpenShift operators not to create the Public LoadBalancer listening on port 27627.</p> <div class=highlight><pre><span></span><code><span class=nn>...</span><span class=w></span>
<span class=nt>platform</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>azure</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>baseDomainResourceGroupName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ncolon-openshift4-rg</span><span class=w></span>
<span class=w>    </span><span class=nt>cloudName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">AzurePublicCloud</span><span class=w></span>
<span class=hll><span class=w>    </span><span class=nt>outboundType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">UserDefinedRouting</span><span class=w></span>
</span><span class=w>    </span><span class=nt>region</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">centralus</span><span class=w></span>
<span class=nn>...</span><span class=w></span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>This configuration parameter assumes that connectivity to the internet is <em>somehow</em> provided by the VNET infrastructure, via proxies, routing through customer on-prem network connected via ExpressRoute, or any other mechanisms in place. It is the customer's responsibility to provide the necessary connectivity to the internet so OpenShift can download its required installation artifacts.</p> </div> <h3 id=bring-your-own-dns>Bring Your Own DNS<a class=headerlink href=#bring-your-own-dns title="Permanent link">&para;</a></h3> <p>Customers may not wish to use Azure DNS Zones (public or private), opting instead to use their existing Enterprise DNS servers. This can be achieved by modifying the <code>manifests/cluster-dns-02-config.yml</code> DNS configuration manifest. Remove the <code>spec.privateZone</code> and <code>spec.publicZone</code> sections in the file. When done editing, the file should look like this:</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">config.openshift.io/v1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">DNS</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>creationTimestamp</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">null</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cluster</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>baseDomain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mycluster.azure.ibm-gtmaa.dev</span><span class=w></span>
<span class=nt>status</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span><span class=w></span>
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>By disabling this feature of the DNS Operator, the cluster will no longer be able to update DNS for you as LoadBalancers are created during installation. As the installation progresses, you will need to pay <strong>VERY</strong> close attention to the loadbalancers created in your cluster resource group.</p> </div> <p><img alt="azure loadbalancers" src=../images/azure/az-lbs.png> The first loadbalancer that gets created is <code>&lt;cluster_id&gt;-internal</code>. You need to update your DNS records so that <code>api-int.&lt;cluster_name&gt;.&lt;base_domain&gt;</code> points to this LoadBalancer. This happens very early in the deployment process, and the OpenShift master nodes will not boot up until this record is created.</p> <p>The next loadbalancer created is <code>&lt;cluster_id&gt;</code>. It hosts the endpoints for <code>api</code> and <code>*.apps</code>. During the first phase of OpenShift deployment (pre-bootstrapping), the LoadBalancer will consist of a single IP address, public or private. During the second phase of OpenShift deployment (post-bootstrapping) a 2nd IP address will be created by the OpenShift Ingress Operator, and it will have a long random character name.</p> <p><img alt="azure loadbalancers" src=../images/azure/az-lbs-ipaddresses.png></p> <p>In the example above, you would point the DNS record <code>api.&lt;cluster_name&gt;.&lt;base_domain&gt;</code> to the <code>public-lb-ip-v4</code> and <code>*.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;</code> to the random character IP address.</p> <p>In the extreme case that your customer does not allow wildcard DNS entries on their Enterprise DNS servers, the following DNS records <strong>MUST</strong> be created, pointing to the apps Loadbalancer, instead of <code>*.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;</code>. The cluster will not finish deployment until these records are created.</p> <div class=highlight><pre><span></span><code>oauth-openshift.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;
console-openshift-console.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;
downloads-openshift-console.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;
canary-openshift-ingress-canary.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;
alertmanager-main-openshift-monitoring.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;
grafana-openshift-monitoring.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;
prometheus-k8s-openshift-monitoring.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;
thanos-querier-openshift-monitoring.apps.&lt;cluster_name&gt;.&lt;base_domain&gt;
</code></pre></div> <h2 id=user-provided-infrastructure>User Provided Infrastructure<a class=headerlink href=#user-provided-infrastructure title="Permanent link">&para;</a></h2> <p>If your customer has any requirements that can't be met by the above solutions, we've provided an <a href=https://github.com/ibm-cloud-architecture/terraform-openshift4-azure>implementation in terraform</a>. This implementation is meant to be modified to meet your customer needs, and requires working knowledge of terraform. Deploying this implementation with no modifications is the equivalent of running <code>openshift-install create cluster</code>, and should be avoided.</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <!-- Footer --> <footer class=md-footer> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../aws/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Amazon AWS </div> </div> </a> <!-- Link to next page --> <a href=../restricted-networks/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Restricted Networks </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright  2021 Cloud Pak Production Deployment Guides </div> </div> <div class=md-footer-social> <a href=https://github.ibm.com/cloudpakbringup/deployment-guides target=_blank rel=noopener title="Production Deployment Guides on Github Enterprise" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"> <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"> </path> </svg> </a> <a href=https://ibm-cloud.slack.com/archives/C02CQ6M2D2R target=_blank rel=noopener title=Slack class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"> <path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"> </path> </svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tracking", "navigation.tabs.sticky", "navigation.top", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.092fa1f6.min.js"}</script> <script src=../../assets/javascripts/bundle.e3b2bf44.min.js></script> </body> </html>