<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta name=author content="Cloud Pak Production Deployment Guides development team"><link rel=icon href=../../../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.2.11"><title>Restoring a Cluster from a GitOps Repository - Cloud Pak Production Deployment Guides</title><link rel=stylesheet href=../../../assets/stylesheets/main.8c5ef100.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.9647289d.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><link rel=stylesheet href=../../../css/extra.css><link rel=stylesheet href=../../../css/toolkit-code.css><script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q0FLL49YN3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&gtag("event","search",{search_term:this.value})}),"undefined"!=typeof location$&&location$.subscribe(function(e){gtag("config","G-Q0FLL49YN3",{page_path:e.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q0FLL49YN3"></script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="Cloud Pak Production Deployment Guides - Restoring a Cluster from a GitOps Repository"><meta property=og:description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta property=og:url content=None><meta property=og:image content=assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#restoring-a-cluster-from-a-gitops-repository class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Cloud Pak Production Deployment Guides" class="md-header__button md-logo" aria-label="Cloud Pak Production Deployment Guides" data-md-component=logo> <img src=../../../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Cloud Pak Production Deployment Guides </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Restoring a Cluster from a GitOps Repository </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../overview/overview/ class=md-tabs__link> Production Considerations </a> </li> <li class=md-tabs__item> <a href=../../../quickstart/overview/ class=md-tabs__link> Quick Start Demos </a> </li> <li class=md-tabs__item> <a href=../../../guides/guides-overview/ class=md-tabs__link> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../infrastructure/ad/ class="md-tabs__link md-tabs__link--active"> References </a> </li> <li class=md-tabs__item> <a href=../../../overview/whats-new/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!-- Determine class according to configuration --> <!-- Main navigation --> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <!-- Site title --> <!--
  <label class="md-nav__title" for="__drawer">
    <a
      href="../../.."
      title="Cloud Pak Production Deployment Guides"
      class="md-nav__button md-logo"
      aria-label="Cloud Pak Production Deployment Guides"
      data-md-component="logo"
    >
      
  <img src="../../../images/cloudnativetoolkit.png" alt="logo">

    </a>
    Cloud Pak Production Deployment Guides
  </label>
--> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> <!-- Render item list --> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Production Considerations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Production Considerations" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Production Considerations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../overview/overview/ class=md-nav__link> Objective </a> </li> <li class=md-nav__item> <a href=../../../gitops/personas/ class=md-nav__link> Personas </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> DevOps Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="DevOps Automation" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> DevOps Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../automation/why-automate/ class=md-nav__link> Why Automate? </a> </li> <li class=md-nav__item> <a href=../../../gitops/structure/ class=md-nav__link> GitOps Structure </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> Golden Topologies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Golden Topologies" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Golden Topologies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../infrastructure/golden-topology/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../infrastructure/golden-topology-azure/ class=md-nav__link> Azure Unmanaged </a> </li> <li class=md-nav__item> <a href=../../../infrastructure/golden-topology-aro/ class=md-nav__link> Azure Managed (ARO) </a> </li> <li class=md-nav__item> <a href=../../../infrastructure/golden-topology-aws/ class=md-nav__link> AWS Unmanaged </a> </li> <li class=md-nav__item> <a href=../../../infrastructure/golden-topology-rosa/ class=md-nav__link> AWS Managed (ROSA) </a> </li> <li class=md-nav__item> <a href=../../../infrastructure/golden-topology-roks/ class=md-nav__link> IBM Cloud Managed (ROKS) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5> Cloud Pak for Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Integration" data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Cloud Pak for Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_1 type=checkbox id=__nav_2_5_1> <label class=md-nav__link for=__nav_2_5_1> IBM App Connect Enterprise <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM App Connect Enterprise" data-md-level=3> <label class=md-nav__title for=__nav_2_5_1> <span class="md-nav__icon md-icon"></span> IBM App Connect Enterprise </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/overview/architecture/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_2 type=checkbox id=__nav_2_5_2> <label class=md-nav__link for=__nav_2_5_2> IBM Message Queue <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Message Queue" data-md-level=3> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> IBM Message Queue </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/security/information/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/cloud-native/promote-environments/ class=md-nav__link> Promoting across environments </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/performance/performance/ class=md-nav__link> Performance </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/high-availability/overview/ class=md-nav__link> High Availability </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3 type=checkbox id=__nav_2_5_3> <label class=md-nav__link for=__nav_2_5_3> IBM API Connect <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM API Connect" data-md-level=3> <label class=md-nav__title for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> IBM API Connect </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3_1 type=checkbox id=__nav_2_5_3_1> <label class=md-nav__link for=__nav_2_5_3_1> Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Architecture data-md-level=4> <label class=md-nav__title for=__nav_2_5_3_1> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/architecture/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/architecture/multi-cloud/ class=md-nav__link> Multi-cloud </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/security/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/high-availability/overview/ class=md-nav__link> High Availability </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/disaster-recovery/overview/ class=md-nav__link> Disaster Recovery </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6 type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6> Cloud Pak for Business Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Business Automation" data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Business Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_1 type=checkbox id=__nav_2_6_1> <label class=md-nav__link for=__nav_2_6_1> IBM Automation Decision Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Automation Decision Services" data-md-level=3> <label class=md-nav__title for=__nav_2_6_1> <span class="md-nav__icon md-icon"></span> IBM Automation Decision Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4ba/ads/architecture/ads/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_2 type=checkbox id=__nav_2_6_2> <label class=md-nav__link for=__nav_2_6_2> IBM Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Process Mining" data-md-level=3> <label class=md-nav__title for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> IBM Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4ba/process-mining/architecture/ibm-cloud/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_7 type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=2> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4d-hadr/cpdbase/overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4d-hadr/cpdbase/overview/cpd-overview/ class=md-nav__link> Overview </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Quick Start Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Quick Start Demos" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Quick Start Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../quickstart/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-cntk/ class=md-nav__link> Cloud Native Toolkit </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> Cloud Pak for Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Integration" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Cloud Pak for Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../quickstart/quickstart-ace/ class=md-nav__link> IBM App Connect Enterprise </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-mq/ class=md-nav__link> IBM Message Queue </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-apic/ class=md-nav__link> IBM API Connect </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-es/ class=md-nav__link> IBM Event Streams </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Cloud Pak for Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Security" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Cloud Pak for Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../quickstart/quickstart-cp4s/ class=md-nav__link> Cloud Pak for Security </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> Cloud Pak for Business Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Business Automation" data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Cloud Pak for Business Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../quickstart/quickstart-process-mining/ class=md-nav__link> IBM Process Mining </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../quickstart/quickstart-cp4d/ class=md-nav__link> Cloud Pak for Data </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-cp4d-ws/ class=md-nav__link> IBM Watson Studio </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-cp4d-wkc/ class=md-nav__link> IBM Watson Knowledge Catalog </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-cp4d-ds/ class=md-nav__link> IBM DataStage </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-cp4d-aespark/ class=md-nav__link> IBM Analytics Engine Powered by Apache Spark </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-cp4d-wos/ class=md-nav__link> IBM Watson OpenScale </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7> Observability <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Observability data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Observability </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../quickstart/quickstart-instana-agent/ class=md-nav__link> Instana Agent </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-instana-grafana/ class=md-nav__link> Instana & Grafana </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-instana-server/ class=md-nav__link> Instana Server </a> </li> <li class=md-nav__item> <a href=../../../quickstart/quickstart-instana-mq/ class=md-nav__link> Instana & MQ </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8> Sterling B2Bi <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Sterling B2Bi" data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Sterling B2Bi </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../quickstart/quickstart-sterling-b2bi/ class=md-nav__link> Sterling File Gateway </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/guides-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Infrastructure <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Infrastructure data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../infrastructure/infra-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_2 type=checkbox id=__nav_4_2_2> <label class=md-nav__link for=__nav_4_2_2> Managed Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Managed Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> Managed Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../infrastructure/roks/ class=md-nav__link> IBM ROKS </a> </li> <li class=md-nav__item> <a href=../../../infrastructure/rosa/ class=md-nav__link> Amazon ROSA </a> </li> <li class=md-nav__item> <a href=../../../infrastructure/aro/ class=md-nav__link> Microsoft ARO </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_3 type=checkbox id=__nav_4_2_3> <label class=md-nav__link for=__nav_4_2_3> Unmanaged Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Unmanaged Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> Unmanaged Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../infrastructure/aws/ class=md-nav__link> Amazon AWS </a> </li> <li class=md-nav__item> <a href=../../../infrastructure/azure/ class=md-nav__link> Microsoft Azure </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../infrastructure/restricted-networks/ class=md-nav__link> Restricted Networks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Cloud Pak for Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Integration" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Cloud Pak for Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1 type=checkbox id=__nav_4_3_1> <label class=md-nav__link for=__nav_4_3_1> IBM App Connect Enterprise <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM App Connect Enterprise" data-md-level=3> <label class=md-nav__title for=__nav_4_3_1> <span class="md-nav__icon md-icon"></span> IBM App Connect Enterprise </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/overview/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_3 type=checkbox id=__nav_4_3_1_3> <label class=md-nav__link for=__nav_4_3_1_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/cluster-create/ibm-setup/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_4 type=checkbox id=__nav_4_3_1_4> <label class=md-nav__link for=__nav_4_3_1_4> Configure the Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the Cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_4> <span class="md-nav__icon md-icon"></span> Configure the Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps, Tekton & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/cluster-config/services/ class=md-nav__link> Deploying Services </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/cluster-config/applications/ class=md-nav__link> Application components </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/cloud-native-example/example/ class=md-nav__link> Cloud Native Example </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/deploy-backend-service/deploy-backend-service/ class=md-nav__link> Deploy Backend Service </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_7 type=checkbox id=__nav_4_3_1_7> <label class=md-nav__link for=__nav_4_3_1_7> Build Integration Server <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build Integration Server" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_7> <span class="md-nav__icon md-icon"></span> Build Integration Server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/build-integration-server/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/build-integration-server/build-configurations/ class=md-nav__link> Build Configuration </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/build-integration-server/build-integration-server/ class=md-nav__link> Build Integration Server </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/build-integration-server/continuous-update/ class=md-nav__link> Continuous Update </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/ace/environment-promotion/promoting-environments/ class=md-nav__link> Environment Promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2 type=checkbox id=__nav_4_3_2> <label class=md-nav__link for=__nav_4_3_2> IBM MQ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM MQ" data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> IBM MQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/using/this-guide/ class=md-nav__link> The MQ tutorial </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/overview/architecture/ class=md-nav__link> Target architecture </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/cluster-create/ibm-setup/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_4 type=checkbox id=__nav_4_3_2_4> <label class=md-nav__link for=__nav_4_3_2_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/cluster-config/services/ class=md-nav__link> Add services </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/cluster-config/applications/ class=md-nav__link> Application components </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_5 type=checkbox id=__nav_4_3_2_5> <label class=md-nav__link for=__nav_4_3_2_5> Build Queue Manager <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build Queue Manager" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_5> <span class="md-nav__icon md-icon"></span> Build Queue Manager </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/qmgr-pipeline/topic1/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/qmgr-pipeline/topic2/ class=md-nav__link> Running the pipeline </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/qmgr-pipeline/topic3/ class=md-nav__link> Deploying and using </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/qmgr-pipeline/topic4/ class=md-nav__link> Continuous updates </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_6 type=checkbox id=__nav_4_3_2_6> <label class=md-nav__link for=__nav_4_3_2_6> Build MQ application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build MQ application" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_6> <span class="md-nav__icon md-icon"></span> Build MQ application </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/app-pipeline/topic1/ class=md-nav__link> Sample application </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/app-pipeline/topic2/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/app-pipeline/topic3/ class=md-nav__link> Managing an application change </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_7 type=checkbox id=__nav_4_3_2_7> <label class=md-nav__link for=__nav_4_3_2_7> Environment Promotion <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Environment Promotion" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_7> <span class="md-nav__icon md-icon"></span> Environment Promotion </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/cloud-native/promoting-environments-dev-stage/ class=md-nav__link> Promote from dev to staging </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/cloud-native/promoting-environments-stage-prod/ class=md-nav__link> Promote from staging to prod </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/cloud-native/automate-promotion/ class=md-nav__link> Automate promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_8 type=checkbox id=__nav_4_3_2_8> <label class=md-nav__link for=__nav_4_3_2_8> Monitor Queue Manager <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Monitor Queue Manager" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_8> <span class="md-nav__icon md-icon"></span> Monitor Queue Manager </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/monitoring/topic1/ class=md-nav__link> Technology stack </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/monitoring/topic2/ class=md-nav__link> MQ scenario </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/monitoring/topic3/ class=md-nav__link> Metrics application </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/monitoring/topic4/ class=md-nav__link> Customising dashboard </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_9 type=checkbox id=__nav_4_3_2_9> <label class=md-nav__link for=__nav_4_3_2_9> Expose MQ App APIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Expose MQ App APIs" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_9> <span class="md-nav__icon md-icon"></span> Expose MQ App APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/apic/deploy-apic/ class=md-nav__link> Deploy API Connect </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/apic/configure-apic/ class=md-nav__link> Configure API Connect </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/apic/publish-apis/ class=md-nav__link> Publish APIs </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/apic/consume-apis/ class=md-nav__link> Consume APIs </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/apic/monitor-apis/ class=md-nav__link> Monitor APIs </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/apic/promote-apis/ class=md-nav__link> Promote APIs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_10 type=checkbox id=__nav_4_3_2_10> <label class=md-nav__link for=__nav_4_3_2_10> Architecture Decisions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Architecture Decisions" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_10> <span class="md-nav__icon md-icon"></span> Architecture Decisions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/mq/ad/ class=md-nav__link> Decision Index </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3 type=checkbox id=__nav_4_3_3> <label class=md-nav__link for=__nav_4_3_3> IBM API Connect <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM API Connect" data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> IBM API Connect </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/overview/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_2 type=checkbox id=__nav_4_3_3_2> <label class=md-nav__link for=__nav_4_3_3_2> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_2> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_3 type=checkbox id=__nav_4_3_3_3> <label class=md-nav__link for=__nav_4_3_3_3> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_3> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps, Tekton & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/cluster-config/applications/ class=md-nav__link> Application components </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_4 type=checkbox id=__nav_4_3_3_4> <label class=md-nav__link for=__nav_4_3_3_4> Deploy APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_4> <span class="md-nav__icon md-icon"></span> Deploy APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_5 type=checkbox id=__nav_4_3_3_5> <label class=md-nav__link for=__nav_4_3_3_5> Configure APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_5> <span class="md-nav__icon md-icon"></span> Configure APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/configuration/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_6 type=checkbox id=__nav_4_3_3_6> <label class=md-nav__link for=__nav_4_3_3_6> Publish APIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Publish APIs" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_6> <span class="md-nav__icon md-icon"></span> Publish APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/publish/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4 type=checkbox id=__nav_4_3_4> <label class=md-nav__link for=__nav_4_3_4> IBM API Connect Multi-Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM API Connect Multi-Cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_3_4> <span class="md-nav__icon md-icon"></span> IBM API Connect Multi-Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/multi-cluster/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/multi-cluster/create-clusters/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4_3 type=checkbox id=__nav_4_3_4_3> <label class=md-nav__link for=__nav_4_3_4_3> Configure the clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the clusters" data-md-level=4> <label class=md-nav__title for=__nav_4_3_4_3> <span class="md-nav__icon md-icon"></span> Configure the clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/multi-cluster/configure-clusters-gitops/ class=md-nav__link> GitOps repos & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/multi-cluster/configure-clusters-gitops-config/ class=md-nav__link> Configure GitOps repos </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/multi-cluster/deploy/ class=md-nav__link> Deploy APIC </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/multi-cluster/config-pipeline/ class=md-nav__link> Configure APIC </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4i/apic/multi-cluster/publish-pipeline/ class=md-nav__link> Publish APIs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5 type=checkbox id=__nav_4_3_5> <label class=md-nav__link for=__nav_4_3_5> Event-Driven Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Event-Driven Architecture" data-md-level=3> <label class=md-nav__title for=__nav_4_3_5> <span class="md-nav__icon md-icon"></span> Event-Driven Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4i/eda/link/ class=md-nav__link> EDA GitOps Solution </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Cloud Pak for Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Security" data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Cloud Pak for Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4s/cp4s-tree/using/this-guide/ class=md-nav__link> The CP4S tutorial </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4s/cp4s-tree/overview/architecture/ class=md-nav__link> CP4S architecture </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4s/cp4s-tree/cluster-create/ibm-setup/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_4 type=checkbox id=__nav_4_4_4> <label class=md-nav__link for=__nav_4_4_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_4_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4s/cp4s-tree/cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4s/cp4s-tree/cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4s/cp4s-tree/cluster-config/services/ class=md-nav__link> Add services </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4s/cp4s-tree/cluster-config/backup-recovery-upgrade/ class=md-nav__link> Managing Lifecycle for CP4S </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4s/cp4s-tree/cluster-config/connect-datasources/ class=md-nav__link> Connecting DataSources for CP4S </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4d/platform/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_2 type=checkbox id=__nav_4_5_2> <label class=md-nav__link for=__nav_4_5_2> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_5_2> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4d/cluster-create/ibm-setup/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_3 type=checkbox id=__nav_4_5_3> <label class=md-nav__link for=__nav_4_5_3> Configure the Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the Cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_5_3> <span class="md-nav__icon md-icon"></span> Configure the Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4d/cluster-config/gitops-argocd/ class=md-nav__link> GitOps and ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4d/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../guides/cp4d/platform/deployment/ class=md-nav__link> Deployment </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5 type=checkbox id=__nav_4_5_5> <label class=md-nav__link for=__nav_4_5_5> Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Services data-md-level=3> <label class=md-nav__title for=__nav_4_5_5> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5_1 type=checkbox id=__nav_4_5_5_1> <label class=md-nav__link for=__nav_4_5_5_1> Watson Studio <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Studio" data-md-level=4> <label class=md-nav__title for=__nav_4_5_5_1> <span class="md-nav__icon md-icon"></span> Watson Studio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4d/watson-studio/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4d/watson-studio/deployment/ class=md-nav__link> Deployment </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5_2 type=checkbox id=__nav_4_5_5_2> <label class=md-nav__link for=__nav_4_5_5_2> Watson Knowledge Catalog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Knowledge Catalog" data-md-level=4> <label class=md-nav__title for=__nav_4_5_5_2> <span class="md-nav__icon md-icon"></span> Watson Knowledge Catalog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4d/wkc/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4d/wkc/deployment/ class=md-nav__link> Deployment </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6> Cloud Pak for Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Automation" data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1 type=checkbox id=__nav_4_6_1> <label class=md-nav__link for=__nav_4_6_1> IBM Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Process Mining" data-md-level=3> <label class=md-nav__title for=__nav_4_6_1> <span class="md-nav__icon md-icon"></span> IBM Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4ba/process-mining/overview/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4ba/process-mining/using/this-guide/ class=md-nav__link> Using this guide </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_3 type=checkbox id=__nav_4_6_1_3> <label class=md-nav__link for=__nav_4_6_1_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4ba/process-mining/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_4 type=checkbox id=__nav_4_6_1_4> <label class=md-nav__link for=__nav_4_6_1_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4ba/process-mining/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../guides/cp4ba/process-mining/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_5 type=checkbox id=__nav_4_6_1_5> <label class=md-nav__link for=__nav_4_6_1_5> Deploy Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy Process Mining" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_5> <span class="md-nav__icon md-icon"></span> Deploy Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../guides/cp4ba/process-mining/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=References data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../infrastructure/ad/ class=md-nav__link> Architectural Decisions </a> </li> <li class=md-nav__item> <a href=../../prerequisites/instructions/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../training/training/ class=md-nav__link> Training </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Restoring a Cluster from a GitOps Repository <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Restoring a Cluster from a GitOps Repository </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#on-original-cluster class=md-nav__link> On Original Cluster </a> <nav class=md-nav aria-label="On Original Cluster"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#saving-sealed-secret-certificate class=md-nav__link> Saving Sealed Secret Certificate </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#on-new-cluster class=md-nav__link> On New Cluster </a> <nav class=md-nav aria-label="On New Cluster"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#high-level-steps class=md-nav__link> High Level Steps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-a-new-cluster class=md-nav__link> Create a new Cluster </a> </li> <li class=md-nav__item> <a href=#openshift-on-ibm-cloud class=md-nav__link> OpenShift on IBM Cloud </a> </li> <li class=md-nav__item> <a href=#install-argocd class=md-nav__link> Install ArgoCD </a> </li> <li class=md-nav__item> <a href=#creating-a-custom-instance class=md-nav__link> Creating a custom instance </a> </li> <li class=md-nav__item> <a href=#deploy-the-infrastructure class=md-nav__link> Deploy the Infrastructure </a> </li> <li class=md-nav__item> <a href=#bootstrap-the-cluster class=md-nav__link> Bootstrap the cluster </a> </li> <li class=md-nav__item> <a href=#add-the-secrets class=md-nav__link> Add the Secrets </a> <nav class=md-nav aria-label="Add the Secrets"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#in-all-cases class=md-nav__link> In All Cases </a> </li> <li class=md-nav__item> <a href=#if-you-saved-your-sealed-secret-certificate class=md-nav__link> If You Saved Your Sealed Secret Certificate </a> </li> <li class=md-nav__item> <a href=#if-you-did-not-save-your-sealed-secret-certificate class=md-nav__link> If You Did Not Save Your Sealed Secret Certificate </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#deploy-the-services class=md-nav__link> Deploy the Services </a> </li> <li class=md-nav__item> <a href=#re-encrypt-your-sealed-secrets class=md-nav__link> Re-encrypt your Sealed Secrets </a> </li> <li class=md-nav__item> <a href=#deploy-the-applications class=md-nav__link> Deploy the Applications </a> </li> <li class=md-nav__item> <a href=#post-deployment-tasks class=md-nav__link> Post Deployment tasks </a> <nav class=md-nav aria-label="Post Deployment tasks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#update-webhooks class=md-nav__link> Update Webhooks </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=About data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../overview/whats-new/ class=md-nav__link> What's New </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_2 type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2> Contributing Content <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Contributing Content" data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Contributing Content </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../contribute/githubflow/ class=md-nav__link> GitHub Open Source Contribution Steps </a> </li> <li class=md-nav__item> <a href=../../../contribute/documentation/ class=md-nav__link> Running a Local Site Instance </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#on-original-cluster class=md-nav__link> On Original Cluster </a> <nav class=md-nav aria-label="On Original Cluster"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#saving-sealed-secret-certificate class=md-nav__link> Saving Sealed Secret Certificate </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#on-new-cluster class=md-nav__link> On New Cluster </a> <nav class=md-nav aria-label="On New Cluster"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#high-level-steps class=md-nav__link> High Level Steps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-a-new-cluster class=md-nav__link> Create a new Cluster </a> </li> <li class=md-nav__item> <a href=#openshift-on-ibm-cloud class=md-nav__link> OpenShift on IBM Cloud </a> </li> <li class=md-nav__item> <a href=#install-argocd class=md-nav__link> Install ArgoCD </a> </li> <li class=md-nav__item> <a href=#creating-a-custom-instance class=md-nav__link> Creating a custom instance </a> </li> <li class=md-nav__item> <a href=#deploy-the-infrastructure class=md-nav__link> Deploy the Infrastructure </a> </li> <li class=md-nav__item> <a href=#bootstrap-the-cluster class=md-nav__link> Bootstrap the cluster </a> </li> <li class=md-nav__item> <a href=#add-the-secrets class=md-nav__link> Add the Secrets </a> <nav class=md-nav aria-label="Add the Secrets"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#in-all-cases class=md-nav__link> In All Cases </a> </li> <li class=md-nav__item> <a href=#if-you-saved-your-sealed-secret-certificate class=md-nav__link> If You Saved Your Sealed Secret Certificate </a> </li> <li class=md-nav__item> <a href=#if-you-did-not-save-your-sealed-secret-certificate class=md-nav__link> If You Did Not Save Your Sealed Secret Certificate </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#deploy-the-services class=md-nav__link> Deploy the Services </a> </li> <li class=md-nav__item> <a href=#re-encrypt-your-sealed-secrets class=md-nav__link> Re-encrypt your Sealed Secrets </a> </li> <li class=md-nav__item> <a href=#deploy-the-applications class=md-nav__link> Deploy the Applications </a> </li> <li class=md-nav__item> <a href=#post-deployment-tasks class=md-nav__link> Post Deployment tasks </a> <nav class=md-nav aria-label="Post Deployment tasks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#update-webhooks class=md-nav__link> Update Webhooks </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/edit/master/docs/references/restorecluster/gitops-restore-cluster.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=restoring-a-cluster-from-a-gitops-repository>Restoring a Cluster from a GitOps Repository<a class=headerlink href=#restoring-a-cluster-from-a-gitops-repository title="Permanent link">&para;</a></h1> <!--- cSpell:ignore argoproj resyncs apic --> <p>There are times where you might want to restore a cluster based on the information stored in a GitOps repository. This might be a demo or training environment from a cluster that is no longer available. If you have a cluster configuration that you would like to restore, you can make it easier by saving some items before your cluster expires or is deleted. If you lose your original cluster before you are able to save these items, you can still restore it, but it does add a few steps.</p> <h2 id=on-original-cluster><strong>On Original Cluster</strong><a class=headerlink href=#on-original-cluster title="Permanent link">&para;</a></h2> <h3 id=saving-sealed-secret-certificate>Saving Sealed Secret Certificate<a class=headerlink href=#saving-sealed-secret-certificate title="Permanent link">&para;</a></h3> <p>Many clients use a <strong>Secrets Manager</strong> product to maintain their secrets in a vault external to the cluster. In this case, the certificates used to decrypt your secrets will be already stored in that vault, and can be restored to your new cluster. The steps are specific to your <strong>Secrets Manager</strong> product.</p> <p>If, instead, you are using <strong>Sealed Secrets</strong> to store your secrets in your GitOps repo, as described in the tutorials on this site, you can make a backup of the sealed secret operator's certificate before your current cluster expires with the following command.</p> <div class=highlight><pre><span></span><code>oc get secret -n sealed-secrets -l sealedsecrets.bitnami.com/sealed-secrets-key -o yaml &gt;master.key
</code></pre></div> <p>The command above stores the certificate in a <code>master.key</code> file. You can then deploy the certificate to your new cluster, as described <a href=./#if-you-saved-your-sealed-secret-certificate>below</a>. Once the certificate has been deployed on your new cluster, the sealed secret operator will be able to decrypt your existing sealed secrets. Keep the <code>master.key</code> file in a safe place. Do <strong>NOT</strong> store it in your GitOps repo because if someone gains access to this file they could decrypt your secrets.</p> <p>If you did not create a backup of the sealed secret operator's certificate before your cluster expired, then you simply have to re-encrypt those secrets after you install the sealed secret operator in your new cluster. This process is described in <a href=./#re-encrypt-your-sealed-secrets>detail below</a>.</p> <h2 id=on-new-cluster><strong>On New Cluster</strong><a class=headerlink href=#on-new-cluster title="Permanent link">&para;</a></h2> <h3 id=high-level-steps>High Level Steps<a class=headerlink href=#high-level-steps title="Permanent link">&para;</a></h3> <p>Here are the high level steps to restore a cluster from an existing GitOps repo:</p> <ol> <li><a href=#create-a-new-cluster>Create a new cluster</a></li> <li><a href=#install-argocd>Install ArgoCD</a></li> <li><a href=#deploy-the-infrastructure>Deploy the Infrastructure</a></li> <li><a href=#bootstrap-the-cluster>Bootstrap the cluster</a></li> <li><a href=#add-the-secrets>Add the Secrets</a></li> <li><a href=#deploy-the-services>Deploy the Services</a></li> <li><a href=#re-encrypt-your-sealed-secrets>Re-encrypt your Sealed Secrets</a></li> <li><a href=#deploy-the-applications>Deploy the Applications</a></li> <li><a href=#post-deployment-tasks>Post Deployment tasks</a></li> </ol> <h2 id=create-a-new-cluster><strong>Create a new Cluster</strong><a class=headerlink href=#create-a-new-cluster title="Permanent link">&para;</a></h2> <p>To restore your GitOps repo you first need to create an Openshift cluster.</p> <details class=example> <summary>Click to see details on how to use Techzone to create an OpenShift cluster on IBM Cloud</summary> <div class="admonition note"> <p class=admonition-title>Note</p> <p>In the steps below you will need to adjust the size and settings of the cluster you create to match your original cluster settings.</p> </div> <h2 id=openshift-on-ibm-cloud>OpenShift on IBM Cloud<a class=headerlink href=#openshift-on-ibm-cloud title="Permanent link">&para;</a></h2> <ol> <li> <p>Navigate to the <a class=external href=https://techzone.ibm.com/my/reservations/create/619e5691425423001fcc192e target=_blank>IBM Technology Zone</a></p> <p>In your browser, navigate to the <a class=external href=https://techzone.ibm.com/my/reservations/create/619e5691425423001fcc192e target=_blank>IBM Technology Zone</a> to create your cluster.</p> <ul> <li>You will need to sign-in with your IBM credentials if your browser has not authenticated.</li> <li>You will need to read and accept <code>Terms and conditions</code> to proceed to the IBM Technology Zone.</li> </ul> </li> <li> <p>Reserve a cluster</p> <p>You can reserve a cluster immediately on IBM Cloud.</p> <p>You'll see the following options:</p> <p><img alt=techzone-create-rsvp src=/snippets/images/techzone-create-rsvp.png style=max-height:600px></p> <p>Click on the <code>Reserve now</code> radio button.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>It takes between 30 and 60 minutes to provision a cluster. Moreover, once a cluster has been provisioned, by default, it will be deleted after 3 days -- unless you renew it. It can therefore be helpful to schedule the environment to be created later if you are not going to be using it for a while -- such as for a future demonstration or classroom session. Come back and explore the <code>Schedule for later</code> option another time.</p> </div> </li> <li> <p>Complete reservation details <em>- step 1</em></p> <p>You will be asked to complete your reservations details in two steps.</p> <p>Firstly, when you make a cluster reservation, you can supply a set of details that describe:</p> <ul> <li>The cluster name</li> <li>The purpose of the reservation from a pre-defined set</li> <li>A description, which will appear when you set the purpose of your reservation to <code>Practice/Self-Education</code>.</li> <li> <p>Notes to help you identify this reservation</p> <p><img alt=techzone-custom-roks-rsvp-details-3 src=/snippets/images/techzone-custom-roks-rsvp-details-3.png style=max-height:800px></p> </li> </ul> <p>Complete the details as follows:</p> <ul> <li>Type a helpful <code>Name</code> such as <code>My cluster 1</code></li> <li>Select <code>Practice/Self-Education</code> from the <code>Purpose</code> drop-down list</li> <li>Type a helpful <code>Purpose Description</code> such as <code>Education</code></li> <li><strong>Do not</strong> select <code>Preferred Geography</code> yet; we will do that in a moment</li> <li> <p>Add some helpful <code>Notes</code> such as <code>Learn how to build a cloud native production reference deployment using a CloudPak and OpenShift on IBM Cloud</code></p> <p><img alt=techzone-custom-roks-rsvp-details-4 src=/snippets/images/techzone-custom-roks-rsvp-details-4.png style=max-height:900px></p> </li> </ul> </li> <li> <p>Complete reservation details <em>- step 2</em></p> <p>The second step in registration is to specify the physical details of the compute infrastructure for your cluster.</p> <p>When you make a cluster reservation, you can supply a set of details that describe:</p> <ul> <li>The cluster's geographical location</li> <li>The version of OpenShift Container Platform used by the cluster</li> <li>The number of CPUs in the cluster and their memory size</li> <li>The number of Kubernetes worker nodes in the cluster</li> <li>The NFS storage size for the cluster</li> <li> <p>The End date and time for the cluster</p> <p><img alt=techzone-custom-roks-rsvp-details-5 src=/snippets/images/techzone-custom-roks-rsvp-details-5.png style=max-height:900px></p> </li> </ul> <p>Specify the same settings as your original cluster:</p> <ul> <li>Select your <code>Preferred Geography</code> such as <code>London 5</code>, <code>HongKong 2</code> or <code>San Jose 04</code>.</li> <li>Under <code>End date and time</code>, select a date and specify the time along with its time zone.</li> <li>Select <code>Worker Node Count</code></li> <li>Select <code>Worker Node Flavor</code> from the drop-down list</li> <li>Select <code>NFS Size</code> from the drop-down list</li> <li>Select `OpenShift Version from the drop-down-list</li> </ul> <div class="admonition info"> <p class=admonition-title>Info</p> <p>By default, your cluster will be reserved for <strong>three days</strong>, after which time it will be deleted. This is more than enough time to complete this tutorial. If required, you can increase the cluster lifetime by configuring the <code>End date and time</code>. Don't do this unless you really need to do so; as you'll learn in the tutorial, the use of GitOps makes it quick and easy to provision a cluster when you need to do so.</p> </div> </li> <li> <p>Create the cluster</p> <p>Check your reservation details and press <code>Submit</code> when you're ready to create the cluster:</p> <p><img alt=techzone-custom-roks-rsvp-submit src=/snippets/images/techzone-custom-roks-rsvp-submit.png style=max-height:400px></p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The cluster provisioning process will take between <strong>30 and 60 minutes to complete</strong> on IBM Cloud.</p> </div> </li> <li> <p>Provisioning email</p> <p>As the provisioning process starts, you will receive an email to confirm that the provisioning process has started:</p> <p><img alt=techzone-custom-roks-rsvp-email1 src=/snippets/images/techzone-custom-roks-rsvp-email1.png style=max-height:700px></p> </li> <li> <p>Checking the cluster provisioning status</p> <p>You can also view the status of your provisioning request on IBM Technology Zone.</p> <p>Click on <a class=external href=https://techzone.ibm.com/my/reservations target=_blank>My reservations</a> to see:</p> <p><img alt=techzone-my-rsvp src=/snippets/images/techzone-my-rsvp.png style=max-height:600px></p> <p>Note:</p> <ul> <li>The <code>Status</code> field will be <code>Ready</code> when the cluster has been provisioned.</li> <li>The creation and expiry date-time for your cluster.</li> </ul> <p>You can return to the reservation at any time to get the details of your cluster.</p> </li> <li> <p>Cluster provisioned email</p> <p>You will receive another email once your cluster is ready:</p> <p><img alt=techzone-custom-roks-rsvp-email2 src=/snippets/images/techzone-custom-roks-rsvp-email2.png style=max-height:700px></p> <div class="admonition success"> <p class=admonition-title>Success</p> <p>Your cluster is now provisioned and ready to use.</p> </div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>Note the expiry date-time.</p> </div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Be sure to read the <strong>IMPORTANT:</strong> clause at the end of the email. If your cluster has been provisioned to an IBM Cloud account you have not used before, and you have not accepted the invitation to that account, you will not be able to see your cluster when you click on the <strong>Cluster URL</strong> link in the following step. It is recommended to always click on the <strong>HERE</strong> link in the clause to see if you need to accept an invitation.</p> </div> </li> <li> <p>Navigate to your cluster</p> <p>You can use the information in the notification email to access your cluster.</p> <p>Click on the <code>Cluster URL</code> link to login to IBM Cloud and locate your OpenShift cluster:</p> <p><img alt=techzone-custom-roks-cluster src=/snippets/images/techzone-custom-roks-cluster.png style=max-height:600px></p> <p>Note:</p> <ul> <li>The <code>Cluster ID</code> that has been assigned by IBM Cloud.</li> <li>The <code>Zone</code> matches your requested geography.</li> <li>The OCP <code>Version</code> matches your requested version of OCP.</li> <li>The <code>Node status</code> identifies the 3 worker nodes in the <code>Normal</code> state.</li> </ul> <p>Feel free to explore this web page.</p> </li> <li> <p>Receiving cluster deletion email and extending your cluster's lifetime</p> <p>When your cluster is within 3 days of deletion, you will receive a daily email:</p> <p><img alt=techzone-custom-roks-rsvp-submit src=/snippets/images/techzone-custom-roks-rsvp-email3.png style=max-height:700px></p> <p>Note:</p> <ul> <li>You can extend your cluster if required.</li> <li>This option may be limited to certain types of reservations.</li> <li>The <a class=external href=https://techzone.ibm.com/my/reservations target=_blank>My reservations</a> page allows you to manage your cluster reservation</li> </ul> </li> </ol> </details> <hr> <h2 id=install-argocd><strong>Install ArgoCD</strong><a class=headerlink href=#install-argocd title="Permanent link">&para;</a></h2> <p>Once your cluster is created we now need to install ArgoCD. </p> <details class=example> <summary>Click to see details on how to install ArgoCD</summary> <p>Open a terminal window and navigate to the local <code>multi-tenancy-gitops</code> repository of your original cluster.</p> <!--- cSpell:ignore resynched clusterrole clusterrolebinding consolenotification subfolders rolebindings rolebinding CICD qube cntk autoplay allowfullscreen itzroks ingresscontroller jsonpath --> <p>We will install ArgoCD using the <code>Red Hat OpenShift GitOps</code> operator. We will also configure it with the appropriate access rights to limit the resources it can create in the cluster. In so doing, we ensure that ArgoCD acts like a well-governed administrator of the cluster, only doing what it needs to do. Also, we will customize our ArgoCD instance by adding necessary custom checks.</p> <ol> <li> <p><em>Ensure you're logged in to the cluster</em></p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Ensure your <strong>terminal window</strong> is in the <code>multi-tenancy-gitops</code> folder.</p> </div> <p>Log into your OCP cluster, substituting the <code>--token</code> and <code>--server</code> parameters with your values:</p> <div class=highlight><pre><span></span><code>oc login --token<span class=o>=</span>&lt;token&gt; --server<span class=o>=</span>&lt;server&gt;
</code></pre></div> <p>If you are unsure of these values, click your user ID in the OpenShift web console and select <code>Copy Login Command</code>.</p> <p>On successful login, you'll see some basic information:</p> <div class="no-copy highlight"><pre><span></span><code>Logged into &quot;https://c100-e.jp-tok.containers.cloud.ibm.com:30749&quot; as &quot;IAM#hperabat@in.ibm.com&quot; using the token provided.

You have access to 63 projects, the list has been suppressed. You can list all projects with &#39;oc projects&#39;

Using project &quot;default&quot;.
</code></pre></div> <p>This shows some details about your user within this cluster. (This user is different to your GitHub user.)</p> <p><br></p> </li> <li> <p><em>Install ArgoCD into the cluster</em></p> <p>We use the Red Hat GitOps operator to install ArgoCD into the cluster. The cloned <code>multi-tenancy-gitops</code>repository contains the YAML necessary to do this. We’ll examine the YAML later; first let’s use it.</p> <p>Issue the following command to create an ArgoCD subscription in your cluster:</p> <div class=highlight><pre><span></span><code>oc apply -f setup/ocp4x/
</code></pre></div> <p>The response confirms that the below resources has been created:</p> <div class="no-copy highlight"><pre><span></span><code>clusterrole.rbac.authorization.k8s.io/custom-argocd-cluster-argocd-application-controller created
clusterrolebinding.rbac.authorization.k8s.io/openshift-gitops-argocd-application-controller created
clusterrolebinding.rbac.authorization.k8s.io/openshift-gitops-cntk-argocd-application-controller created
subscription.operators.coreos.com/openshift-gitops-operator created
</code></pre></div> <p>Most importantly, this command verifies that it has registered a subscription for ArgoCD to be installed in the cluster.</p> <p><br></p> </li> <li> <p><em>Wait for the ArgoCD installation to complete</em></p> <p>Installation of ArgoCD is an asynchronous process; that's because while the previous script created the subscription for ArgoCD almost immediately, the installation of the ArgoCD operator takes some time, and the once the operator has been installed, the default instance of ArgoCD also takes a little time to create.</p> <p>We can now issue two commands which, in turn, will wait for the ArgoCD operator to be installed and for the default instance of ArgoCD to be started.</p> <p>Issue the following commands:</p> <div class=highlight><pre><span></span><code><span class=k>while</span> ! oc <span class=nb>wait</span> crd applications.argoproj.io --timeout<span class=o>=</span>-1s --for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>Established  <span class=m>2</span>&gt;/dev/null<span class=p>;</span> <span class=k>do</span> sleep <span class=m>30</span><span class=p>;</span> <span class=k>done</span>
<span class=k>while</span> ! oc <span class=nb>wait</span> pod --timeout<span class=o>=</span>-1s --for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>Ready --all -n openshift-gitops <span class=m>2</span>&gt;/dev/null<span class=p>;</span> <span class=k>do</span> sleep <span class=m>30</span><span class=p>;</span> <span class=k>done</span>
</code></pre></div> <p>After a while, you should see the following message informing us that operator installation is complete (it may tale a few minutes):</p> <div class="no-copy highlight"><pre><span></span><code>customresourcedefinition.apiextensions.k8s.io/applications.argoproj.io condition met
</code></pre></div> <p>The ArgoCD operator is now installed and the default instance has been successfully created.</p> <p><br></p> </li> <li> <p><em>ArgoCD <code>clusterrole</code> and <code>clusterrolebinding</code></em></p> <p>ArgoCD runs under a dedicated service account. For good governance, we use a custom <strong>clusterrole</strong> and <strong>clusterrolebinding</strong> to control the specific operations this service account can perform on different resources in the cluster.</p> <p>The cluster role and the cluster role binding YAMLs are also setup along with the subscription.</p> <div class=highlight><pre><span></span><code>oc get clusterrole custom-argocd-cluster-argocd-application-controller
oc get clusterrolebinding openshift-gitops-argocd-application-controller
oc get clusterrolebinding openshift-gitops-cntk-argocd-application-controller
</code></pre></div> <p>You'll see the resources are created in the cluster:</p> <div class="no-copy highlight"><pre><span></span><code>$ oc get clusterrole custom-argocd-cluster-argocd-application-controller
NAME                                                  CREATED AT
custom-argocd-cluster-argocd-application-controller   2021-08-27T13:35:13Z

$ oc get clusterrolebinding openshift-gitops-argocd-application-controller
NAME                                             ROLE                                                              AGE
openshift-gitops-argocd-application-controller   ClusterRole/custom-argocd-cluster-argocd-application-controller   8m43s

$ oc get clusterrolebinding openshift-gitops-cntk-argocd-application-controller
NAME                                                  ROLE                                                              AGE
openshift-gitops-cntk-argocd-application-controller   ClusterRole/custom-argocd-cluster-argocd-application-controller   8m45s
</code></pre></div> <p>The clusterrole <code>custom-argocd-cluster-argocd-application-controller</code> defines a specific set of specific resources that are required by the ArgoCD service account and access rights over them.</p> <p>The cluster role bindings <code>openshift-gitops-argocd-application-controller</code> and <code>openshift-gitops-cntk-argocd-application-controller</code> binds the ArgoCD service account to the cluster role above.</p> <p>In combination, these definitions limit ArgoCD to perform the minimum set of operations required to manage the cluster. This is important; it means that ArgoCD behaves as a well governed administrator of the cluster.</p> <p>We'll also see later in the tutorial how ArgoCD creates resource in the cluster.</p> <p><br></p> </li> <li> <p><em>Delete default ArgoCD instance</em></p> <p>As we'll see in a moment, the default instance of ArgoCD, created when we install the operator, isn't sufficient for our tutorial; we have to create a new one. But before we do this, we have to delete the default instance of ArgoCD.</p> <p>Issue the following command to delete the default ArgoCD instance:</p> <div class=highlight><pre><span></span><code>oc delete gitopsservice cluster -n openshift-gitops <span class=o>||</span> <span class=nb>true</span>
</code></pre></div> <p>You will see the resources being deleted as follows:</p> <div class="no-copy highlight"><pre><span></span><code>warning: deleting cluster-scoped resources, not scoped to the provided namespace
gitopsservice.pipelines.openshift.io &quot;cluster&quot; deleted
</code></pre></div> <p>Now that we've deleted the default instance, we can create a customized ArgoCD instance with additional capabilities.</p> <p><br></p> </li> </ol> <hr> <h2 id=creating-a-custom-instance>Creating a custom instance<a class=headerlink href=#creating-a-custom-instance title="Permanent link">&para;</a></h2> <p>The default instance of ArgoCD provides some built-in health checks for validating standard Kubernetes resources. However, these checks are not sufficient to check the health of the <strong>custom resources</strong> added by the IBM Cloud Paks; we need to create a custom instance of ArgoCD that implements some IBM Cloud Pak specific health checks.</p> <ol> <li> <p><em>The custom ArgoCD instance</em></p> <p>You can explore these custom health checks in the ArgoCD YAML that we'll use to create the new ArgoCD instance:</p> <div class=highlight><pre><span></span><code>cat setup/ocp4x/argocd-instance/argocd-instance.yaml
</code></pre></div> <p>Notice, for example, a custom health check for queue managers:</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>mq.ibm.com/QueueManager</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>health.lua</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span><span class=w></span>
<span class=w>    </span><span class=no>hs = {}</span><span class=w></span>
<span class=w>    </span><span class=no>if obj.status ~= nil then</span><span class=w></span>
<span class=w>      </span><span class=no>if obj.status.phase ~= nil then</span><span class=w></span>
<span class=w>        </span><span class=no>hs.message = obj.status.phase</span><span class=w></span>
<span class=w>        </span><span class=no>if obj.status.phase == &quot;Running&quot; then</span><span class=w></span>
<span class=w>          </span><span class=no>hs.status = &quot;Healthy&quot;</span><span class=w></span>
<span class=w>        </span><span class=no>else</span><span class=w></span>
<span class=w>          </span><span class=no>hs.status = &quot;Progressing&quot;</span><span class=w></span>
<span class=w>        </span><span class=no>end</span><span class=w></span>
<span class=w>        </span><span class=no>return hs</span><span class=w></span>
<span class=w>      </span><span class=no>end</span><span class=w></span>
<span class=w>    </span><span class=no>end</span><span class=w></span>
<span class=w>    </span><span class=no>hs.status = &quot;Progressing&quot;</span><span class=w></span>
<span class=w>    </span><span class=no>hs.message = &quot;Unknown&quot;</span><span class=w></span>
<span class=w>    </span><span class=no>return hs</span><span class=w></span>
</code></pre></div> <p>This logic is used by ArgoCD to determine when a queue manager is healthy.</p> <p>You can learn more about the ArgoCD Resource Health <a href=https://argoproj.github.io/argo-cd/operator-manual/health/ >here</a> and ArgoCD custom <strong>Lua</strong> health checks <a href=https://www.lua.org/ >here</a>.</p> <p><br></p> </li> <li> <p><em>Create a custom ArgoCD instance</em></p> <p>Now let's create the custom ArgoCD instance using this YAML.</p> <p>Issue the following command to create a custom ArgoCD instance:</p> <div class=highlight><pre><span></span><code>oc apply -f setup/ocp4x/argocd-instance/ -n openshift-gitops
</code></pre></div> <p>The response confirms that the below resources has been created:</p> <div class="no-copy highlight"><pre><span></span><code>argocd.argoproj.io/openshift-gitops-cntk created
</code></pre></div> <p>Issue the below command; it will wait to complete until ArgoCD instance pod is up and running:</p> <div class=highlight><pre><span></span><code><span class=k>while</span> ! oc <span class=nb>wait</span> pod --timeout<span class=o>=</span>-1s --for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>ContainersReady -l app.kubernetes.io/name<span class=o>=</span>openshift-gitops-cntk-server -n openshift-gitops &gt; /dev/null<span class=p>;</span> <span class=k>do</span> sleep <span class=m>30</span><span class=p>;</span> <span class=k>done</span>
</code></pre></div> <p><br></p> </li> <li> <p><em>Associate a certificate with the ArgoCD instance</em></p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>If you are using the Firefox browser, you will not be able to access the ArgoCD console until a valid certificate has been associated with it. Other browsers are unaffected; you can omit this step if you wish.</p> </div> <p>Some browsers will not allow you to access the ArgoCD instance unless it has been configured with a valid certificate. The following commands will associate a valid certificate directly with the ArgoCD instance.</p> <div class=highlight><pre><span></span><code>mkdir <span class=nv>$$</span>tmp<span class=nv>$$</span>
<span class=nb>cd</span> <span class=nv>$$</span>tmp<span class=nv>$$</span>
<span class=nv>ingress_secret_name</span><span class=o>=</span><span class=k>$(</span>oc get ingresscontroller.operator default <span class=se>\</span>
--namespace openshift-ingress-operator <span class=se>\</span>
-o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.spec.defaultCertificate.name}&#39;</span><span class=k>)</span>
oc extract secret/<span class=nv>$ingress_secret_name</span> -n openshift-ingress
oc create secret tls -n openshift-gitops openshift-gitops-cntk-tls --cert<span class=o>=</span>tls.crt --key<span class=o>=</span>tls.key --dry-run<span class=o>=</span>client -o yaml <span class=p>|</span> oc apply -f -
<span class=nb>cd</span> ..
rm -rf <span class=nv>$$</span>tmp<span class=nv>$$</span>
</code></pre></div> <p><br></p> </li> <li> <p><em>Launch ArgoCD</em></p> <p>ArgoCD can be accessed via an OpenShift route. Using a browser, navigate to the URL returned by following command:</p> <div class=highlight><pre><span></span><code>oc get route openshift-gitops-cntk-server -n openshift-gitops -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{&quot;https://&quot;}{.spec.host}{&quot;\n&quot;}&#39;</span>
</code></pre></div> <p>This will list the route to the ArgoCD instance we've just created, for example:</p> <div class="no-copy highlight"><pre><span></span><code>https://openshift-gitops-cntk-server-openshift-gitops.ibmcloud-roks-xxxxx.containers.appdomain.cloud
</code></pre></div> <p>Copy the URL from your terminal output into your browser to launch the ArgoCD web console.</p> <p>(<em>You can safely ignore any browser certificate warnings.</em>)</p> <p>You should get to the ArgoCD login page:</p> <p><img alt=argocd71 src=/snippets/images-gitops-argocd-install/argo71.png style=max-height:1000px></p> <p><br></p> </li> <li> <p><em>Login to ArgoCD</em></p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>When logging into ArgoCD you can select one of two different authentication mechanisms. You can select either mechanism, but if you want to have full access to do things like synching or refreshing ArgoCD Applications, you should use the mechanism that uses administrator credentials (first option below).</p> </div> <p>You can see that the ArgoCD login page provides two different mechanism for authentication:</p> <ol> <li> <p>The first mechanisms uses the <strong>ArgoCD service account credentials</strong> created at installation time. If you use this mechanism, you will be authenticated as an administrator with all associated privileges. (You don't need administrator privileges to complete the tutorial.)</p> <p>To log in using the ArgoCD administrator credentials, use <strong>admin</strong> for the <code>username</code> and retrieve the <strong>password</strong> from the appropriate Kubernetes secret. Use the following command to retrieve the password:</p> <div class=highlight><pre><span></span><code>oc extract secret/openshift-gitops-cntk-cluster -n openshift-gitops --keys<span class=o>=</span><span class=s2>&quot;admin.password&quot;</span> --to<span class=o>=</span>-
</code></pre></div> </li> <li> <p>The second mechanism uses your OpenShift Single Sign On mechanism to authenticate you. If you use this mechanism, you will be authenticated as your user, rather than an administrator, with appropriate permissions. These permissions are sufficient to complete the tutorial, but you will not be able to perform a full range of ArgoCD operations.</p> <p>You may be prompted to grant the ArgoCD Service Account access your OpenShift user account information details.</p> <p><img alt=argocd72 src=/snippets/images-gitops-argocd-install/argo72.png style=max-height:450px></p> <p>If so, grant access to retrieve your OpenShift user information.</p> </li> </ol> <p>Once the UI launches, you'll see:</p> <p><img alt=argocd70 src=/snippets/images-gitops-argocd-install/argo70.png style=max-height:400px></p> <p>See how there are no ArgoCD applications active at the moment.</p> <p>In the next section of the tutorial, we'll configure ArgoCD to create the <strong>ArgoCD applications</strong> that will in turn spin up <strong>infrastructure</strong>, <strong>service</strong>, and <strong>application</strong> resources to apply to the cluster.</p> <p><br></p> </li> </ol> </details> <hr> <h2 id=deploy-the-infrastructure><strong>Deploy the Infrastructure</strong><a class=headerlink href=#deploy-the-infrastructure title="Permanent link">&para;</a></h2> <p>With the cluster and ArgoCD setup, we can now prepare to deploy the environment defined in our GitOps repo. We need to rollout the environment in stages due to the fact we have to configure some things like secrets before the applications are deployed. We will start by deploying the <code>Infrastructure</code>. This will create the namespaces where we will deploy the secrets. </p> <p>To only deploy the infrastructure, edit the <code>0-bootstrap/single-cluster/kustomization.yaml</code> and comment out the <code>2-services/2-services.yaml</code> and <code>3-apps/3-apps.yaml</code> lines. Push the changes to your GitOps repo.</p> <details class=example> <summary>Click to see details on how to prepare for the deployment of the infrastructure</summary> <ol> <li> <p>Open <code>0-bootstrap/single-cluster/kustomization.yaml</code> and comment out the <code>2-services/2-services.yaml</code> and <code>3-apps/3-apps.yaml</code> as follows:</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>resources</span><span class=p>:</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1-infra/1-infra.yaml</span><span class=w></span>
<span class=c1>#- 2-services/2-services.yaml</span><span class=w></span>
<span class=c1>#- 3-apps/3-apps.yaml</span><span class=w></span>
<span class=nt>patches</span><span class=p>:</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class=nt>target</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io</span><span class=w></span>
<span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Application</span><span class=w></span>
<span class=w>    </span><span class=nt>labelSelector</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gitops.tier.layer=gitops&quot;</span><span class=w></span>
</code></pre></div> </li> <li> <p>If you used machinesets in your previous cluster then you will need to update the <code>infrastructureId</code> in your <code>1-infra/argocd/machinesets.yaml</code> file for your new cluster</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=nt>destination</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">openshift-gitops</span><span class=w></span>
<span class=w>    </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span><span class=w></span>
<span class=nt>project</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">infra</span><span class=w></span>
<span class=nt>source</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">machinesets</span><span class=w></span>
<span class=w>    </span><span class=nt>helm</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>values</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span><span class=w></span>
<span class=w>        </span><span class=no>refarch-machinesets:</span><span class=w></span>
<span class=w>        </span><span class=no>infrastructureId: &quot;UPDATE-THIS-VALUE&quot;</span><span class=w></span>
<span class=w>        </span><span class=no># cloudProvider.name set to aws, azure, ibmcloud or vsphere</span><span class=w></span>
<span class=w>        </span><span class=no># cloudProvider.managed set to true for ROSA, ARO, ROKS</span><span class=w></span>
</code></pre></div> </li> <li> <p>Now commit and push changes to your git repository:</p> <div class=highlight><pre><span></span><code>git add .
git commit -s -m <span class=s2>&quot;Using only infrastructure resources&quot;</span>
git push origin <span class=nv>$GIT_BRANCH</span>
</code></pre></div> <p>which shows that the changes have been made active on GitHub:</p> <div class="no-copy highlight"><pre><span></span><code>Enumerating objects: 9, done.
Counting objects: 100% (9/9), done.
Delta compression using up to 8 threads
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 456 bytes | 456.00 KiB/s, done.
Total 5 (delta 4), reused 0 (delta 0)
remote: Resolving deltas: 100% (4/4), completed with 4 local objects.
To https://github.com/tutorial-org-123/multi-tenancy-gitops.git
e3f696d..ea3b43f  master -&gt; master
</code></pre></div> </li> </ol> </details> <h2 id=bootstrap-the-cluster><strong>Bootstrap the cluster</strong><a class=headerlink href=#bootstrap-the-cluster title="Permanent link">&para;</a></h2> <p>Now that you have prepared to deploy the infrastructure only you can bootstrap the cluster.</p> <details class=example> <summary>Click to see details on how to bootstrap the cluster</summary> <ol> <li> <p><em>Apply ArgoCD</em> <code>bootstrap.yaml</code> <em>to the cluster</em></p> <p>Let's now deploy the <code>bootstrap-single-cluster</code> ArgoCD application to bootstrap the cluster.</p> <p>Issue the following command to apply the bootstrap YAML to the cluster:</p> <div class=highlight><pre><span></span><code>oc apply -f <span class=m>0</span>-bootstrap/single-cluster/bootstrap.yaml
</code></pre></div> <p>Kubernetes will confirm that the <code>bootstrap-single-cluster</code> resource has been created:</p> <div class="no-copy highlight"><pre><span></span><code>application.argoproj.io/bootstrap-single-cluster created
</code></pre></div> <p>Notice that:</p> <ul> <li> <p><code>application.argoproj.io</code> indicates that this is an <strong>ArgoCD application</strong>.</p> </li> <li> <p>The <code>bootstrap-single-cluster</code> ArgoCD application is now watching the <code>0-bootstrap/single-cluster</code> folder in our <code>multi-tenancy-gitops</code> repository on GitHub.</p> </li> </ul> <p>This connects your customized GitOps repository to the instance of ArgoCD running in the cluster. Once connected, ArgoCD will use the contents of this repository to create matching resources in the cluster. It will also keep the cluster synchronized with any changes to the GitOps repository.</p> </li> <li> <p><em>Verify the bootstrap deployment</em></p> <p>We can use the command line to verify that the bootstrap ArgoCD application is running.</p> <p>Issue the the following command:</p> <div class=highlight><pre><span></span><code>oc get app/bootstrap-single-cluster -n openshift-gitops
</code></pre></div> <p>You should see that the bootstrap application was recently updated:</p> <div class="no-copy highlight"><pre><span></span><code>NAME                       SYNC STATUS   HEALTH STATUS
bootstrap-single-cluster   Synced        Healthy
</code></pre></div> <p><code>SYNC STATUS</code> may temporarily show <code>OutOfSync</code> or <code>HEALTH_STATUS</code> may temporarily show <code>Missing</code>; simply re-issue the command to confirm it moves to <code>Synced</code> and <code>Healthy</code>.</p> </li> <li> <p><em>Using the UI to view the newly deployed ArgoCD applications</em></p> <p>We can also use the ArgoCD web console to view the Kubernetes resources deployed to the cluster. Switch back to the web console, refresh the page and you should see the <code>bootstrap-single-cluster</code> ArgoCD application together with three other ArgoCD applications:</p> <p><img alt=argocd61 src=/snippets/images-gitops-argocd-connect/argo610.png style=max-height:400px></p> </li> </ol> </details> <h2 id=add-the-secrets><strong>Add the Secrets</strong><a class=headerlink href=#add-the-secrets title="Permanent link">&para;</a></h2> <p>Deploying the infrastructure recreates the namespaces for your cluster. Now you can deploy the secrets needed for the components you have installed into those namespaces. </p> <p>If you are using a <strong>Secrets Manager</strong> product, your secrets will already be saved there, external from your cluster, and you can restore your secrets from that product. The instructions are specific to the product and are outside the scope of this section.</p> <p>If you used <strong>sealed secrets</strong> in your cluster, use the following instructions. The instructions are different depending on whether you saved your sealed secrets certificate before losing your original cluster, or whether you did not.</p> <h3 id=in-all-cases>In All Cases<a class=headerlink href=#in-all-cases title="Permanent link">&para;</a></h3> <p>In all cases, you need to recreate the IBM Entitlement Key secret for the Cloud Pak products you are about to restore. If you have Instana components installed, you will also need to recreate their secrets.</p> <h4 id=ibm-entitlement-key>IBM Entitlement Key<a class=headerlink href=#ibm-entitlement-key title="Permanent link">&para;</a></h4> <details class=example> <summary>The IBM Entitlement Key is required to pull IBM Cloud Pak specific container images from the IBM Entitled Registry. Click for the steps to recreate the entitlement key secret</summary> <p>If you do not know the value of your IBM Entitlement Key, follow these three steps to retrieve it.</p> <ol> <li>Log in to <a class=external href=https://myibm.ibm.com/products-services/containerlibrary target=_blank>MyIBM Container Software Library</a> with an IBMid and password associated with the entitled software. </li> <li>Select the <strong>View library</strong> option to verify your entitlement(s). </li> <li>Select the <strong>Get entitlement key</strong> to retrieve the key.</li> </ol> <p>In the following command, replace <code>&lt;entitlement_key&gt;</code> with the value of your <code>IBM Entitlement Key</code>.</p> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>IBM_ENTITLEMENT_KEY</span><span class=o>=</span>&lt;entitlement_key&gt;
</code></pre></div> <p>Create a <strong>Secret</strong> containing the entitlement key in the <code>tools</code> namespace. </p> <div class=highlight><pre><span></span><code>oc new-project tools <span class=o>||</span> <span class=nb>true</span>
oc create secret docker-registry ibm-entitlement-key -n tools <span class=se>\</span>
--docker-username<span class=o>=</span>cp <span class=se>\</span>
--docker-password<span class=o>=</span><span class=s2>&quot;</span><span class=nv>$IBM_ENTITLEMENT_KEY</span><span class=s2>&quot;</span> <span class=se>\</span>
--docker-server<span class=o>=</span>cp.icr.io
</code></pre></div> <p>The response confirms that the <code>ibm-entitlement-key</code> secret has been created.</p> <div class="no-copy highlight"><pre><span></span><code>secret/ibm-entitlement-key created
</code></pre></div> </details> <h4 id=instana-components>Instana Components<a class=headerlink href=#instana-components title="Permanent link">&para;</a></h4> <p>Skip this step if you did not have any Instana components installed in your cluster.</p> <details class=example> <summary>Click to see details on how to recreate secrets for any Instana components you have installed</summary> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>Instana Agent</label><label for=__tabbed_1_2>Instana Robot Shop</label></div> <div class=tabbed-content> <div class=tabbed-block> <p>If using the Instana Agent you need to store the agent key in a secret</p> <div class=highlight><pre><span></span><code>oc create secret generic instana-agent-key -n instana-agent <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>key</span><span class=o>=</span>&lt;AGENT-KEY&gt; 
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If you have created a new instance of the Instana Server you need to update the <code>endpointHost</code> with the new IP of the server in the instana-agent.yaml</p> </div> </div> <div class=tabbed-block> <p>If you deployed the Instana Robot Shop application you need to store the API Token and the Instana URL in a secret with the following.</p> <div class=highlight><pre><span></span><code>oc create secret generic instana-backend -n tools <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>API_TOKEN</span><span class=o>=</span>&lt;API-TOKEN&gt; <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>INSTANA_URL</span><span class=o>=</span>&lt;INSTANA-URL&gt;
</code></pre></div> <p>And you need to save the Enumeration Key in a secret</p> <div class=highlight><pre><span></span><code>oc create secret generic instana-eum-key -n robot-shop <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>key</span><span class=o>=</span>&lt;EUM-KEY&gt; 
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If you have created a new instance of the Instana Server you need to update the <code>url</code> in the instana-robot-shop.yaml</p> </div> </div> </div> </div> </details> <h3 id=if-you-saved-your-sealed-secret-certificate>If You Saved Your Sealed Secret Certificate<a class=headerlink href=#if-you-saved-your-sealed-secret-certificate title="Permanent link">&para;</a></h3> <p>If you previously stored the certificate in a <code>master.key</code> file, as described at the beginning of this section, you can restore that certificate to your new cluster with the following commands.</p> <div class=highlight><pre><span></span><code>oc project sealed-secrets
oc apply -f master.key
</code></pre></div> <h3 id=if-you-did-not-save-your-sealed-secret-certificate>If You Did Not Save Your Sealed Secret Certificate<a class=headerlink href=#if-you-did-not-save-your-sealed-secret-certificate title="Permanent link">&para;</a></h3> <p>If you did not store your sealed secret operator certificate in a file from your original cluster, you will need to re-encrypt the secrets and push them to the GitOps repo. These steps will be performed <strong>after you restore the services</strong> in the next section.</p> <h2 id=deploy-the-services><strong>Deploy the Services</strong><a class=headerlink href=#deploy-the-services title="Permanent link">&para;</a></h2> <p>With the secrets deployed we can now deploy the <code>Services</code> in our GitOps repo. </p> <p>To deploy the services edit the <code>0-bootstrap/single-cluster/kustomization.yaml</code> and uncomment the <code>2-services/2-services.yaml</code> line. Push the changes to your GitOps repo.</p> <details class=example> <summary>Click to see details on how to deploy the services</summary> <ol> <li> <p>Open <code>0-bootstrap/single-cluster/kustomization.yaml</code> and uncomment the <code>2-services/2-services.yaml</code> line as follows:</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>resources</span><span class=p>:</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1-infra/1-infra.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2-services/2-services.yaml</span><span class=w></span>
<span class=c1>#- 3-apps/3-apps.yaml</span><span class=w></span>
<span class=nt>patches</span><span class=p>:</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class=nt>target</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io</span><span class=w></span>
<span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Application</span><span class=w></span>
<span class=w>    </span><span class=nt>labelSelector</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gitops.tier.layer=gitops&quot;</span><span class=w></span>
</code></pre></div> </li> <li> <p>Push the changes to the GitOps repo</p> <div class=highlight><pre><span></span><code>git add .
git commit -s -m <span class=s2>&quot;Deploying services&quot;</span>
git push origin <span class=nv>$GIT_BRANCH</span>
</code></pre></div> <p>The changes have now been pushed to your GitOps repository:</p> <div class="no-copy highlight"><pre><span></span><code>Enumerating objects: 9, done.
Counting objects: 100% (9/9), done.
Delta compression using up to 8 threads
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 431 bytes | 431.00 KiB/s, done.
Total 5 (delta 4), reused 0 (delta 0)
remote: Resolving deltas: 100% (4/4), completed with 4 local objects.
To https://github.com/prod-ref-guide/multi-tenancy-gitops.git
    533602c..85a4c46  master -&gt; master
</code></pre></div> <p>This change to the GitOps repository can now be used by ArgoCD.</p> </li> <li> <p><em>The</em> <code>bootstrap-single-cluster</code> <em>application detects the change and resyncs</em></p> <p>Once these changes to our GitOps repository are seen by ArgoCD, it will resync the cluster to the desired new state.</p> <p>Switch to the ArgoCD UI <strong>Applications</strong> view to see the start of this resync process:</p> <p><img alt=argocd80 src=/snippets/images-gitops-deploy-services/argo80.png style=max-height:500px></p> <p>Notice how the <code>bootstrap-single-cluster</code> application has detected the changes and is automatically synching the cluster.</p> <p>(<em>You can manually</em> <code>sync</code> the <code>bootstrap-single-cluster</code> <em>ArgoCD application in the UI if you don't want to wait for ArgoCD to detect the change.</em>)</p> </li> </ol> </details> <div class="admonition note"> <p class=admonition-title>Note</p> <p>If you deploy services like artifactory that generated their own passwords and use sealed secrets to access them you will have to re-encrypt the new password and store it in your GitOps repo. </p> </div> <h2 id=re-encrypt-your-sealed-secrets><strong>Re-encrypt your Sealed Secrets</strong><a class=headerlink href=#re-encrypt-your-sealed-secrets title="Permanent link">&para;</a></h2> <p>The instructions in this section only need to be done if you <strong>did not save</strong> your sealed secrets certificate from your original cluster. If you did save it, your secrets have already been deployed and you can skip to the next section on your applications.</p> <p>The steps to re-encrypt your sealed secrets are specific to which Cloud Pak component you have deployed. Please click and follow the appropriate section below.</p> <details class=example> <summary>For the Cloud Pak for Integration IBM App Connect Enterprise Tutorial you will need to re-encrypt the following</summary> <ol> <li> <p>For the <strong><em>Build Configuration</em></strong> you need the <code>ace config deployment keys</code>, <code>ace infra deployment key</code>, <code>GitHub access token</code> and <code>Machine User's access token</code> sealed secretes as described in the <a href=../../../guides/cp4i/ace/build-integration-server/build-configurations/#create-sealed-secrets>Create sealed secrets</a> section</p> </li> <li> <p>For the <strong><em>Build Integration Server</em></strong> you need the <code>create customer deployment keys</code> sealed secrete as described in the <a href=../../../guides/cp4i/ace/build-integration-server/build-integration-server/#create-sealed-secrets>Create sealed secrets</a> section</p> </li> <li> <p>For the <strong><em>Continuous Update</em></strong> you need the <code>webhook token</code> sealed secrete as described in the <a href=../../../guides/cp4i/ace/build-integration-server/continuous-update/#deploy-secret-token>Deploy Secret Token</a> section</p> </li> </ol> </details> <details class=example> <summary>For the Cloud Pak for Integration IBM MQ Tutorial you will need to re-encrypt the following</summary> <ol> <li> <p><code>IBM Entitlement Key</code> as described in the <a href=../../../guides/cp4i/mq/qmgr-pipeline/topic1/#configure-connection-to-the-ibm-entitled-registry>Configure connection to the IBM Entitled Registry</a> section.</p> </li> <li> <p><code>GitHub access credentials</code> as described in the <a href=../../../guides/cp4i/mq/qmgr-pipeline/topic1/#configure-the-pipeline-for-qm1-source-repository>Configure the pipeline for QM1 source repository</a> section, starting with <strong>Step 3</strong>.</p> </li> </ol> </details> <details class=example> <summary>For the Cloud Pak for Integration IBM API Connect Tutorial you will need to re-encrypt the following</summary> <ol> <li> <p><code>IBM Entitlement Key</code> as described in the <a href=../../../guides/cp4i/apic/deployment/ibm-cloud/#configure-access-to-ibm-entitled-registry>Configure access to IBM Entitled Registry</a> section.</p> </li> <li> <p><code>GitHub Personal Access Token</code> as described in the <a href=../../../guides/cp4i/apic/configuration/ibm-cloud/#2-github-personal-access-token>GitHub Personal Access Token</a> section.</p> </li> <li> <p><code>Provider Organization</code> as described in the <a href=../../../guides/cp4i/apic/configuration/ibm-cloud/#4-provider-organization>Provider Organization</a> section.</p> </li> </ol> </details> <h2 id=deploy-the-applications><strong>Deploy the Applications</strong><a class=headerlink href=#deploy-the-applications title="Permanent link">&para;</a></h2> <p>With the <code>Services</code> deployed and secrets re-encrypted, we can now deploy the <code>Applications</code> in our GitOps repo. </p> <p>To deploy the applications edit the <code>0-bootstrap/single-cluster/kustomization.yaml</code> and uncomment the <code>3-apps/3-apps.yaml</code> line. Push the changes to your GitOps repo.</p> <details class=example> <summary>Click to see details on how to deploy the services</summary> <ol> <li> <p>Open <code>0-bootstrap/single-cluster/kustomization.yaml</code> and uncomment the <code>3-apps/3-apps.yaml</code> line as follows:</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>resources</span><span class=p>:</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1-infra/1-infra.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2-services/2-services.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3-apps/3-apps.yaml</span><span class=w></span>
<span class=nt>patches</span><span class=p>:</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class=nt>target</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io</span><span class=w></span>
<span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Application</span><span class=w></span>
<span class=w>    </span><span class=nt>labelSelector</span><span class=p>:</span><span class=w> </span><span class=s>&quot;gitops.tier.layer=gitops&quot;</span><span class=w></span>
</code></pre></div> </li> <li> <p>Push the changes to the GitOps repo</p> <div class=highlight><pre><span></span><code>git add .
git commit -s -m <span class=s2>&quot;Deploying Apps&quot;</span>
git push origin <span class=nv>$GIT_BRANCH</span>
</code></pre></div> <p>The changes have now been pushed to your GitOps repository:</p> <div class="no-copy highlight"><pre><span></span><code>Enumerating objects: 9, done.
Counting objects: 100% (9/9), done.
Delta compression using up to 8 threads
Compressing objects: 100% (5/5), done.
Writing objects: 100% (5/5), 431 bytes | 431.00 KiB/s, done.
Total 5 (delta 4), reused 0 (delta 0)
remote: Resolving deltas: 100% (4/4), completed with 4 local objects.
To https://github.com/prod-ref-guide/multi-tenancy-gitops.git
    533602c..85a4c46  master -&gt; master
</code></pre></div> <p>This change to the GitOps repository can now be used by ArgoCD.</p> </li> <li> <p><em>The <code>bootstrap-single-cluster</code> application detects the change and resyncs</em></p> <p>Once these changes to our GitOps repository are seen by ArgoCD, it will resync the cluster to the desired new state.</p> <p>Switch to the ArgoCD UI Applications view to see the changes:</p> <p><img alt=diagram16 src=/guides/cp4i/mq/qmgr-pipeline/images/diagram16.png style=max-height:500px></p> </li> </ol> </details> <h2 id=post-deployment-tasks><strong>Post Deployment tasks</strong><a class=headerlink href=#post-deployment-tasks title="Permanent link">&para;</a></h2> <p>After the applications are deployed there are some <em>clean-up</em> tasks to perform dependant on which tutorial your environment is based on.</p> <h3 id=update-webhooks>Update Webhooks<a class=headerlink href=#update-webhooks title="Permanent link">&para;</a></h3> <p>Any Webhook you created to trigger a process in your cluster will have to be modified for the new cluster host. For example, in the MQ Tutorial you create a Webhook to start the Tekton pipeline anytime a change is pushed to the <code>MQ-Infra</code> repo. </p> <details class=example> <summary>Click to see details on how to update the webhooks</summary> <ol> <li> <p>You can find the Webhook for the repo under <code>Settings</code> -&gt; <code>Webhooks</code> </p> <p><img alt=Webhook src=../images/webhook.png style=max-height:500px></p> </li> <li> <p>Click <code>Edit</code> and change the <code>Payload URL</code> to the host of your cluster. You can find the cluster host with the command</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span> http://<span class=k>$(</span>oc get route el-cnkt-event-listener -n ci -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.spec.host}&#39;</span><span class=k>)</span>
</code></pre></div> <p>Copy and paste the host into the <code>Payload URL</code> field.</p> <p><img alt="Edit Webhook" src=../images/edit-webhook.png style=max-height:500px></p> </li> <li> <p>Scroll to the bottom of the page and click <strong>Update Webhook</strong></p> <p><img alt="Update Webhook" src=../images/update-webhook.png style=max-height:500px></p> <p>Now any changes to this repo triggers the webhook.</p> </li> </ol> </details> <div class="admonition success"> <p class=admonition-title>Congratulations!</p> <p>You've recreated the cluster from your GitOps repositories.</p> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <!-- Footer --> <footer class=md-footer> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../../training/training/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Training </div> </div> </a> <!-- Link to next page --> <a href=../../../overview/whats-new/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> What's New </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright © 2021 Cloud Pak Production Deployment Guides </div> </div> <div class=md-footer-social> <a href=https://github.ibm.com/cloudpakbringup/deployment-guides target=_blank rel=noopener title="Production Deployment Guides on Github Enterprise" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"> <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"> </path> </svg> </a> <a href=https://ibm-cloud.slack.com/archives/C02CQ6M2D2R target=_blank rel=noopener title=Slack class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"> <path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"> </path> </svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tracking", "navigation.tabs.sticky", "navigation.top", "navigation.sections"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.748e2769.min.js></script> </body> </html>