<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta name=author content="Cloud Pak Production Deployment Guides development team"><link rel=icon href=../../../../../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.2.1"><title>Build Configuration - Cloud Pak Production Deployment Guides</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.e8d9bf0c.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.e6a45f82.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CIBM+Plex+Mono&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><link rel=stylesheet href=../../../../../css/extra.css><link rel=stylesheet href=../../../../../css/toolkit-code.css><script>__md_scope=new URL("../../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q0FLL49YN3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&gtag("event","search",{search_term:this.value})}),"undefined"!=typeof location$&&location$.subscribe(function(e){gtag("config","G-Q0FLL49YN3",{page_path:e.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q0FLL49YN3"></script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="Cloud Pak Production Deployment Guides - Build Configuration"><meta property=og:description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta property=og:url content=None><meta property=og:image content=assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#building-configurations class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../.. title="Cloud Pak Production Deployment Guides" class="md-header__button md-logo" aria-label="Cloud Pak Production Deployment Guides" data-md-component=logo> <img src=../../../../../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Cloud Pak Production Deployment Guides </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Build Configuration </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../../../overview/overview/ class=md-tabs__link> Production Considerations </a> </li> <li class=md-tabs__item> <a href=../../../../../quickstart/overview/ class=md-tabs__link> Quick Start Demos </a> </li> <li class=md-tabs__item> <a href=../../../../guides-overview/ class="md-tabs__link md-tabs__link--active"> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../../../infrastructure/ad/ class=md-tabs__link> References </a> </li> <li class=md-tabs__item> <a href=../../../../../overview/whats-new/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!-- Determine class according to configuration --> <!-- Main navigation --> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <!-- Site title --> <!--
  <label class="md-nav__title" for="__drawer">
    <a
      href="../../../../.."
      title="Cloud Pak Production Deployment Guides"
      class="md-nav__button md-logo"
      aria-label="Cloud Pak Production Deployment Guides"
      data-md-component="logo"
    >
      
  <img src="../../../../../images/cloudnativetoolkit.png" alt="logo">

    </a>
    Cloud Pak Production Deployment Guides
  </label>
--> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> <!-- Render item list --> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Production Considerations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Production Considerations" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Production Considerations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../overview/overview/ class=md-nav__link> Objective </a> </li> <li class=md-nav__item> <a href=../../../../../gitops/personas/ class=md-nav__link> Personas </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> DevOps Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="DevOps Automation" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> DevOps Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../automation/why-automate/ class=md-nav__link> Why Automate? </a> </li> <li class=md-nav__item> <a href=../../../../../gitops/structure/ class=md-nav__link> GitOps Structure </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> Golden Topologies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Golden Topologies" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Golden Topologies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-azure/ class=md-nav__link> Azure Unmanaged </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-aro/ class=md-nav__link> Azure Managed (ARO) </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-aws/ class=md-nav__link> AWS Unmanaged </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-rosa/ class=md-nav__link> AWS Managed (ROSA) </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-roks/ class=md-nav__link> IBM Cloud Managed (ROKS) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5> Cloud Pak <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak" data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Cloud Pak </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_1 type=checkbox id=__nav_2_5_1> <label class=md-nav__link for=__nav_2_5_1> App Connect Enterprise <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="App Connect Enterprise" data-md-level=3> <label class=md-nav__title for=__nav_2_5_1> <span class="md-nav__icon md-icon"></span> App Connect Enterprise </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/architecture/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_2 type=checkbox id=__nav_2_5_2> <label class=md-nav__link for=__nav_2_5_2> MQ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MQ data-md-level=3> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> MQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../../../mq/security/information/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../../mq/cloud-native/promote-environments/ class=md-nav__link> Promoting across environments </a> </li> <li class=md-nav__item> <a href=../../../mq/performance/performance/ class=md-nav__link> Performance </a> </li> <li class=md-nav__item> <a href=../../../mq/high-availability/overview/ class=md-nav__link> High Availability </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3 type=checkbox id=__nav_2_5_3> <label class=md-nav__link for=__nav_2_5_3> API Connect <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="API Connect" data-md-level=3> <label class=md-nav__title for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> API Connect </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3_1 type=checkbox id=__nav_2_5_3_1> <label class=md-nav__link for=__nav_2_5_3_1> Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Architecture data-md-level=4> <label class=md-nav__title for=__nav_2_5_3_1> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/architecture/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> <li class=md-nav__item> <a href=../../../apic/architecture/multi-cloud/ class=md-nav__link> Multi-cloud </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../apic/security/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../../apic/high-availability/overview/ class=md-nav__link> High Availability </a> </li> <li class=md-nav__item> <a href=../../../apic/disaster-recovery/overview/ class=md-nav__link> Disaster Recovery </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_4 type=checkbox id=__nav_2_5_4> <label class=md-nav__link for=__nav_2_5_4> Automation Decision Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Automation Decision Services" data-md-level=3> <label class=md-nav__title for=__nav_2_5_4> <span class="md-nav__icon md-icon"></span> Automation Decision Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/ads/architecture/ads/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/architecture/ibm-cloud/ class=md-nav__link> Process Mining </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_6 type=checkbox id=__nav_2_5_6> <label class=md-nav__link for=__nav_2_5_6> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=3> <label class=md-nav__title for=__nav_2_5_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d-hadr/cpdbase/overview/architecture/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Quick Start Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Quick Start Demos" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Quick Start Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cntk/ class=md-nav__link> Cloud Native Toolkit </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-ace/ class=md-nav__link> ACE (CP4I) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-mq/ class=md-nav__link> MQ (CP4I) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4s/ class=md-nav__link> Security (CP4S) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-apic/ class=md-nav__link> APIC (CP4I) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-process-mining/ class=md-nav__link> Process Mining (CP4BA) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d/ class=md-nav__link> Cloud Pak for Data </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d-ws/ class=md-nav__link> Watson Studio (CP4D) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-agent/ class=md-nav__link> Instana Agent </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-grafana/ class=md-nav__link> Instana & Grafana </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-server/ class=md-nav__link> Instana Server </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-mq/ class=md-nav__link> Instana & MQ </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../guides-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Infrastructure <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Infrastructure data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/infra-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_2 type=checkbox id=__nav_4_2_2> <label class=md-nav__link for=__nav_4_2_2> Managed Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Managed Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> Managed Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/roks/ class=md-nav__link> IBM ROKS </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/rosa/ class=md-nav__link> Amazon ROSA </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/aro/ class=md-nav__link> Microsoft ARO </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_3 type=checkbox id=__nav_4_2_3> <label class=md-nav__link for=__nav_4_2_3> Unmanaged Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Unmanaged Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> Unmanaged Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/aws/ class=md-nav__link> Amazon AWS </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/azure/ class=md-nav__link> Microsoft Azure </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/restricted-networks/ class=md-nav__link> Restricted Networks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3 checked> <label class=md-nav__link for=__nav_4_3> Cloud Pak for Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Integration" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Cloud Pak for Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1 type=checkbox id=__nav_4_3_1 checked> <label class=md-nav__link for=__nav_4_3_1> ACE <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=ACE data-md-level=3> <label class=md-nav__title for=__nav_4_3_1> <span class="md-nav__icon md-icon"></span> ACE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_3 type=checkbox id=__nav_4_3_1_3> <label class=md-nav__link for=__nav_4_3_1_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cluster-create/ibm-setup/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_4 type=checkbox id=__nav_4_3_1_4> <label class=md-nav__link for=__nav_4_3_1_4> Configure the Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the Cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_4> <span class="md-nav__icon md-icon"></span> Configure the Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps, Tekton & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> <li class=md-nav__item> <a href=../../cluster-config/services/ class=md-nav__link> Deploying Services </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../cloud-native-example/example/ class=md-nav__link> Cloud Native Example </a> </li> <li class=md-nav__item> <a href=../../deploy-backend-service/deploy-backend-service/ class=md-nav__link> Deploy Backend Service </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_7 type=checkbox id=__nav_4_3_1_7 checked> <label class=md-nav__link for=__nav_4_3_1_7> Build Integration Server <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build Integration Server" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_7> <span class="md-nav__icon md-icon"></span> Build Integration Server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Build Configuration <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Build Configuration </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#pre-requisites class=md-nav__link> Pre-requisites </a> </li> <li class=md-nav__item> <a href=#creating-the-configuration-objects class=md-nav__link> Creating the Configuration objects </a> </li> <li class=md-nav__item> <a href=#overview-of-the-configuration-pipeline class=md-nav__link> Overview of the configuration pipeline </a> </li> <li class=md-nav__item> <a href=#create-the-git-repositories-from-template class=md-nav__link> Create the Git repositories from template </a> <nav class=md-nav aria-label="Create the Git repositories from template"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-configuration-repository class=md-nav__link> Create Configuration repository </a> </li> <li class=md-nav__item> <a href=#create-infrastructure-repository class=md-nav__link> Create Infrastructure repository </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#install-cicd-argocd-application class=md-nav__link> Install CI/CD ArgoCD Application </a> </li> <li class=md-nav__item> <a href=#deploy-tekton-tasks class=md-nav__link> Deploy Tekton tasks </a> <nav class=md-nav aria-label="Deploy Tekton tasks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#deploy-resolve-properties-task-resolve-props class=md-nav__link> Deploy resolve properties task, resolve-props </a> </li> <li class=md-nav__item> <a href=#deploy-create-configuration-task-create-config class=md-nav__link> Deploy create configuration task, create-config </a> </li> <li class=md-nav__item> <a href=#deploy-github-open-pull-request-task-github-open-pr class=md-nav__link> Deploy Github Open Pull Request task, github-open-pr </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#deploy-the-pipeline-definition class=md-nav__link> Deploy the pipeline definition </a> </li> <li class=md-nav__item> <a href=#set-up-sealedsecret-for-pipeline-access-to-git-repository class=md-nav__link> Set up SealedSecret for pipeline access to git repository </a> <nav class=md-nav aria-label="Set up SealedSecret for pipeline access to git repository"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-ssh-key-pairs class=md-nav__link> Create SSH key pairs </a> </li> <li class=md-nav__item> <a href=#upload-the-public-ssh-key class=md-nav__link> Upload the public ssh-key </a> </li> <li class=md-nav__item> <a href=#create-access-token-for-the-machine-user class=md-nav__link> Create access token for the Machine User </a> </li> <li class=md-nav__item> <a href=#give-github-access-to-gitops-repository class=md-nav__link> Give GitHub access to GitOps repository </a> </li> <li class=md-nav__item> <a href=#create-sealed-secrets class=md-nav__link> Create sealed secrets </a> </li> <li class=md-nav__item> <a href=#verify-the-addition-of-ssh-private-key-secret class=md-nav__link> Verify the addition of SSH private key Secret </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-pvc class=md-nav__link> Create PVC </a> </li> <li class=md-nav__item> <a href=#enable-apps-ace-rest-dev-1-argocd-application class=md-nav__link> Enable apps-ace-rest-dev-1 ArgoCD application </a> </li> <li class=md-nav__item> <a href=#run-the-pipeline class=md-nav__link> Run the pipeline </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../environment-promotion/promoting-environments/ class=md-nav__link> Environment Promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2 type=checkbox id=__nav_4_3_2> <label class=md-nav__link for=__nav_4_3_2> MQ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MQ data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> MQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/using/this-guide/ class=md-nav__link> The MQ tutorial </a> </li> <li class=md-nav__item> <a href=../../../mq/overview/architecture/ class=md-nav__link> Target architecture </a> </li> <li class=md-nav__item> <a href=../../../mq/cluster-create/ibm-setup/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_4 type=checkbox id=__nav_4_3_2_4> <label class=md-nav__link for=__nav_4_3_2_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../../mq/cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../../mq/cluster-config/services/ class=md-nav__link> Add services </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_5 type=checkbox id=__nav_4_3_2_5> <label class=md-nav__link for=__nav_4_3_2_5> Build Queue Manager <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build Queue Manager" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_5> <span class="md-nav__icon md-icon"></span> Build Queue Manager </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/qmgr-pipeline/topic1/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../../mq/qmgr-pipeline/topic2/ class=md-nav__link> Running the pipeline </a> </li> <li class=md-nav__item> <a href=../../../mq/qmgr-pipeline/topic3/ class=md-nav__link> Deploying and using </a> </li> <li class=md-nav__item> <a href=../../../mq/qmgr-pipeline/topic4/ class=md-nav__link> Continuous updates </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_6 type=checkbox id=__nav_4_3_2_6> <label class=md-nav__link for=__nav_4_3_2_6> Build MQ application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build MQ application" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_6> <span class="md-nav__icon md-icon"></span> Build MQ application </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/app-pipeline/topic1/ class=md-nav__link> Sample application </a> </li> <li class=md-nav__item> <a href=../../../mq/app-pipeline/topic2/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../../mq/app-pipeline/topic3/ class=md-nav__link> Managing an application change </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_7 type=checkbox id=__nav_4_3_2_7> <label class=md-nav__link for=__nav_4_3_2_7> Environment Promotion <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Environment Promotion" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_7> <span class="md-nav__icon md-icon"></span> Environment Promotion </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/cloud-native/promoting-environments-dev-stage/ class=md-nav__link> Promote from dev to staging </a> </li> <li class=md-nav__item> <a href=../../../mq/cloud-native/promoting-environments-stage-prod/ class=md-nav__link> Promote from staging to prod </a> </li> <li class=md-nav__item> <a href=../../../mq/cloud-native/automate-promotion/ class=md-nav__link> Automate promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_8 type=checkbox id=__nav_4_3_2_8> <label class=md-nav__link for=__nav_4_3_2_8> Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Security data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_8> <span class="md-nav__icon md-icon"></span> Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/security/handson/mtls/ class=md-nav__link> Secure data in motion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_9 type=checkbox id=__nav_4_3_2_9> <label class=md-nav__link for=__nav_4_3_2_9> Expose MQ App APIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Expose MQ App APIs" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_9> <span class="md-nav__icon md-icon"></span> Expose MQ App APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/apic/deploy-apic/ class=md-nav__link> Deploy API Connect </a> </li> <li class=md-nav__item> <a href=../../../mq/apic/configure-apic/ class=md-nav__link> Configure API Connect </a> </li> <li class=md-nav__item> <a href=../../../mq/apic/publish-apis/ class=md-nav__link> Publish APIs </a> </li> <li class=md-nav__item> <a href=../../../mq/apic/consume-apis/ class=md-nav__link> Consume APIs </a> </li> <li class=md-nav__item> <a href=../../../mq/apic/monitor-apis/ class=md-nav__link> Monitor APIs </a> </li> <li class=md-nav__item> <a href=../../../mq/apic/promote-apis/ class=md-nav__link> Promote APIs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_10 type=checkbox id=__nav_4_3_2_10> <label class=md-nav__link for=__nav_4_3_2_10> Architecture Decisions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Architecture Decisions" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_10> <span class="md-nav__icon md-icon"></span> Architecture Decisions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/ad/ class=md-nav__link> Decision Index </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3 type=checkbox id=__nav_4_3_3> <label class=md-nav__link for=__nav_4_3_3> APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=APIC data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/overview/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_2 type=checkbox id=__nav_4_3_3_2> <label class=md-nav__link for=__nav_4_3_3_2> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_2> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_3 type=checkbox id=__nav_4_3_3_3> <label class=md-nav__link for=__nav_4_3_3_3> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_3> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps, Tekton & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../apic/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_4 type=checkbox id=__nav_4_3_3_4> <label class=md-nav__link for=__nav_4_3_3_4> Deploy APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_4> <span class="md-nav__icon md-icon"></span> Deploy APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_5 type=checkbox id=__nav_4_3_3_5> <label class=md-nav__link for=__nav_4_3_3_5> Configure APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_5> <span class="md-nav__icon md-icon"></span> Configure APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/configuration/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_6 type=checkbox id=__nav_4_3_3_6> <label class=md-nav__link for=__nav_4_3_3_6> Publish APIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Publish APIs" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_6> <span class="md-nav__icon md-icon"></span> Publish APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/publish/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4 type=checkbox id=__nav_4_3_4> <label class=md-nav__link for=__nav_4_3_4> APIC Multi-Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="APIC Multi-Cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_3_4> <span class="md-nav__icon md-icon"></span> APIC Multi-Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/multi-cluster/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/create-clusters/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4_3 type=checkbox id=__nav_4_3_4_3> <label class=md-nav__link for=__nav_4_3_4_3> Configure the clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the clusters" data-md-level=4> <label class=md-nav__title for=__nav_4_3_4_3> <span class="md-nav__icon md-icon"></span> Configure the clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/multi-cluster/configure-clusters-gitops/ class=md-nav__link> GitOps repos & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/configure-clusters-gitops-config/ class=md-nav__link> Configure GitOps repos </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/deploy/ class=md-nav__link> Deploy APIC </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/config-pipeline/ class=md-nav__link> Configure APIC </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/publish-pipeline/ class=md-nav__link> Publish APIs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5 type=checkbox id=__nav_4_3_5> <label class=md-nav__link for=__nav_4_3_5> Event-Driven Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Event-Driven Architecture" data-md-level=3> <label class=md-nav__title for=__nav_4_3_5> <span class="md-nav__icon md-icon"></span> Event-Driven Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../eda/link/ class=md-nav__link> EDA GitOps Solution </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Cloud Pak for Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Security" data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Cloud Pak for Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/using/this-guide/ class=md-nav__link> The CP4S tutorial </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/overview/architecture/ class=md-nav__link> CP4S architecture </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-create/ibm-setup/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_4 type=checkbox id=__nav_4_4_4> <label class=md-nav__link for=__nav_4_4_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_4_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/services/ class=md-nav__link> Add services </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/backup-recovery-upgrade/ class=md-nav__link> Managing Lifecycle for CP4S </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/connect-datasources/ class=md-nav__link> Connecting DataSources for CP4S </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/overview/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_2 type=checkbox id=__nav_4_5_2> <label class=md-nav__link for=__nav_4_5_2> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_5_2> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/cluster-create/ibm-setup/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_3 type=checkbox id=__nav_4_5_3> <label class=md-nav__link for=__nav_4_5_3> Configure the Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the Cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_5_3> <span class="md-nav__icon md-icon"></span> Configure the Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/cluster-config/gitops-argocd/ class=md-nav__link> GitOps and ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../../cp4d/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../cp4d/cp4d/deployment/ class=md-nav__link> Deployment </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5 type=checkbox id=__nav_4_5_5> <label class=md-nav__link for=__nav_4_5_5> Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Services data-md-level=3> <label class=md-nav__title for=__nav_4_5_5> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5_1 type=checkbox id=__nav_4_5_5_1> <label class=md-nav__link for=__nav_4_5_5_1> Watson Studio <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Studio" data-md-level=4> <label class=md-nav__title for=__nav_4_5_5_1> <span class="md-nav__icon md-icon"></span> Watson Studio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/watson-studio/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../cp4d/watson-studio/deployment/ class=md-nav__link> Deployment </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5_2 type=checkbox id=__nav_4_5_5_2> <label class=md-nav__link for=__nav_4_5_5_2> Watson Knowledge Catalog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Knowledge Catalog" data-md-level=4> <label class=md-nav__title for=__nav_4_5_5_2> <span class="md-nav__icon md-icon"></span> Watson Knowledge Catalog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/wkc/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../cp4d/wkc/deployment/ class=md-nav__link> Deployment </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6> Cloud Pak for Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Automation" data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1 type=checkbox id=__nav_4_6_1> <label class=md-nav__link for=__nav_4_6_1> Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Process Mining" data-md-level=3> <label class=md-nav__title for=__nav_4_6_1> <span class="md-nav__icon md-icon"></span> Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/overview/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/using/this-guide/ class=md-nav__link> Using this guide </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_3 type=checkbox id=__nav_4_6_1_3> <label class=md-nav__link for=__nav_4_6_1_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_4 type=checkbox id=__nav_4_6_1_4> <label class=md-nav__link for=__nav_4_6_1_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_5 type=checkbox id=__nav_4_6_1_5> <label class=md-nav__link for=__nav_4_6_1_5> Deploy Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy Process Mining" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_5> <span class="md-nav__icon md-icon"></span> Deploy Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=References data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/ad/ class=md-nav__link> Architectural Decisions </a> </li> <li class=md-nav__item> <a href=../../../../../references/prerequisites/instructions/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../../../../references/training/training/ class=md-nav__link> Training </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=About data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../overview/whats-new/ class=md-nav__link> What's New </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_2 type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2> Contributing Content <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Contributing Content" data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Contributing Content </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../contribute/githubflow/ class=md-nav__link> GitHub Open Source Contribution </a> </li> <li class=md-nav__item> <a href=../../../../../contribute/documentation/ class=md-nav__link> Running a Local Site Instance </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#pre-requisites class=md-nav__link> Pre-requisites </a> </li> <li class=md-nav__item> <a href=#creating-the-configuration-objects class=md-nav__link> Creating the Configuration objects </a> </li> <li class=md-nav__item> <a href=#overview-of-the-configuration-pipeline class=md-nav__link> Overview of the configuration pipeline </a> </li> <li class=md-nav__item> <a href=#create-the-git-repositories-from-template class=md-nav__link> Create the Git repositories from template </a> <nav class=md-nav aria-label="Create the Git repositories from template"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-configuration-repository class=md-nav__link> Create Configuration repository </a> </li> <li class=md-nav__item> <a href=#create-infrastructure-repository class=md-nav__link> Create Infrastructure repository </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#install-cicd-argocd-application class=md-nav__link> Install CI/CD ArgoCD Application </a> </li> <li class=md-nav__item> <a href=#deploy-tekton-tasks class=md-nav__link> Deploy Tekton tasks </a> <nav class=md-nav aria-label="Deploy Tekton tasks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#deploy-resolve-properties-task-resolve-props class=md-nav__link> Deploy resolve properties task, resolve-props </a> </li> <li class=md-nav__item> <a href=#deploy-create-configuration-task-create-config class=md-nav__link> Deploy create configuration task, create-config </a> </li> <li class=md-nav__item> <a href=#deploy-github-open-pull-request-task-github-open-pr class=md-nav__link> Deploy Github Open Pull Request task, github-open-pr </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#deploy-the-pipeline-definition class=md-nav__link> Deploy the pipeline definition </a> </li> <li class=md-nav__item> <a href=#set-up-sealedsecret-for-pipeline-access-to-git-repository class=md-nav__link> Set up SealedSecret for pipeline access to git repository </a> <nav class=md-nav aria-label="Set up SealedSecret for pipeline access to git repository"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-ssh-key-pairs class=md-nav__link> Create SSH key pairs </a> </li> <li class=md-nav__item> <a href=#upload-the-public-ssh-key class=md-nav__link> Upload the public ssh-key </a> </li> <li class=md-nav__item> <a href=#create-access-token-for-the-machine-user class=md-nav__link> Create access token for the Machine User </a> </li> <li class=md-nav__item> <a href=#give-github-access-to-gitops-repository class=md-nav__link> Give GitHub access to GitOps repository </a> </li> <li class=md-nav__item> <a href=#create-sealed-secrets class=md-nav__link> Create sealed secrets </a> </li> <li class=md-nav__item> <a href=#verify-the-addition-of-ssh-private-key-secret class=md-nav__link> Verify the addition of SSH private key Secret </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-pvc class=md-nav__link> Create PVC </a> </li> <li class=md-nav__item> <a href=#enable-apps-ace-rest-dev-1-argocd-application class=md-nav__link> Enable apps-ace-rest-dev-1 ArgoCD application </a> </li> <li class=md-nav__item> <a href=#run-the-pipeline class=md-nav__link> Run the pipeline </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/edit/master/docs/guides/cp4i/ace/build-integration-server/build-configurations.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=building-configurations>Building Configurations<a class=headerlink href=#building-configurations title="Permanent link">&para;</a></h1> <!--- cSpell:ignore webui  pbcopy rolebinding backendurl policyxml soapserver realpath setdbparms truststores pipelinerun resyncs mqsc runmqsc dockerconfigjson queuemanager QMID podman ibmgaragecloud cntk cnkt eventid gitrevision gitrepositoryurl odowdaibm MQSC replicaset eventlistener triggerbinding triggertemplate mqcicd qmgr Artifactory configmaps OIDC CHLAUTH templating sealedsecret --> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>In this topic, we will build <code>Configuration</code>s required by our AppConnect Integration Server.</p> <p><img alt src=../images/build-configuration.svg></p> <figure> <p><img alt src=../images/build-configuration.svg width=1024> </p> <figcaption>Building Configuration</figcaption> </figure> <p>We will start by going over an overview of <strong>Configuration</strong> objects. We will then describe the Tekton pipeline that builds the <strong>Configuration</strong> objects from configuration sources.</p> <p>We will created the needed Git repositories, one that contains the sources of our configurations and one that contains the templates of the <strong>Configuration</strong> custom resources.</p> <p>We will then install CI/CD ArgoCD application.</p> <p>To install the pipeline, we will first install the needed Tekton tasks and then install the pipeline itself.</p> <p>Before we can execute the pipeline we will create the needed resources, which includes SSH keys to access our Git repositories and the PVC resource.</p> <p>And finally we will conclude by executing the pipeline and verifying the result.</p> <hr> <h2 id=pre-requisites>Pre-requisites<a class=headerlink href=#pre-requisites title="Permanent link">&para;</a></h2> <p>Before attempting this topic, you should have successfully completed the <a href=../../cluster-config/gitops-tekton-argocd/ >Cloud Native AppConnect Enterprise GitOps</a>.</p> <hr> <h2 id=creating-the-configuration-objects>Creating the <strong>Configuration</strong> objects<a class=headerlink href=#creating-the-configuration-objects title="Permanent link">&para;</a></h2> <p>Environment-specific settings can be decoupled from an Integration Server or a BAR file so that it can can be deployed in various environments. These settings, which includes contents of <code>server.conf.yaml</code>, <code>setdbparms</code>, policy projects, keystores, etc. are represented as <strong>Configuration</strong> custom Kubernetes resources (CR) and processed by ACE operator.</p> <p>For example, consider the following a <code>server.conf.yaml</code>, a plain text YAML file:</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>ResourceManagers</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>JVM</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>truststoreType</span><span class=p>:</span><span class=w> </span><span class=s>&#39;JKS&#39;</span><span class=w></span>
<span class=w>    </span><span class=nt>truststoreFile</span><span class=p>:</span><span class=w> </span><span class=s>&#39;/home/aceuser/truststores/ibm-ca.jks&#39;</span><span class=w></span>
<span class=w>    </span><span class=nt>truststorePass</span><span class=p>:</span><span class=w> </span><span class=s>&#39;setdbparms::truststore&#39;</span><span class=w></span>

<span class=w>    </span><span class=nt>keystoreType</span><span class=p>:</span><span class=w> </span><span class=s>&#39;JKS&#39;</span><span class=w></span>
<span class=w>    </span><span class=nt>keystoreFile</span><span class=p>:</span><span class=w> </span><span class=s>&#39;/home/aceuser/keystores/ibm-ace-server.jks&#39;</span><span class=w></span>
<span class=w>    </span><span class=nt>keystorePass</span><span class=p>:</span><span class=w> </span><span class=s>&#39;setdbparms::keystore&#39;</span><span class=w></span>

<span class=w>  </span><span class=nt>HTTPSConnector</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>ReqClientAuth</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class=w></span>
<span class=w>    </span><span class=nt>CipherSpec</span><span class=p>:</span><span class=w> </span><span class=s>&#39;TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384&#39;</span><span class=w></span>

<span class=nt>Defaults</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>Policies</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>HTTPSConnector</span><span class=p>:</span><span class=w> </span><span class=s>&#39;HTTPS&#39;</span><span class=w></span>
</code></pre></div> <p>which configures an Integration server with TLS and requires client authentication to set up Mutual Authentication. The settings and the referred keystore (and truststore) can be decoupled from the Integration Server image by creating a <strong>Configuration</strong> CR (and referred in an <strong>IntegrationServer</strong> CR).</p> <p>The <strong>Configuration</strong> CR of the above <code>server.conf.yaml</code> is created by encoding the content with base64 and creating a YAML of:</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">appconnect.ibm.com/v1beta1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Configuration</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-example-serverconf</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">serverconf</span><span class=w></span>
<span class=w>  </span><span class=nt>data</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">UmVzb3VyY2VNYW5hZ2VyczoKICBKVk06CiAgICB0cnVzdHN0b3JlVHlwZTogJ0pLUycKICAgIHRydXN0c3RvcmVGaWxlOiAnL2hvbWUvYWNldXNlci90cnVzdHN0b3Jlcy9pYm0tY2EuamtzJwogICAgdHJ1c3RzdG9yZVBhc3M6ICdzZXRkYnBhcm1zOjp0cnVzdHN0b3JlJwoKICAgIGtleXN0b3JlVHlwZTogJ0pLUycKICAgIGtleXN0b3JlRmlsZTogJy9ob21lL2FjZXVzZXIva2V5c3RvcmVzL2libS1hY2Utc2VydmVyLmprcycKICAgIGtleXN0b3JlUGFzczogJ3NldGRicGFybXM6OmtleXN0b3JlJwoKICBIVFRQU0Nvbm5lY3RvcjoKICAgIFJlcUNsaWVudEF1dGg6IHRydWUKICAgIENpcGhlclNwZWM6ICdUTFNfRUNESEVfRUNEU0FfV0lUSF9BRVNfMjU2X0dDTV9TSEEzODQnCgpEZWZhdWx0czoKICBQb2xpY2llczoKICAgIEhUVFBTQ29ubmVjdG9yOiAnSFRUUFMnCg==</span><span class=w></span>
</code></pre></div> <p>Similarly, policy project configurations can be decoupled from a BAR, and stored in a <strong>Configuration</strong> CR. </p> <p>There are also configurations that contains sensitive information, such a <code>setdbparms</code>, keystores and truststores. Contents of these sensitive configurations are instead stored in <strong>Secret</strong>s, with the help of <strong>SealedSecret</strong>s, and the secret is then referred in the <strong>Configuration</strong> CR.</p> <p>To automated the process converting integration configuration to <strong>Configuration</strong> CR, we can store the configurations to a Git repository. The templates for the <strong>Configuration</strong> CR are also stored in Git repository. We then make use of the configuration pipeline to create the <strong>Configuration</strong> CR on the GitOps repository. </p> <p>Subsequently the GitOps operator deploys the <strong>Configuration</strong> CR on to a OpenShift cluster.</p> <p>For more information about <strong>Configuration</strong>, see <a href="https://www.ibm.com/docs/en/app-connect/containers_cd?topic=resources-configuration-reference">Configuration reference</a></p> <h2 id=overview-of-the-configuration-pipeline>Overview of the configuration pipeline<a class=headerlink href=#overview-of-the-configuration-pipeline title="Permanent link">&para;</a></h2> <figure> <p><img alt=ace-config-pipeline src=../images/ace-config-pipeline.svg width=900> </p> <figcaption>Configuration pipeline</figcaption> </figure> <p>The pipeline has 6 tasks:</p> <dl> <dt><strong>clone config repo</strong></dt> <dt><strong>clone infra repo</strong></dt> <dt><strong>clone gitops repo</strong></dt> <dd> <p>Based on <a href=https://github.com/tektoncd/catalog/tree/main/task/git-clone/0.4>git-clone</a> cluster task, execution of these tasks will clone the required repositories:</p> <ul> <li> <p>Configuration Repository</p> <p>Contains the configuration sources in plain text. For instance, a <code>serverconf</code> for the Integration Server is maintained as a YAML file.</p> <p>The pipeline needs read-only access to this repository.</p> </li> <li> <p>Infrastructure Repository</p> <p>Contains templates for <a href="https://www.ibm.com/docs/en/app-connect/containers_cd?topic=resources-configuration-reference"><strong>Configuration</strong></a> custom resources. These are plain YAML files, with templated place holder.</p> <p>The pipeline needs read-only access to this repository.</p> </li> <li> <p>GitOps repository</p> <p>The multi-tenancy apps repository. This is the repository the GitOps operator watches for any desire state of the application. <strong>Configuration</strong>s for ACE application concern, and therefore the CRs are maintained in the The multi-tenancy apps repository. The pipeline will write the generated <strong>Configuration</strong>s to this GitOps repository.</p> <p>The pipeline needs write access to this repository.</p> </li> </ul> <p>The tasks will clone the repositories on shared workspace. Subsequent tasks will make use the workspace to access content of the repositories.</p> <p>The tasks will require secure access to the repositories. We will use SSH based authentication by using GitHub's deploy key.</p> </dd> <dt><strong>resolve props</strong></dt> <dd> <p>Pipeline properties list the <strong>Configuration</strong>s and their metadata that are to be deployed from the configuration repository. These properties are maintained in, <code>pipeline_properties.yaml</code> file. The <strong>resolve props</strong> custom task parses these properties from the properties file and emit them as results to be used by subsequent tasks.</p> <p>The tasks makes use of <a href=https://mikefarah.gitbook.io/yq/ ><code>yq</code></a> command line (CLI) tool. We will create a custom image, <code>sh-tools</code> which will contain the <code>yq</code> CLI tool.</p> <p>As this is a custom task, we would need to deploy them before the pipeline is deployed. </p> </dd> <dt><strong>create config</strong></dt> <dd> <p>This custom task have three steps:</p> <ol> <li> <p>Create the <strong>Configuration</strong>s YAML files</p> <p>The configuration sources from the configuration repository is converted to <strong>Configuration</strong>s YAML based on the templates maintained in the infrastructure repository. </p> <p>The steps makes use of <code>yq</code> and <code>zip</code> CLI. Custom image, <code>sh-tools</code>, will contains these tools.</p> </li> <li> <p>Update the <code>kustomization.yaml</code> file.</p> <p><strong>Configuration</strong>s that are to be deployed by GitOps operator is driven by kustomize. Once the pipeline creates the <strong>Configuration</strong>s, the <code>kustomization.yaml</code> lists the resources that are to be deployed. Therefore, the pipeline need update the <code>kustomization.yaml</code> file.</p> <p>The steps makes use of <code>yq</code> and <code>realpath</code> CLI. Custom image, <code>sh-tools</code>, will contains these tools.</p> </li> <li> <p>Push the changes to GitOps repository.</p> <p>The <strong>Configuration</strong>s resources and the updated <code>kustomization.yaml</code> file is then pushed to the GitOps repository, under a new branch. <code>bitnami/git</code> image is used for this step.</p> </li> </ol> <p>Before the pipeline can execute this custom task need to be deployed.</p> </dd> <dt><strong>Create Pull Request</strong></dt> <dd> <p>A custom task that that create a pull request to pull the changes to GitOps repository. The task is from tekton catalog, <a href=https://github.com/tektoncd/catalog/tree/main/task/github-open-pr/0.2>github-open-pr</a>, but it is not part of the ClusterTask that comes with OpenShift pipeline operator.</p> </dd> </dl> <h2 id=create-the-git-repositories-from-template>Create the Git repositories from template<a class=headerlink href=#create-the-git-repositories-from-template title="Permanent link">&para;</a></h2> <p>We will create Configuration and Infrastructure git repositories from cloud-native-toolkit-demos organization to you organization. </p> <p>The GitOps repository, which in our case is the <code>multi-tenancy-apps</code> repository should already been created from the template as part of the <a href=../../cluster-config/gitops-tekton-argocd/ >GitOps, Tekton &amp; ArgoCD</a> section.</p> <p>In the subsequent sections, we will modify our versions of the repositories.</p> <h3 id=create-configuration-repository>Create Configuration repository<a class=headerlink href=#create-configuration-repository title="Permanent link">&para;</a></h3> <ol> <li> <p><em>Create the Configuration repository in your GitHub organization</em></p> <p>Let's start by making our own copy of the Configuration repository.</p> <p>In your browser, navigate to https://github.com/cloud-native-toolkit-demos/ace-config</p> <div class="admonition todo"> <p class=admonition-title>NEED THIS REPO</p> <p>NEED THIS REPO and screenshot</p> </div> <p>Click on Use this template and select your organization, name the repository and click <code>Create repository from template</code>. After a few seconds the repository will be present in your chosen account:</p> <div class="admonition todo"> <p class=admonition-title>NEED THIS REPO</p> <p>NEED THIS REPO and screenshot</p> </div> </li> <li> <p><em>Review the repository</em></p> <p>In this section we do not need to make any changes to the Configuration repository. So instead of cloning the repository on our local workspace, we can take a look at it in the github.com on the browser with vscode. </p> <p>If you press dot (.) key while you are in your github repository, it will open vscode on the browser. See <a href="https://www.youtube.com/watch?v=ywUZOOzLX3c">The dot</a> for a demo how it works.</p> <p>On the <code>ace-config</code> repository within your organization, press the dot (<code>.</code>) key:</p> <p><figure markdown> <img alt src=../images/ace-config-dot.png width=1024> <figcaption>ACE config on github</figcaption> </figure></p> <p>As we can see, there are three important files to consider:</p> <ol> <li> <p><code>backendurl.policyxml</code>: a policy file, defining the URL of the backend service.</p> <div class="no-copy highlight"><pre><span></span><code><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class=nt>&lt;policies&gt;</span>
  <span class=nt>&lt;policy</span> <span class=na>policyType=</span><span class=s>&quot;UserDefined&quot;</span> <span class=na>policyName=</span><span class=s>&quot;backendurl&quot;</span> <span class=na>policyTemplate=</span><span class=s>&quot;UserDefined&quot;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;soapEndpoint&gt;</span>https://soapserver.tools.svc:8080/ws<span class=nt>&lt;/soapEndpoint&gt;</span>
  <span class=nt>&lt;/policy&gt;</span>
<span class=nt>&lt;/policies&gt;</span>
</code></pre></div> <p>This defines a user-defined policy to configure the backend soapserver endpoint. Instead of hard-coding the endpoint in our AppConnect message flow, we de-coupled the endpoint as configuration, so that we can point to different soapserver endpoint.</p> <p>The file is stored in a folder, <code>create-customer-policy</code>. The folder name would be the name of our policy project.</p> </li> <li> <p><code>create-customer-serverconf.yaml</code>: is the <code>serverconf</code> configuration</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>Defaults</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>policyProject</span><span class=p>:</span><span class=w> </span><span class=s>&#39;create-customer-policy&#39;</span><span class=w></span>
</code></pre></div> <p>In our message flow, we are using the policy project as the default policy project. This way, in the message flow, we do not need to fully qualify the policy.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>There is nothing wrong in fully qualifying the policy project in a message flow. In this tutorial we have chosen to make use of default policy project to demonstrate a configuration using serverconf.</p> </div> </li> <li> <p><code>pipeline_properties.yaml</code></p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>integrationServer</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>configurations</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>serverconf</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">create-customer-serverconf.yaml</span><span class=w></span>
<span class=w>        </span><span class=nt>policyproject</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">create-customer-policy</span><span class=w></span>
</code></pre></div> <p>Lists the configurations and their type. The pipeline will parse this YAML file and deploy only the listed configurations.</p> </li> </ol> </li> </ol> <h3 id=create-infrastructure-repository>Create Infrastructure repository<a class=headerlink href=#create-infrastructure-repository title="Permanent link">&para;</a></h3> <ol> <li> <p><em>Create the Infrastructure repository in your GitHub organization</em></p> <p>Let's start by making our own copy of the Configuration repository.</p> <p>In your browser, navigate to https://github.com/cloud-native-toolkit-demos/ace-infra</p> <div class="admonition todo"> <p class=admonition-title>NEED THIS REPO</p> <p>NEED THIS REPO in template form and screenshot</p> </div> <p>Click on Use this template and select your organization, name the repository and click <code>Create repository from template</code>. After a few seconds the repository will be present in your chosen account:</p> <div class="admonition todo"> <p class=admonition-title>NEED THIS REPO</p> <p>NEED THIS REPO and screenshot</p> </div> </li> <li> <p><em>Review the repository</em></p> <p>Similar to the Configuration repository, open the Infrastructure repository in the browser with vscode by pressing the dot (<code>.</code>) key:</p> <p><figure markdown> <img alt src=../images/ace-infra-dot.png width=1024> <figcaption>ACE infrastructure repository</figcaption> </figure></p> <p>For this section, we are only concerned with the <code>Configuration.yaml</code> template file:</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">appconnect.ibm.com/v1beta1</span><span class=w></span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Configuration</span><span class=w></span>
<span class=nt>metadata</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${NAME}</span><span class=w></span>
<span class=nt>spec</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${TYPE}</span><span class=w></span>
<span class=w>  </span><span class=nt>data</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">${DATA}</span><span class=w></span>
</code></pre></div> <p>The template will be used by the pipeline to render <strong>Configuration</strong>s custom resources.</p> </li> </ol> <h2 id=install-cicd-argocd-application>Install CI/CD ArgoCD Application<a class=headerlink href=#install-cicd-argocd-application title="Permanent link">&para;</a></h2> <p>In this first section, we will install the CI/CD ArgoCD application which watches over resources related to CI/CD from the gitOps-apps repository. Specifically, it watches of <a href=https://github.com/cloud-native-toolkit-demos/multi-tenancy-gitops-apps/tree/master/ace/config/argocd/ci><code>ace/config/argocd/ci</code></a> sub-folder from the "multi-tenancy-gitops-apps" repository.</p> <ol> <li> <p><em>Ensure you've set up the</em> <code>$GIT_ORG</code> <em>environment variable</em></p> <p>This chapter uses environment variables to save typing and reduce errors.</p> <p>Let's set up an environment variable, <code>$GIT_ORG</code>, that contains your GitHub organization name. We'll use this variable in many subsequent commands.</p> <p><strong>Open a new terminal window</strong>.</p> <p>Replace <code>&lt;git-org&gt;</code> in the following command with your GitHub user name:</p> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>GIT_ORG</span><span class=o>=</span>&lt;git-org&gt;
</code></pre></div> <p>You can verify your <code>$GIT_ORG</code> as follows:</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span> <span class=nv>$GIT_ORG</span>
</code></pre></div> <p>which will show your GitHub Organization, for example:</p> <div class="no-copy highlight"><pre><span></span><code>ace-prod-ref
</code></pre></div> <p>We'll use this environment variable extensively in scripts and <code>bash</code> commands, so it's important to ensure it's correct.</p> </li> <li> <p><em>Change to root level GitOps repository</em></p> <p>Issue the following command to change to your GitOps repository:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git/multi-tenancy-gitops
</code></pre></div> </li> <li> <p>Install ACE CI/CD ArgoCD Application</p> <p>Open <code>0-bootstrap/single-cluster/3-apps/kustomization.yaml</code> and uncomment <code>argocd/ace/cicd.yaml</code> resource</p> <p>If you take diff of your changes:</p> <div class=highlight><pre><span></span><code>git diff --unified<span class=o>=</span><span class=m>0</span>
</code></pre></div> <p>you should see:</p> <div class="no-copy highlight"><pre><span></span><code>diff --git a/0-bootstrap/single-cluster/3-apps/kustomization.yaml b/0-bootstrap/single-cluster/3-apps/kustomization.yaml
index c695ae5..bdbfc37 <span class=m>100644</span>
--- a/0-bootstrap/single-cluster/3-apps/kustomization.yaml
+++ b/0-bootstrap/single-cluster/3-apps/kustomization.yaml
@@ -2 +2 @@ resources:
-#- argocd/ace/cicd.yaml
+- argocd/ace/cicd.yaml
</code></pre></div> <p>commit your changes:</p> <div class=highlight><pre><span></span><code>git commit -am <span class=s2>&quot;Install ACE CI/CD&quot;</span>
</code></pre></div> <p>and push your changes to the origin:</p> <div class=highlight><pre><span></span><code>git push
</code></pre></div> <div class="no-copy highlight"><pre><span></span><code>Enumerating objects: <span class=m>11</span>, <span class=k>done</span>.
Counting objects: <span class=m>100</span>% <span class=o>(</span><span class=m>11</span>/11<span class=o>)</span>, <span class=k>done</span>.
Delta compression using up to <span class=m>16</span> threads
Compressing objects: <span class=m>100</span>% <span class=o>(</span><span class=m>6</span>/6<span class=o>)</span>, <span class=k>done</span>.
Writing objects: <span class=m>100</span>% <span class=o>(</span><span class=m>6</span>/6<span class=o>)</span>, <span class=m>490</span> bytes <span class=p>|</span> <span class=m>490</span>.00 KiB/s, <span class=k>done</span>.
Total <span class=m>6</span> <span class=o>(</span>delta <span class=m>5</span><span class=o>)</span>, reused <span class=m>0</span> <span class=o>(</span>delta <span class=m>0</span><span class=o>)</span>
remote: Resolving deltas: <span class=m>100</span>% <span class=o>(</span><span class=m>5</span>/5<span class=o>)</span>, completed with <span class=m>5</span> <span class=nb>local</span> objects.
To github.com:ace-prod-ref/multi-tenancy-gitops.git
   ae9c78c..9eabc94  master -&gt; master
</code></pre></div> </li> <li> <p><em>On the ArgoCD UI, verify the reconciliation</em></p> <p>Soon after ArgoCD will reconcile the new changes. You should see the commit message that made the change, as well as the <code>apps-ace-ci</code> application:</p> <p><img alt src=../images/argo-cicd-app.png> </p> <p>Open the <code>apps-ace-ci</code> application (either by going to <strong>Applications &gt; apps-ace-ci</strong> or by clicking on the external ink icon from the <code>apps-ace-ci</code> application icon):</p> <p><img alt src=../images/argo-open-apps-ace-ci.png></p> <p>You should see the <code>apps-ace-ci</code>, which in turn install three ArgoCD applications:</p> <p><img alt src=../images/argo-apps-ace-ci.png> </p> </li> </ol> <h2 id=deploy-tekton-tasks>Deploy Tekton tasks<a class=headerlink href=#deploy-tekton-tasks title="Permanent link">&para;</a></h2> <p>There are three custom tasks to deploy:</p> <ol> <li>Resolve properties, <code>resolve-props</code></li> <li>Create configurations, <code>create-config</code></li> </ol> <h3 id=deploy-resolve-properties-task-resolve-props>Deploy resolve properties task, <code>resolve-props</code><a class=headerlink href=#deploy-resolve-properties-task-resolve-props title="Permanent link">&para;</a></h3> <ol> <li> <p><em>Change to CI environment directory</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git/multi-tenancy-gitops-apps/ace/environments/ci
</code></pre></div> </li> <li> <p><em>Update kustomization to enable resolve-props tasks</em></p> <p>Open <code>kustomization.yaml</code> (<code>$HOME/git/multi-tenancy-gitops-apps/ace/environments/ci/kustomization.yaml</code>) and uncomment:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tasks/resolve-props.yaml</span><span class=w></span>
</code></pre></div> <p>If you take a diff now with</p> <div class=highlight><pre><span></span><code>git diff --unified<span class=o>=</span><span class=m>0</span>
</code></pre></div> <p>the result should be see:</p> <div class="no-copy highlight"><pre><span></span><code><span class=gh>diff --git a/ace/environments/ci/kustomization.yaml b/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gh>index bfdfc20..cd96b8d 100644</span><span class=w></span>
<span class=gd>--- a/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gi>+++ b/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gu>@@ -27 +27 @@ resources:</span><span class=w></span>
<span class=gd>-# - tasks/resolve-props.yaml</span><span class=w></span>
<span class=gi>+- tasks/resolve-props.yaml</span><span class=w></span>
</code></pre></div> </li> <li> <p><em>Commit the and push the change</em></p> <div class=highlight><pre><span></span><code>git commit -am <span class=s2>&quot;Deploy resolve-props task&quot;</span> <span class=o>&amp;&amp;</span> git push
</code></pre></div> </li> <li> <p><em>Check the deployment of the task in ArgoCD UI</em></p> <p>Under "apps-ace-rest-ci-1" project, you should see that the task has been deployed:</p> <p><figure markdown> <img alt src=../images/argocd-resolve-props.png width=1024> <figcaption><code>resolve-props</code> synched by ArgoCD</figcaption> </figure></p> </li> <li> <p><em>Check the deployment of the task in OpenShift UI</em></p> <p>You can also verify the deploy on OpenShift UI. From <strong>Pipelines &gt; Tasks</strong>, make sure Project <code>ci</code> is selected from the drop down menu:</p> <p><figure markdown> <img alt src=../images/openshift-resolve-props.png width=1024> <figcaption><code>resolve-props</code> task in OpenShift UI</figcaption> </figure></p> </li> </ol> <h3 id=deploy-create-configuration-task-create-config>Deploy create configuration task, <code>create-config</code><a class=headerlink href=#deploy-create-configuration-task-create-config title="Permanent link">&para;</a></h3> <p>The <code>create-config</code> custom task makes use of <a href=https://mikefarah.gitbook.io/yq/ ><code>yq</code></a> and <code>zip</code> utility. This requires custom image to be created. Therefore, before we can deploy the task, we will create the image.</p> <p>We will make use of OpenShift Build to create the custom image first, and then deploy the <code>create-config</code> custom task.</p> <ol> <li> <p><em>Change to CI environment directory</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git/multi-tenancy-gitops-apps/ace/environments/ci
</code></pre></div> </li> <li> <p><em>Update kustomization enable build of image stream, <code>yq-zip</code></em>*</p> <p>Open <code>kustomization.yaml</code> (<code>$HOME/git/multi-tenancy-gitops-apps/ace/environments/ci/kustomization.yaml</code>) and uncomment:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">imagestreams/sh-tools.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">buildconfig/sh-tools.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">roles/custom-images-builder-role.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">roles/custom-images-builder-rolebinding.yaml</span><span class=w></span>
</code></pre></div> <p>We are enabling OpenShift build config and image stream resource to build the <code>yq-zip</code> image. We also need to enable a role and rolebinding so that ArgoCD service account can manipulate build configs and image stream.</p> <p>If you take a diff now with</p> <div class=highlight><pre><span></span><code>git diff --unified<span class=o>=</span><span class=m>0</span>
</code></pre></div> <p>the result should be:</p> <div class="no-copy highlight"><pre><span></span><code><span class=gh>diff --git a/ace/environments/ci/kustomization.yaml b/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gh>index cd96b8d..6fe7d6c 100644</span><span class=w></span>
<span class=gd>--- a/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gi>+++ b/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gu>@@ -2 +2 @@ resources:</span><span class=w></span>
<span class=gd>-# - buildconfig/sh-tools.yaml</span><span class=w></span>
<span class=gi>+- buildconfig/sh-tools.yaml</span><span class=w></span>
<span class=gu>@@ -5 +5 @@ resources:</span><span class=w></span>
<span class=gd>-# - imagestreams/sh-tools.yaml</span><span class=w></span>
<span class=gi>+- imagestreams/sh-tools.yaml</span><span class=w></span>
<span class=gu>@@ -13,2 +13,2 @@ resources:</span><span class=w></span>
<span class=gd>-# - roles/custom-images-builder-role.yaml</span><span class=w></span>
<span class=gd>-# - roles/custom-images-builder-rolebinding.yaml</span><span class=w></span>
<span class=gi>+- roles/custom-images-builder-role.yaml</span><span class=w></span>
<span class=gi>+- roles/custom-images-builder-rolebinding.yaml</span><span class=w></span>
</code></pre></div> </li> <li> <p><em>Commit the change</em></p> <div class=highlight><pre><span></span><code>git commit -am <span class=s2>&quot;Deploy build for sh-tools&quot;</span>
</code></pre></div> </li> <li> <p><em>Update kustomization to enable custom task, <code>create-config</code></em>*</p> <p>Open <code>kustomization.yaml</code> (<code>$HOME/git/multi-tenancy-gitops-apps/ace/environments/ci/kustomization.yaml</code>) and uncomment:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tasks/create-config.yaml</span><span class=w></span>
</code></pre></div> <p>If you take a diff now with</p> <div class=highlight><pre><span></span><code>git diff --unified<span class=o>=</span><span class=m>0</span>
</code></pre></div> <p>the result should be see:</p> <div class="no-copy highlight"><pre><span></span><code><span class=gh>diff --git a/ace/environments/ci/kustomization.yaml b/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gh>index 6fe7d6c..ca4d257 100644</span><span class=w></span>
<span class=gd>--- a/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gi>+++ b/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gu>@@ -26 +26 @@ resources:</span><span class=w></span>
<span class=gd>-# - tasks/create-config.yaml</span><span class=w></span>
<span class=gi>+- tasks/create-config.yaml</span><span class=w></span>
</code></pre></div> </li> <li> <p><em>Commit the change</em></p> <div class=highlight><pre><span></span><code>git commit -am <span class=s2>&quot;Deploy create-config task&quot;</span>
</code></pre></div> </li> <li> <p><em>Push both changes</em></p> <div class=highlight><pre><span></span><code>git push
</code></pre></div> </li> </ol> <p>You can verify that ArgoCD deployed the resource using the ArgoCD UI:</p> <figure> <p><img alt src=../images/argo-sh-tools.png width=1024> </p> <figcaption>`sh-tools` and `create-config` on ArgoCD UI</figcaption> </figure> <details class=note> <summary>If you do not see change right away</summary> <p>try <strong>Refresh</strong>ing</p> <p><img alt src=../images/refresh.png> </p> </details> <p>Once the build finished the image stream will be created. You can verify it in the OpenShift Web Console UI. Navigate to <strong>Builds &gt; ImageStreams</strong>, making sure project <strong>ci</strong> selected in the Project dropdown:</p> <figure> <p><img alt src=../images/os-webui-image.png width=1024> </p> <figcaption>Image Stream in OpenShift Web UI</figcaption> </figure> <p>Or from command line:</p> <div class=highlight><pre><span></span><code>oc get is -n ci
</code></pre></div> <div class="no-copy highlight"><pre><span></span><code>NAME       IMAGE REPOSITORY                                               TAGS     UPDATED
sh-tools   image-registry.openshift-image-registry.svc:5000/ci/sh-tools   latest   <span class=m>4</span> minutes ago
</code></pre></div> <p>As for the <code>create-config</code> task, you can verify the deployment from the OpenShift UI via <strong>Pipelines &gt; Tasks</strong>, make sure Project <code>ci</code> is selected from the drop down menu:</p> <figure> <p><img alt src=../images/ocp-ui-create-config.png width=1024> </p> <figcaption>`create-config` task in OpenShift Web UI</figcaption> </figure> <h3 id=deploy-github-open-pull-request-task-github-open-pr>Deploy Github Open Pull Request task, <code>github-open-pr</code><a class=headerlink href=#deploy-github-open-pull-request-task-github-open-pr title="Permanent link">&para;</a></h3> <ol> <li> <p><em>Change to CI environment directory</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git/multi-tenancy-gitops-apps/ace/environments/ci
</code></pre></div> </li> <li> <p><em>Update kustomization enable Github Open Pull Request, <code>github-open-pr</code></em>*</p> <p>Open <code>kustomization.yaml</code> (<code>$HOME/git/multi-tenancy-gitops-apps/ace/environments/ci/kustomization.yaml</code>) and uncomment:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tasks/github-open-pr.yaml</span><span class=w></span>
</code></pre></div> <p>If you take a diff now with</p> <div class=highlight><pre><span></span><code>git diff --unified<span class=o>=</span><span class=m>0</span>
</code></pre></div> <p>the result should be see:</p> <p><div class="no-copy highlight"><pre><span></span><code>diff --git a/ace/environments/ci/kustomization.yaml b/ace/environments/ci/kustomization.yaml
index ca4d257..00f254a <span class=m>100644</span>
--- a/ace/environments/ci/kustomization.yaml
+++ b/ace/environments/ci/kustomization.yaml
@@ -29 +29 @@ resources:
-# - tasks/github-open-pr.yaml
+- tasks/github-open-pr.yaml
</code></pre></div> 1. <em>Commit the change</em></p> <div class=highlight><pre><span></span><code>git commit -am <span class=s2>&quot;Deploy github-open-pr task&quot;</span>
</code></pre></div> </li> <li> <p><em>Push both changes</em></p> <div class=highlight><pre><span></span><code>git push
</code></pre></div> </li> </ol> <p>You can verify that ArgoCD deployed the resource using the ArgoCD UI:</p> <figure> <p><img alt src=../images/github-open-pr.png width=1024> </p> <figcaption>`github-open-pr` task on ArgoCD UI</figcaption> </figure> <p>You can verify the tasks are deployed using OpenShift Web UI. </p> <figure> <p><img alt src=../images/ocp-ui-github-open-pr.png width=1024> </p> <figcaption>`github-open-pr` task on OpenShift UI</figcaption> </figure> <p>You can also do it with <code>oc</code> CLI:</p> <div class=highlight><pre><span></span><code>oc get tasks -n ci
</code></pre></div> <p>and expect the following output</p> <div class="no-copy highlight"><pre><span></span><code>NAME             AGE
create-config    20m
github-open-pr   3m20s
resolve-props    34m
</code></pre></div> <h2 id=deploy-the-pipeline-definition>Deploy the pipeline definition<a class=headerlink href=#deploy-the-pipeline-definition title="Permanent link">&para;</a></h2> <p>We are now ready to deploy the configuration pipeline.</p> <ol> <li> <p><em>Change to CI environment directory</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git/multi-tenancy-gitops-apps/ace/environments/ci
</code></pre></div> </li> <li> <p><em>Update kustomization to enable resolve-props tasks</em></p> <p>Open <code>kustomization.yaml</code> (<code>$HOME/git/multi-tenancy-gitops-apps/ace/environments/ci/kustomization.yaml</code>) and uncomment:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pipelines/ace-config.yaml</span><span class=w></span>
</code></pre></div> <p>If you take a diff now with</p> <div class=highlight><pre><span></span><code>git diff --unified<span class=o>=</span><span class=m>0</span>
</code></pre></div> <p>the result should be see:</p> <div class="no-copy highlight"><pre><span></span><code><span class=gh>diff --git a/ace/environments/ci/kustomization.yaml b/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gh>index 00f254a..4946bfe 100644</span><span class=w></span>
<span class=gd>--- a/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gi>+++ b/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gu>@@ -9 +9 @@ resources:</span><span class=w></span>
<span class=gd>-# - pipelines/ace-config-pipeline.yaml</span><span class=w></span>
<span class=gi>+- pipelines/ace-config-pipeline.yaml</span><span class=w></span>
</code></pre></div> </li> <li> <p><em>Commit the and push the change</em></p> <div class=highlight><pre><span></span><code>git commit -am <span class=s2>&quot;Deploy ace-config pipeline&quot;</span> <span class=o>&amp;&amp;</span> git push
</code></pre></div> </li> <li> <p><em>Check the deployment of the pipeline in ArgoCD UI</em></p> <p>Under "apps-ace-rest-ci-1" project, you should see that the task has been deployed:</p> <p><figure markdown> <img alt src=../images/argo-ace-config-pipeline.png width=1024> <figcaption><code>ace-config</code> pipeline synched by ArgoCD</figcaption> </figure></p> </li> <li> <p><em>Check the deployment of the pipeline in OpenShift UI</em></p> <p>You can also verify the deploy on OpenShift UI. From <strong>Pipelines &gt; Pipelines</strong>, make sure Project <code>ci</code> is selected from the drop down menu:</p> <p><figure markdown> <img alt src=../images/ocp-ui-ace-config-pipeline.png width=1024> <figcaption><code>resolve-props</code> task in OpenShift UI</figcaption> </figure></p> </li> </ol> <h2 id=set-up-sealedsecret-for-pipeline-access-to-git-repository>Set up <code>SealedSecret</code> for pipeline access to git repository<a class=headerlink href=#set-up-sealedsecret-for-pipeline-access-to-git-repository title="Permanent link">&para;</a></h2> <p>Our configuration pipeline would need to access Git repositories for source of the configuration files and the templates for the <strong>Configuration</strong>s objects. In this tutorial we will assume that our configuration repository is a private repository. As noted in this blog, <a href=https://cloud.redhat.com/blog/private-git-repositories-part-2a-repository-ssh-keys>Private Git Repositories</a>, the preferred mechanism for accessing a private Git repository is to create a unique repository SSH key. In this section we will set up this mechanism.</p> <h3 id=create-ssh-key-pairs>Create SSH key pairs<a class=headerlink href=#create-ssh-key-pairs title="Permanent link">&para;</a></h3> <p>We will create two pairs for SSH keys, one for the configuration repository, and one for the infrastructure repository.</p> <ol> <li> <p><em>Change to a directory outside the git repositories</em></p> <p>We will generate a pair of SSH keys (public and private) but we do not want to store these in a git repositories. In this tutorial, we will assume to create and store the SSH keys in <code>$HOME/keys</code> directory.</p> <p>Create the directory:</p> <div class=highlight><pre><span></span><code>mkdir -p <span class=nv>$HOME</span>/keys
</code></pre></div> <p>Change working directory to <code>$HOME/keys</code></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/keys
</code></pre></div> </li> <li> <p><em>Create ssh key pairs</em></p> <p>Using <code>ssh-keygen</code>, we can create ssh key pair for the configuration repository:</p> <div class=highlight><pre><span></span><code>ssh-keygen -C <span class=s2>&quot;gitops-pipeline/ace-config@github.com/ace-prod-ref&quot;</span> -f ace-config-at-ace-prod-ref-github -N <span class=s1>&#39;&#39;</span>
</code></pre></div> <p>filenames for the keys will start with <code>ace-config-at-ace-prod-ref-github</code> and we are not setting a passphrase. </p> <p>Similarly, for the infrastructure repository:</p> <div class=highlight><pre><span></span><code>ssh-keygen -C <span class=s2>&quot;gitops-pipeline/ace-infra@github.com/ace-prod-ref&quot;</span> -f ace-infra-at-ace-prod-ref-github -N <span class=s1>&#39;&#39;</span>
</code></pre></div> <p>and for the <code>multi-tenancy-gitops-apps</code></p> <div class=highlight><pre><span></span><code>ssh-keygen -C <span class=s2>&quot;gitops-pipeline/multi-tenancy-gitops-apps@github.com/ace-prod-ref&quot;</span> -f multi-tenancy-gitops-apps-at-ace-prod-ref-github -N <span class=s1>&#39;&#39;</span>
</code></pre></div> <p>If you list the files that are created in the current directory, you should see:</p> <div class=highlight><pre><span></span><code>tree .
</code></pre></div> <div class="no-copy highlight"><pre><span></span><code>.
├── ace-config-at-ace-prod-ref-github
├── ace-config-at-ace-prod-ref-github.pub
├── ace-infra-at-ace-prod-ref-github
├── ace-infra-at-ace-prod-ref-github.pub
├── multi-tenancy-gitops-apps-at-ace-prod-ref-github
└── multi-tenancy-gitops-apps-at-ace-prod-ref-github.pub

<span class=m>0</span> directories, <span class=m>4</span> files
</code></pre></div> </li> </ol> <h3 id=upload-the-public-ssh-key>Upload the public ssh-key<a class=headerlink href=#upload-the-public-ssh-key title="Permanent link">&para;</a></h3> <ol> <li> <p><em>Upload the public ssh-key to the Configuration Git repository</em></p> <p>The public keys of our pairs need to be uploaded to our Git repositories, as Deploy keys.</p> <p>Visit your repository, go to Settings, and then to choose <strong>Deploy keys</strong> on the left hand side menu. For example, for <code>ace-config</code> repository:</p> <p><figure markdown> <img alt src=../images/deploy_keys.png width=1024> <figcaption>Deploy Key Settings</figcaption> </figure></p> <p>Click on <strong>Add deploy key</strong> button, give a title (say "gitops-pipeline") and copy the content of public key (for example, <code>ace-config-at-ace-prod-ref-github.pub</code> for ace-config repository).</p> <details class=tip> <summary>Use <code>pbcopy</code> in MacOS</summary> <p>If you are using MacOS, you can use <code>pbcopy</code> CLI to copy the public key on your clipboard:</p> <div class=highlight><pre><span></span><code>cat ~/keys/ace-config-at-ace-prod-ref-github.pub <span class=p>|</span> pbcopy
</code></pre></div> </details> <p><figure markdown> <img alt src=../images/add-deploy-key-ace-config.png width=1024> <figcaption>Deploy Key for ACE Configuration Repository</figcaption> </figure></p> <p>Click on <strong>Add key</strong> button to the add the deploy key.</p> </li> <li> <p><em>Upload the public ssh-key to the Infrastructure Git repository</em></p> <p>Similarly, for <code>ace-infra</code> repository, use content of <code>ace-infra-at-ace-prod-ref-github.pub</code> for the ace-infra repository.</p> <p><figure markdown> <img alt src=../images/ace-deploy-key-ace-infra.png width=1024> <figcaption>Deploy Key for ACE Infrastructure Repository</figcaption> </figure></p> </li> <li> <p><em>Upload the public ssh-key to the GitOps Git repository</em></p> <p>And finally, for <code>multi-tenancy-gitops-apps</code> repository, use content of <code>multi-tenancy-gitops-apps-at-ace-prod-ref-github.pub</code> for the ace-infra repository. Make sure to check "Allow write access". The pipeline will write to this repository</p> <p><figure markdown> <img alt src=../images/ace-deploy-key-mt-apps.png width=1024> <figcaption>Deploy Key for GitOps Repository</figcaption> </figure></p> </li> </ol> <h3 id=create-access-token-for-the-machine-user>Create access token for the Machine User<a class=headerlink href=#create-access-token-for-the-machine-user title="Permanent link">&para;</a></h3> <p>This can be done by logging into github.com as the machine user, going to <strong>Settings &gt; Developer Settings &gt; Personal access tokens</strong> and clicking <strong>Generate new token</strong>:</p> <figure> <p><img alt src=../images/cicd-acme-generate-token.png width=1024> </p> <figcaption>Generate new Token</figcaption> </figure> <p>On the "New personal access token" page, name your token and give <strong>repo</strong> access:</p> <figure> <p><img alt src=../images/cicd-new-token.png width=1024> </p> <figcaption>New personal access token</figcaption> </figure> <p>Store the access token in a safe place for now.</p> <h3 id=give-github-access-to-gitops-repository>Give GitHub access to GitOps repository<a class=headerlink href=#give-github-access-to-gitops-repository title="Permanent link">&para;</a></h3> <p>The pipeline will not only make use of git operations, but it will also make use of GitHub APIs. Once the <strong>Configuration</strong>s objects are created and pushed to GitOps repository on a specific branch, the pipeline will make a pull request to merge the changes to the main (master) branch. </p> <p>This requires pipeline to make use of GitHub APIs. We would need a GitHub user for this. It is recommend to make use of a "Machine User" for this purpose. The Machine User will have limited access to your repositories.</p> <p>In the following we will assume our "Machine User" is <code>cicd.acme</code>.</p> <ol> <li> <p><em>Browse to the GitOps repository, <code>multi-tenancy-gitops-apps</code>, Settings page</em></p> <p><figure markdown> <img alt src=../images/mt-apps-settings.png width=1024> <figcaption>Settings of <code>multi-tenancy-gitops-apps</code> repository</figcaption> </figure></p> </li> <li> <p><em>Add Machine User</em></p> <p>Click on <strong>Add People</strong> button</p> <p>Use your Machine User. For instance, we will choose <code>cicd-acme</code> as our Machine User:</p> <p><figure markdown> <img alt src=../images/add-cicd-acme.png width=1024> <figcaption>Add <code>cicd-acme</code> to GitOps Repository</figcaption> </figure></p> <p>Make sure that the Machine User has write permission. Our pipeline will use this user to create pull request to the repository.</p> </li> </ol> <h3 id=create-sealed-secrets>Create sealed secrets<a class=headerlink href=#create-sealed-secrets title="Permanent link">&para;</a></h3> <p>The private part of the SSH key need to be used by our pipeline to authenticate itself when cloning the repository. The key can be accessed via a kubernetes secret object. The secret object can be created by GitOps operator, but instead of storing the SSH key in a <code>Secret</code> manifest yaml, we will store it as <code>SealedSecret</code>. </p> <p>A <code>Secret</code> manifest encodes it's data, but does not encrypts it. Therefore it is not a good idea to store a plain <code>Secret</code> manifest yaml in a git repository. Instead, we will use <code>SealedSecret</code> manifest, which encrypts a <code>Secret</code> manifest and generates a encrypted version of its data content. We can store this encrypted <code>SealedSecret</code> manifest in a Git repository. Once GitOps operator reconciles this object on to the cluster, <code>SealedSecret</code> operator will decrypt it and store it as a secret in the namespace. Only <code>SealedSecret</code> operator decrypt the <code>SealedSecret</code> manifest.</p> <ol> <li> <p><em>Create sealed secret for the private SSH key</em></p> <p>Sealed Secret operator from bitnami has already been deployed as part of work in section, <a href=../../cluster-config/services/#deploy-services-to-the-cluster>Deploy services to the cluster</a>. We will now create a sealed secret for the private SSH key.</p> <p>For this, we need to have <code>kubeseal</code> installed on our local environment. If you don't have have it installed, on MacOs, you can use homebrew:</p> <div class=highlight><pre><span></span><code>brew install kubeseal
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Note</p> <p>For more details (and installation for Linux), see <a href=https://github.com/bitnami-labs/sealed-secrets/releases>kubeseal releases</a></p> </div> </li> <li> <p><em>Change to GitOps apps repository</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git/multi-tenancy-gitops-apps
</code></pre></div> <p>This repository maintains application manifests. The private key of our SSH key-pair is an application specific artifact, and therefore it is to be maintained in the application repository.</p> <p>Change to the directory where sealed secrets are stored</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> ace/environments/ci/secrets
</code></pre></div> </li> <li> <p><em>Run the <code>gitops-repo-pk-secret.sh</code> script to generate <code>SealedSecret</code>s for SSH deploy keys</em></p> <p><code>gitops-repo-pk-secret.sh</code> script make use of three environment variables</p> <ul> <li> <p><code>GITOPS_PK_SECRET_NAME</code>: Name of the secret. The name is also used in creating the <code>SealedSecret</code> manifest yaml file</p> </li> <li> <p><code>GIT_BASEURL</code>: Base URL of the git repository. This is needed for the tekton specific annotation on the <code>Secret</code> object. It is also needed to generate the host keys.</p> </li> <li> <p><code>SSH_PRIVATE_KEY_PATH</code>: full path to the private key.</p> </li> </ul> <p>Assuming our private key is kept in <code>$HOME/keys</code> directory, then to generate the <code>SealedSecret</code> manifest, we can execute the script as follows for private key of <code>ace-config</code> deploy key:</p> <div class=highlight><pre><span></span><code><span class=nv>GITOPS_PK_SECRET_NAME</span><span class=o>=</span>ace-config-at-github <span class=se>\</span>
    <span class=nv>GIT_BASEURL</span><span class=o>=</span>github.com <span class=se>\</span>
    <span class=nv>SSH_PRIVATE_KEY_PATH</span><span class=o>=</span><span class=nv>$HOME</span>/keys/ace-config-at-ace-prod-ref-github <span class=se>\</span>
    gitops-repo-pk-secret.sh
</code></pre></div> <p>A new file, named <code>git-ssh-pk-ace-config-at-github.yaml</code> will be created on the <code>ace/environments/ci/secrets</code> directory.</p> <p>Similarly, for private key of <code>ace-infra</code> deploy key:</p> <div class=highlight><pre><span></span><code><span class=nv>GITOPS_PK_SECRET_NAME</span><span class=o>=</span>ace-infra-at-github <span class=se>\</span>
    <span class=nv>GIT_BASEURL</span><span class=o>=</span>github.com <span class=se>\</span>
    <span class=nv>SSH_PRIVATE_KEY_PATH</span><span class=o>=</span><span class=nv>$HOME</span>/keys/ace-infra-at-ace-prod-ref-github <span class=se>\</span>
    gitops-repo-pk-secret.sh
</code></pre></div> <p>And, for private key of <code>ace-infra</code> deploy key:</p> <div class=highlight><pre><span></span><code><span class=nv>GITOPS_PK_SECRET_NAME</span><span class=o>=</span>multi-tenancy-gitops-apps-at-github <span class=se>\</span>
    <span class=nv>GIT_BASEURL</span><span class=o>=</span>github.com <span class=se>\</span>
    <span class=nv>SSH_PRIVATE_KEY_PATH</span><span class=o>=</span><span class=nv>$HOME</span>/keys/multi-tenancy-gitops-apps-at-ace-prod-ref-github <span class=se>\</span>
    gitops-repo-pk-secret.sh
</code></pre></div> </li> <li> <p><em>Run the <code>gitops-repo-pk-secret.sh</code> script to generate <code>SealedSecret</code>s for GitHub access token</em></p> <p><code>gitops-repo-pk-secret.sh</code> script make use of two environment variables</p> <ul> <li> <p><code>TOKEN_SECRET_NAME</code>: Name of the secret. The name is also used in creating the <code>SealedSecret</code> manifest yaml file</p> </li> <li> <p><code>TOKEN</code>: The Personal Access Token that will be used to authenticate a user to GitHub.</p> </li> </ul> <p>To generated the <strong>SealedSecret</strong> for our Machine User's access token, run:</p> <div class=highlight><pre><span></span><code><span class=nv>TOKEN_SECRET_NAME</span><span class=o>=</span>cicd-acme <span class=se>\</span>
    <span class=nv>TOKEN</span><span class=o>=</span>&lt;PUT_ACCESS_TOKEN_HERE&gt; <span class=se>\</span>
    ./gitops-repo-token-secret.sh
</code></pre></div> <p>replacing <code>&lt;PUT_ACCESS_TOKEN_HERE&gt;</code> with the token you have created for the Machine User earlier.</p> </li> <li> <p><em>Check git status</em> if you check git status with</p> <p><div class=highlight><pre><span></span><code>git status
</code></pre></div> you should be able to confirm that:</p> <div class="no-copy highlight"><pre><span></span><code>On branch master
Your branch is up to date with <span class=s1>&#39;origin/master&#39;</span>.

Untracked files:
<span class=o>(</span>use <span class=s2>&quot;git add &lt;file&gt;...&quot;</span> to include <span class=k>in</span> what will be committed<span class=o>)</span>
    github-user-token-secret-cicd-acme.yaml
    gitops-repo-pk-secret-ace-config-at-github.yaml
    gitops-repo-pk-secret-ace-infra-at-github.yaml
    gitops-repo-pk-secret-multi-tenancy-gitops-apps-at-github.yaml

nothing added to commit but untracked files present <span class=o>(</span>use <span class=s2>&quot;git add&quot;</span> to track<span class=o>)</span>
</code></pre></div> </li> <li> <p><em>Commit the <code>SealedSecret</code> manifest to application repository</em></p> <div class=highlight><pre><span></span><code>git add gitops-repo-pk-secret-ace-config-at-github.yaml
git commit -m <span class=s1>&#39;Add SealedSecret for ace-config private key&#39;</span>
</code></pre></div> <div class=highlight><pre><span></span><code>git add gitops-repo-pk-secret-ace-infra-at-github.yaml
git commit -m <span class=s1>&#39;Add SealedSecret for ace-infra private key&#39;</span>
</code></pre></div> <div class=highlight><pre><span></span><code>git add  gitops-repo-pk-secret-multi-tenancy-gitops-apps-at-github.yaml
git commit -m <span class=s1>&#39;Add SealedSecret for multi-tenancy-gitops-apps private key&#39;</span>
</code></pre></div> <div class=highlight><pre><span></span><code>git add github-user-token-secret-cicd-acme.yaml
git commit -m <span class=s1>&#39;Add SealedSecret for access token for cicd.acme&#39;</span>
</code></pre></div> <p>and push the changes</p> <div class=highlight><pre><span></span><code>git push
</code></pre></div> </li> <li> <p>Enable <code>SealedSecret</code> on <code>apps-ace-rest-ci-1</code> ArgoCD application</p> <p>CI/CD related manifests are configure by <code>apps-ace-rest-ci-1</code> ArgoCD application, which is configured by <code>ace/environments/ci/kustomization.yaml</code>. To add the <code>SealedSecret</code> on the cluster, add the following item under <code>resources</code> field:</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets/github-user-token-secret-cicd-acme.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets/gitops-repo-pk-secret-ace-config-at-github.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets/gitops-repo-pk-secret-ace-infra-at-github.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets/gitops-repo-pk-secret-multi-tenancy-gitops-apps-at-github.yaml</span><span class=w></span>
</code></pre></div> <p>if you take a difference of changes on the repository:</p> <div class=highlight><pre><span></span><code>git diff --unified<span class=o>=</span><span class=m>0</span>
</code></pre></div> <p>you should see the following:</p> <div class="no-copy highlight"><pre><span></span><code>diff --git a/ace/environments/ci/kustomization.yaml b/ace/environments/ci/kustomization.yaml
index 5f7b008..db70c64 <span class=m>100644</span>
--- a/ace/environments/ci/kustomization.yaml
+++ b/ace/environments/ci/kustomization.yaml
@@ -24,0 +25,4 @@ resources:
+- secrets/github-user-token-secret-cicd-acme.yaml
+- secrets/gitops-repo-pk-secret-ace-config-at-github.yaml
+- secrets/gitops-repo-pk-secret-ace-infra-at-github.yaml
+- secrets/gitops-repo-pk-secret-multi-tenancy-gitops-apps-at-github.yaml
</code></pre></div> <p>Commit the change</p> <div class=highlight><pre><span></span><code>git commit -am <span class=s1>&#39;Enable sealed secrets for repositories access&#39;</span>
</code></pre></div> </li> <li> <p>Push the changes</p> <div class=highlight><pre><span></span><code>git push
</code></pre></div> </li> </ol> <h3 id=verify-the-addition-of-ssh-private-key-secret>Verify the addition of SSH private key <code>Secret</code><a class=headerlink href=#verify-the-addition-of-ssh-private-key-secret title="Permanent link">&para;</a></h3> <p>Open up <code>apps-ace-rest-ci-1</code> on ArgoCD UI:</p> <figure> <p><img alt src=../images/secrets-in-argocd.png width=1024> </p> <figcaption>Sealed Secret and Secret</figcaption> </figure> <p>As you can see, we have the four <strong>SealedSecret</strong>s deployed. The SealedSecret operator then decrypted them and created kubernetes <strong>Secret</strong> objects (which are owned by the corresponding <strong>SealedSecret</strong>s objects).</p> <p>You can also verify that the secret is created from the OCP UI. Go to <strong>Workloads &gt; Secrets</strong>, make sure <code>ci</code> project is selected. Select Label to filter the secrets and put in <code>created-by=pipeline</code> is the Search box:</p> <figure> <p><img alt src=../images/secrets-in-ocp-ui.png width=1024> </p> <figcaption>Secrets in OpenShift Web UI</figcaption> </figure> <h2 id=create-pvc>Create PVC<a class=headerlink href=#create-pvc title="Permanent link">&para;</a></h2> <ol> <li> <p><em>Change to CI environment directory</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git/multi-tenancy-gitops-apps/ace/environments/ci
</code></pre></div> </li> <li> <p><em>Update kustomization to enable ace-config pvc</em></p> <p>Open <code>kustomization.yaml</code> (<code>$HOME/git/multi-tenancy-gitops-apps/ace/environments/ci/kustomization.yaml</code>) and uncomment:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pvc/ace-config-pvc.yaml</span><span class=w></span>
</code></pre></div> <p>If you take a diff now with</p> <div class=highlight><pre><span></span><code>git diff --unified<span class=o>=</span><span class=m>0</span>
</code></pre></div> <p>the result should be see:</p> <div class="no-copy highlight"><pre><span></span><code><span class=gh>diff --git a/ace/environments/ci/kustomization.yaml b/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gh>index db70c64..410fc80 100644</span><span class=w></span>
<span class=gd>--- a/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gi>+++ b/ace/environments/ci/kustomization.yaml</span><span class=w></span>
<span class=gu>@@ -10 +10 @@ resources:</span><span class=w></span>
<span class=gd>-# - pvc/ace-config-pvc.yaml</span><span class=w></span>
<span class=gi>+- pvc/ace-config-pvc.yaml</span><span class=w></span>
</code></pre></div> </li> <li> <p><em>Commit the and push the change</em></p> <div class=highlight><pre><span></span><code>git commit -am <span class=s2>&quot;Deploy ace-config pvc&quot;</span> <span class=o>&amp;&amp;</span> git push
</code></pre></div> </li> <li> <p><em>Check the deployment of the task in ArgoCD UI</em></p> <p>Under "apps-ace-rest-ci-1" project, you should see that the task has been deployed:</p> <p><figure markdown> <img alt src=../images/argo-ui-ace-config-pvc.png width=1024> <figcaption><code>ace-config</code> PVC synched by ArgoCD</figcaption> </figure></p> </li> <li> <p><em>Check the deployment of the task in OpenShift UI</em></p> <p>You can also verify the deploy on OpenShift UI. From <strong>Storage &gt; PersistentVolumeClaims</strong>, make sure Project <code>ci</code> is selected from the drop down menu:</p> <p><figure markdown> <img alt src=../images/ocp-ui-ace-config-pvc.png width=1024> <figcaption><code>ace-config</code> PVC in OpenShift UI</figcaption> </figure></p> <p>wait until the PVC bound.</p> </li> </ol> <h2 id=enable-apps-ace-rest-dev-1-argocd-application>Enable <code>apps-ace-rest-dev-1</code> ArgoCD application<a class=headerlink href=#enable-apps-ace-rest-dev-1-argocd-application title="Permanent link">&para;</a></h2> <p>We need to activate <code>apps-ace-rest-dev-1</code> ArgoCD application so that ArgoCD watches for changes for the development folder (<code>ace/environments/overlays/dev</code>) of the <code>multi-tenancy-gitops-apps</code> repository. Our pipeline will store custom resources and activate them in the <code>ace/environments/base</code> folder which referred in the <code>ace/environments/overlays/dev/kustomization.yaml</code>.</p> <ol> <li> <p><em>Change to root level GitOps repository</em></p> <p>Issue the following command to change to your GitOps repository:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git/multi-tenancy-gitops
</code></pre></div> </li> <li> <p>Install ACE Dev ArgoCD Application</p> <p>Open <code>0-bootstrap/single-cluster/3-apps/kustomization.yaml</code> and uncomment </p> <p><div class="no-copy highlight"><pre><span></span><code>- argocd/ace/dev.yaml
</code></pre></div> If you take diff of your changes:</p> <div class=highlight><pre><span></span><code>git diff --unified<span class=o>=</span><span class=m>0</span>
</code></pre></div> <p>you should see:</p> <div class="no-copy highlight"><pre><span></span><code><span class=gh>diff --git a/0-bootstrap/single-cluster/3-apps/kustomization.yaml b/0-bootstrap/single-cluster/3-apps/kustomization.yaml</span><span class=w></span>
<span class=gh>index bdbfc37..5279be1 100644</span><span class=w></span>
<span class=gd>--- a/0-bootstrap/single-cluster/3-apps/kustomization.yaml</span><span class=w></span>
<span class=gi>+++ b/0-bootstrap/single-cluster/3-apps/kustomization.yaml</span><span class=w></span>
<span class=gu>@@ -3 +3 @@ resources:</span><span class=w></span>
<span class=gd>-#- argocd/ace/dev.yaml</span><span class=w></span>
<span class=gi>+- argocd/ace/dev.yaml</span><span class=w></span>
</code></pre></div> <p>commit your changes:</p> <div class=highlight><pre><span></span><code>git commit -am <span class=s2>&quot;Install ACE Dev&quot;</span>
</code></pre></div> <p>and push your changes to the origin:</p> <div class=highlight><pre><span></span><code>git push
</code></pre></div> </li> <li> <p><em>On the ArgoCD UI, verify the reconciliation</em></p> <p>Soon after ArgoCD will reconcile the new changes. You should see the commit message that made the change, as well as the <code>applications</code> application:</p> <p><figure markdown> <img alt src=../images/argo-ui-dev-app.png width=1024> <figcaption>Update in <code>applications</code> application</figcaption> </figure></p> <p>Open the <code>apps-ace-dev</code> application (either by going to <strong>Applications &gt; apps-ace-ci</strong> or by clicking on the external ink icon from the <code>apps-ace-dev</code> application icon):</p> <p><figure markdown> <img alt src=../images/argo-ui-dev-ace-dev-icon.png width=1024> <figcaption>Icon to open <code>apps-ace-dev</code> application</figcaption> </figure></p> <p>You should see the <code>apps-ace-ci</code>, which in turn installs the <code>apps-ace-rest-dev-1</code> application:</p> <p><figure markdown> <img alt src=../images/argocd-ui-apps-ace-dev.png width=1024> <figcaption><code>apps-ace-dev</code> application</figcaption> </figure></p> <p>and when you open <code>apps-ace-rest-dev-1</code> application, it will have an empty deployment for now:</p> <p><figure markdown> <img alt src=../images/argocd-ui-apps-ace-rest-dev-1.png width=1024> <figcaption><code>argocd-ui-apps-ace-rest-dev-1.png</code> application</figcaption> </figure></p> </li> </ol> <h2 id=run-the-pipeline>Run the pipeline<a class=headerlink href=#run-the-pipeline title="Permanent link">&para;</a></h2> <p>Now that all the tasks, pipeline, and required resources are deployed, we can run the pipeline. We do this by creating a <strong>PipelineRun</strong> resource which refers to a <strong>Pipeline</strong> resource. A <strong>PipelineRun</strong> resource is a running instance of a <strong>Pipeline</strong>.</p> <p>A <strong>PipelineRun</strong> instantiates a <strong>Pipeline</strong> by setting its parameters and workspaces. Some of the parameters have default values (mostly based on values used in this tutorial), but they can be overridden when creating the <strong>PipelineRun</strong> instance.</p> <p>The easiest way to instantiates a <strong>Pipeline</strong> is to use the OpenShift Web UI. In this tutorial we will do that next. Alternatively you can manually create a <a href=https://github.com/tektoncd/pipeline/blob/main/docs/pipelineruns.md><strong>PipelineRun</strong></a> resource YAML and apply it on the cluster (using <code>oc apply -f</code>), or you can make use of <a href=https://github.com/tektoncd/cli><code>tkn</code></a> CLI.</p> <p>To start the pipeline, on OpenShift Web Console, navigate to <strong>Pipelines &gt; Pipelines</strong> and then click on <strong>ace-config</strong> pipeline. This will open the pipeline details page. Choose <strong>Start</strong> from the <strong>Actions</strong> dropdown:</p> <figure> <p><img alt src=../images/ocp-ui-pipeline-start.png width=1024> </p> <figcaption>Start a Pipeline</figcaption> </figure> <figure> <p><img alt src=../images/ocp-ui-pipeline-start-dialog.png width=1024> </p> <figcaption>Pipeline Start</figcaption> </figure> <p>The pipeline has the following parameters:</p> <table> <thead> <tr> <th>Parameter</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>is-config-repo-url</code></td> <td>URL of the Configuration repository. In this tutorial we are making use of SSH based URL. By default it is set to <code>git@github.com:ace-prod-ref/ace-config.git</code> to match this tutorial. Update this to your Configuration repository</td> </tr> <tr> <td><code>is-infra-repo-url</code></td> <td>URL of the Infrastructure repository. In this tutorial we are making use of SSH based URL. By default it is set to <code>git@github.com:ace-prod-ref/ace-infra.git</code> to match this tutorial. Update this to your Infrastructure repository</td> </tr> <tr> <td><code>git-ops-repo-url</code></td> <td>URL of the GitOps repository. In this tutorial we are making use of SSH based URL. By default it is set to <code>git@github.com:ace-prod-ref/multi-tenancy-gitops-apps.git</code> to match this tutorial. Update this to your GitOps repository</td> </tr> <tr> <td><code>git-ops-destination-directory</code></td> <td>Relative path to the configuration folder within the GitOps repository. This is the folder where <strong>Configuration</strong> CRs are stored. Default value is set according <code>multi-tenancy-gitops-apps</code> repository. You leave it default if you did not change the folder structure</td> </tr> <tr> <td><code>git-ops-kustomization-path</code></td> <td>Relative path to the <code>kustomization.yaml</code> file within the GitOps repository. This is the file that list the resources to be deployed. Default value is set according <code>multi-tenancy-gitops-apps</code> repository. You leave it default if you did not change the folder structure</td> </tr> <tr> <td><code>github-pr-title</code></td> <td>Title of the pull request. Default is set to a string with the name of the pipeline run. Feel free to update it.</td> </tr> <tr> <td><code>github-pr-body</code></td> <td>Body of the pull request. Default is set to a string with the name of the pipeline run. Feel free to update it.</td> </tr> <tr> <td><code>github-pr-token-secret-name</code></td> <td>Name of the secret that contains the access token of the machine user the pipeline will use to make the pull request. Default is <code>cicd-acme</code> as that's how we set up the secret earlier.</td> </tr> </tbody> </table> <p>The pipeline has the following workspaces:</p> <table> <thead> <tr> <th>Workspace</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>shared-workspace</code></td> <td>The PVC where the <code>git-clone</code> task will clone the repositories and other task make use of them. Set to <code>ace-config</code> PVC in this tutorial</td> </tr> <tr> <td><code>ace-config-repo-secret</code></td> <td>The secret that contains the SSH private key to authenticate with Configuration repository.</td> </tr> <tr> <td><code>ace-infra-repo-secret</code></td> <td>The secret that contains the SSH private key to authenticate with Infrastructure repository.</td> </tr> <tr> <td><code>gitops-repo-secret</code></td> <td>The secret that contains the SSH private key to authenticate with GitOps repository.</td> </tr> </tbody> </table> <p>Set the parameters to the appropriate values. If you are following this tutorial, you would need update the <code>is-config-repo-url</code>, <code>is-infra-repo-url</code> and <code>git-ops-repo-url</code> value.</p> <p>As for workspaces, </p> <ul> <li> <p>For <code>shared-workspace</code> choose <strong>PersistentVolumeClaim</strong> from the dropdown and then select <code>ace-config</code> from the dropdown.</p> </li> <li> <p>For <code>ace-config-repo-secret</code> choose <strong>Secret</strong> from the dropdown and then select <code>ace-config-at-github</code> from the dropdown.</p> </li> <li> <p>For <code>ace-infra-repo-secret</code> choose <strong>Secret</strong> from the dropdown and then select <code>ace-infra-at-github</code> from the dropdown.</p> </li> <li> <p>For <code>gitops-repo-secret</code> choose <strong>Secret</strong> from the dropdown and then select <code>gitops-repo-at-github</code> from the dropdown.</p> </li> </ul> <figure> <p><img alt src=../images/ocp-ui-workspace-1.png width=1024> </p> <figcaption>Workspace value for `shared-workspace`, `ace-config-repo-secret`, `ace-infra-repo-secret`</figcaption> </figure> <figure> <p><img alt src=../images/ocp-ui-workspace-2.png width=1024> </p> <figcaption>Workspace value for `gitops-repo-secret`</figcaption> </figure> <p>Click <strong>Start</strong> to start the pipeline.</p> <p>If everything goes well, the pipeline will successfully run:</p> <figure> <p><img alt src=../images/ocp-ui-success-pr.png width=1024> </p> <figcaption>Successful run of `ace-config` pipeline run</figcaption> </figure> <p>If you now go to your <code>multi-tenancy-gitops-apps</code> repository, you will see a pull request created:</p> <figure> <p><img alt src=../images/github-ui-pr.png width=1024> </p> <figcaption>Pull request in `multi-tenancy-gitops-apps` repository</figcaption> </figure> <p>If you click on the pull request and check the commit, you should see the <strong>Configuration</strong>s object that being pushed and update to the <code>kustomization.yaml</code> file.</p> <figure> <p><img alt src=../images/github-ui-commit.png width=1024> </p> <figcaption>Commit in the pull request</figcaption> </figure> <p>If you merge the pull request, ArgoCD will update the change to and deploy the Configuration.</p> <figure> <p><img alt src=../images/argo-ui-configurations.png width=1024> </p> <figcaption>Configurations deployed by ArgoCD</figcaption> </figure> <p>And you can also verify the <strong>Configuration</strong>s object in OpenShift Web UI. On the OpenShift Web Console, navigate to <strong>Home &gt; Search</strong>, select <strong>Configuration</strong> on the <strong>Resources</strong> dropdown, and make sure project <strong>dev</strong> selected in the <strong>Project</strong> dropdown:</p> <figure> <p><img alt src=../images/ocp-ui-configurations.png width=1024> </p> <figcaption>Configurations object in OpenShift UI</figcaption> </figure> <p>This concludes the building of <strong>Configuration</strong>s. In the next section we will build <strong>IntegrationServer</strong>.</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <!-- Footer --> <footer class=md-footer> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../overview/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Overview </div> </div> </a> <!-- Link to next page --> <a href=../../environment-promotion/promoting-environments/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Environment Promotion </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright © 2021 Cloud Pak Production Deployment Guides </div> </div> <div class=md-footer-social> <a href=https://github.ibm.com/cloudpakbringup/deployment-guides target=_blank rel=noopener title="Production Deployment Guides on Github Enterprise" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"> <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"> </path> </svg> </a> <a href=https://ibm-cloud.slack.com/archives/C02CQ6M2D2R target=_blank rel=noopener title=Slack class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"> <path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"> </path> </svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tracking", "navigation.tabs.sticky", "navigation.top", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script> <script src=../../../../../assets/javascripts/bundle.8aa65030.min.js></script> </body> </html>