<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta name=author content="Cloud Pak Production Deployment Guides development team"><link rel=icon href=../../../../../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.2.11"><title>Build Integration Server - Cloud Pak Production Deployment Guides</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.8c5ef100.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.9647289d.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><link rel=stylesheet href=../../../../../css/extra.css><link rel=stylesheet href=../../../../../css/toolkit-code.css><script>__md_scope=new URL("../../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q0FLL49YN3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&gtag("event","search",{search_term:this.value})}),"undefined"!=typeof location$&&location$.subscribe(function(e){gtag("config","G-Q0FLL49YN3",{page_path:e.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q0FLL49YN3"></script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="Cloud Pak Production Deployment Guides - Build Integration Server"><meta property=og:description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta property=og:url content=None><meta property=og:image content=assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#building-integration-server class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../.. title="Cloud Pak Production Deployment Guides" class="md-header__button md-logo" aria-label="Cloud Pak Production Deployment Guides" data-md-component=logo> <img src=../../../../../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Cloud Pak Production Deployment Guides </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Build Integration Server </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../../../overview/overview/ class=md-tabs__link> Production Considerations </a> </li> <li class=md-tabs__item> <a href=../../../../../quickstart/overview/ class=md-tabs__link> Quick Start Demos </a> </li> <li class=md-tabs__item> <a href=../../../../guides-overview/ class="md-tabs__link md-tabs__link--active"> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../../../infrastructure/ad/ class=md-tabs__link> References </a> </li> <li class=md-tabs__item> <a href=../../../../../overview/whats-new/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!-- Determine class according to configuration --> <!-- Main navigation --> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <!-- Site title --> <!--
  <label class="md-nav__title" for="__drawer">
    <a
      href="../../../../.."
      title="Cloud Pak Production Deployment Guides"
      class="md-nav__button md-logo"
      aria-label="Cloud Pak Production Deployment Guides"
      data-md-component="logo"
    >
      
  <img src="../../../../../images/cloudnativetoolkit.png" alt="logo">

    </a>
    Cloud Pak Production Deployment Guides
  </label>
--> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> <!-- Render item list --> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Production Considerations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Production Considerations" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Production Considerations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../overview/overview/ class=md-nav__link> Objective </a> </li> <li class=md-nav__item> <a href=../../../../../gitops/personas/ class=md-nav__link> Personas </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> DevOps Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="DevOps Automation" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> DevOps Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../automation/why-automate/ class=md-nav__link> Why Automate? </a> </li> <li class=md-nav__item> <a href=../../../../../gitops/structure/ class=md-nav__link> GitOps Structure </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> Golden Topologies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Golden Topologies" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Golden Topologies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-azure/ class=md-nav__link> Azure Unmanaged </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-aro/ class=md-nav__link> Azure Managed (ARO) </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-aws/ class=md-nav__link> AWS Unmanaged </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-rosa/ class=md-nav__link> AWS Managed (ROSA) </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-roks/ class=md-nav__link> IBM Cloud Managed (ROKS) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5> Cloud Pak for Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Integration" data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Cloud Pak for Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_1 type=checkbox id=__nav_2_5_1> <label class=md-nav__link for=__nav_2_5_1> IBM App Connect Enterprise <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM App Connect Enterprise" data-md-level=3> <label class=md-nav__title for=__nav_2_5_1> <span class="md-nav__icon md-icon"></span> IBM App Connect Enterprise </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/architecture/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_2 type=checkbox id=__nav_2_5_2> <label class=md-nav__link for=__nav_2_5_2> IBM Message Queue <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Message Queue" data-md-level=3> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> IBM Message Queue </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../../../mq/security/information/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../../mq/cloud-native/promote-environments/ class=md-nav__link> Promoting across environments </a> </li> <li class=md-nav__item> <a href=../../../mq/performance/performance/ class=md-nav__link> Performance </a> </li> <li class=md-nav__item> <a href=../../../mq/high-availability/overview/ class=md-nav__link> High Availability </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3 type=checkbox id=__nav_2_5_3> <label class=md-nav__link for=__nav_2_5_3> IBM API Connect <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM API Connect" data-md-level=3> <label class=md-nav__title for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> IBM API Connect </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3_1 type=checkbox id=__nav_2_5_3_1> <label class=md-nav__link for=__nav_2_5_3_1> Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Architecture data-md-level=4> <label class=md-nav__title for=__nav_2_5_3_1> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/architecture/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> <li class=md-nav__item> <a href=../../../apic/architecture/multi-cloud/ class=md-nav__link> Multi-cloud </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../apic/security/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../../apic/high-availability/overview/ class=md-nav__link> High Availability </a> </li> <li class=md-nav__item> <a href=../../../apic/disaster-recovery/overview/ class=md-nav__link> Disaster Recovery </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6 type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6> Cloud Pak for Business Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Business Automation" data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Business Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_1 type=checkbox id=__nav_2_6_1> <label class=md-nav__link for=__nav_2_6_1> IBM Automation Decision Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Automation Decision Services" data-md-level=3> <label class=md-nav__title for=__nav_2_6_1> <span class="md-nav__icon md-icon"></span> IBM Automation Decision Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/ads/architecture/ads/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_2 type=checkbox id=__nav_2_6_2> <label class=md-nav__link for=__nav_2_6_2> IBM Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Process Mining" data-md-level=3> <label class=md-nav__title for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> IBM Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/architecture/ibm-cloud/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_7 type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=2> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d-hadr/cpdbase/overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../../../../cp4d-hadr/cpdbase/overview/cpd-overview/ class=md-nav__link> Overview </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Quick Start Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Quick Start Demos" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Quick Start Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cntk/ class=md-nav__link> Cloud Native Toolkit </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> Cloud Pak for Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Integration" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Cloud Pak for Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-ace/ class=md-nav__link> IBM App Connect Enterprise </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-mq/ class=md-nav__link> IBM Message Queue </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-apic/ class=md-nav__link> IBM API Connect </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-es/ class=md-nav__link> IBM Event Streams </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-datapower/ class=md-nav__link> IBM DataPower Gateway </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Cloud Pak for Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Security" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Cloud Pak for Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4s/ class=md-nav__link> Cloud Pak for Security </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> Cloud Pak for Business Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Business Automation" data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Cloud Pak for Business Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-process-mining/ class=md-nav__link> IBM Process Mining </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d/ class=md-nav__link> Cloud Pak for Data </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d-ws/ class=md-nav__link> IBM Watson Studio </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d-wkc/ class=md-nav__link> IBM Watson Knowledge Catalog </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d-ds/ class=md-nav__link> IBM DataStage </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d-aespark/ class=md-nav__link> IBM Analytics Engine Powered by Apache Spark </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d-wos/ class=md-nav__link> IBM Watson OpenScale </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d-wml/ class=md-nav__link> IBM Watson Machine Learning </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d-healthcare-demo/ class=md-nav__link> Healthcare Demo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7> Observability <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Observability data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Observability </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-agent/ class=md-nav__link> Instana Agent </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-grafana/ class=md-nav__link> Instana & Grafana </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-server/ class=md-nav__link> Instana Server </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-mq/ class=md-nav__link> Instana & MQ </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8> Sterling B2Bi <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Sterling B2Bi" data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Sterling B2Bi </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-sterling-b2bi/ class=md-nav__link> Sterling File Gateway </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-sterling-pem-std/ class=md-nav__link> Sterling PEM STD </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-sterling-ccm/ class=md-nav__link> Sterling Control Center Monitor </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../guides-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Infrastructure <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Infrastructure data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/infra-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_2 type=checkbox id=__nav_4_2_2> <label class=md-nav__link for=__nav_4_2_2> Managed Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Managed Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> Managed Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/roks/ class=md-nav__link> IBM ROKS </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/rosa/ class=md-nav__link> Amazon ROSA </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/aro/ class=md-nav__link> Microsoft ARO </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_3 type=checkbox id=__nav_4_2_3> <label class=md-nav__link for=__nav_4_2_3> Unmanaged Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Unmanaged Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> Unmanaged Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/aws/ class=md-nav__link> Amazon AWS </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/azure/ class=md-nav__link> Microsoft Azure </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/restricted-networks/ class=md-nav__link> Restricted Networks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3 checked> <label class=md-nav__link for=__nav_4_3> Cloud Pak for Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Integration" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Cloud Pak for Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1 type=checkbox id=__nav_4_3_1 checked> <label class=md-nav__link for=__nav_4_3_1> IBM App Connect Enterprise <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM App Connect Enterprise" data-md-level=3> <label class=md-nav__title for=__nav_4_3_1> <span class="md-nav__icon md-icon"></span> IBM App Connect Enterprise </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/overview/ class=md-nav__link> The ACE tutorial </a> </li> <li class=md-nav__item> <a href=../../overview/architecture/ class=md-nav__link> Target architecture </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_3 type=checkbox id=__nav_4_3_1_3> <label class=md-nav__link for=__nav_4_3_1_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cluster-create/ibm-setup/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_4 type=checkbox id=__nav_4_3_1_4> <label class=md-nav__link for=__nav_4_3_1_4> Configure the Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the Cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_4> <span class="md-nav__icon md-icon"></span> Configure the Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../cluster-config/services/ class=md-nav__link> Add services </a> </li> <li class=md-nav__item> <a href=../../cluster-config/applications/ class=md-nav__link> Application components </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../cloud-native-example/example/ class=md-nav__link> Cloud Native Example </a> </li> <li class=md-nav__item> <a href=../../deploy-backend-service/deploy-backend-service/ class=md-nav__link> Deploy Backend Service </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_7 type=checkbox id=__nav_4_3_1_7 checked> <label class=md-nav__link for=__nav_4_3_1_7> Build Integration Server <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build Integration Server" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_7> <span class="md-nav__icon md-icon"></span> Build Integration Server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../build-configurations/ class=md-nav__link> Build Configuration </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Build Integration Server <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Build Integration Server </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#pre-requisites class=md-nav__link> Pre-requisites </a> </li> <li class=md-nav__item> <a href=#creating-the-bar-file class=md-nav__link> Creating the BAR file </a> </li> <li class=md-nav__item> <a href=#custom-container-image class=md-nav__link> Custom container image </a> </li> <li class=md-nav__item> <a href=#pipeline-overview class=md-nav__link> Pipeline overview </a> </li> <li class=md-nav__item> <a href=#fork-repositories class=md-nav__link> Fork repositories </a> </li> <li class=md-nav__item> <a href=#set-environment-variables class=md-nav__link> Set Environment variables </a> </li> <li class=md-nav__item> <a href=#deploy-tekton-tasks class=md-nav__link> Deploy Tekton tasks </a> </li> <li class=md-nav__item> <a href=#deploy-pipeline-definition class=md-nav__link> Deploy pipeline definition </a> </li> <li class=md-nav__item> <a href=#set-up-sealedsecret class=md-nav__link> Set up SealedSecret </a> <nav class=md-nav aria-label="Set up SealedSecret"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-ssh-key-pairs class=md-nav__link> Create SSH key pairs </a> </li> <li class=md-nav__item> <a href=#upload-the-public-ssh-key class=md-nav__link> Upload the public ssh-key </a> </li> <li class=md-nav__item> <a href=#create-sealed-secrets class=md-nav__link> Create sealed secrets </a> </li> <li class=md-nav__item> <a href=#verify-the-secret class=md-nav__link> Verify the Secret </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-pvc class=md-nav__link> Create PVC </a> </li> <li class=md-nav__item> <a href=#deploy-ibm-entitlement-key class=md-nav__link> Deploy ibm-entitlement-key </a> </li> <li class=md-nav__item> <a href=#add-key-to-service-account class=md-nav__link> Add key to service account </a> </li> <li class=md-nav__item> <a href=#deploy-ace-dashboard class=md-nav__link> Deploy ACE Dashboard </a> <nav class=md-nav aria-label="Deploy ACE Dashboard"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#deploy-ibm-entitlement-key-on-the-dev-namespace class=md-nav__link> Deploy ibm-entitlement-key on the dev namespace </a> </li> <li class=md-nav__item> <a href=#deploy-dashboard class=md-nav__link> Deploy Dashboard </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#run-the-pipeline class=md-nav__link> Run the pipeline </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../continuous-update/ class=md-nav__link> Continuous Update </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../environment-promotion/promoting-environments/ class=md-nav__link> Environment Promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2 type=checkbox id=__nav_4_3_2> <label class=md-nav__link for=__nav_4_3_2> IBM MQ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM MQ" data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> IBM MQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/using/this-guide/ class=md-nav__link> The MQ tutorial </a> </li> <li class=md-nav__item> <a href=../../../mq/overview/architecture/ class=md-nav__link> Target architecture </a> </li> <li class=md-nav__item> <a href=../../../mq/cluster-create/ibm-setup/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_4 type=checkbox id=__nav_4_3_2_4> <label class=md-nav__link for=__nav_4_3_2_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../../mq/cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../../mq/cluster-config/services/ class=md-nav__link> Add services </a> </li> <li class=md-nav__item> <a href=../../../mq/cluster-config/applications/ class=md-nav__link> Application components </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_5 type=checkbox id=__nav_4_3_2_5> <label class=md-nav__link for=__nav_4_3_2_5> Build Queue Manager <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build Queue Manager" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_5> <span class="md-nav__icon md-icon"></span> Build Queue Manager </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/qmgr-pipeline/topic1/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../../mq/qmgr-pipeline/topic2/ class=md-nav__link> Running the pipeline </a> </li> <li class=md-nav__item> <a href=../../../mq/qmgr-pipeline/topic3/ class=md-nav__link> Deploying and using </a> </li> <li class=md-nav__item> <a href=../../../mq/qmgr-pipeline/topic4/ class=md-nav__link> Continuous updates </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_6 type=checkbox id=__nav_4_3_2_6> <label class=md-nav__link for=__nav_4_3_2_6> Build MQ application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build MQ application" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_6> <span class="md-nav__icon md-icon"></span> Build MQ application </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/app-pipeline/topic1/ class=md-nav__link> Sample application </a> </li> <li class=md-nav__item> <a href=../../../mq/app-pipeline/topic2/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../../mq/app-pipeline/topic3/ class=md-nav__link> Managing an application change </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_7 type=checkbox id=__nav_4_3_2_7> <label class=md-nav__link for=__nav_4_3_2_7> Durable queue managers <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Durable queue managers" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_7> <span class="md-nav__icon md-icon"></span> Durable queue managers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/storage/topic1/ class=md-nav__link> Queue manager structure </a> </li> <li class=md-nav__item> <a href=../../../mq/storage/topic2/ class=md-nav__link> External storage </a> </li> <li class=md-nav__item> <a href=../../../mq/storage/topic3/ class=md-nav__link> Restart and durability </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_8 type=checkbox id=__nav_4_3_2_8> <label class=md-nav__link for=__nav_4_3_2_8> Environment Promotion <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Environment Promotion" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_8> <span class="md-nav__icon md-icon"></span> Environment Promotion </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/cloud-native/promoting-environments-dev-stage/ class=md-nav__link> Promote from dev to staging </a> </li> <li class=md-nav__item> <a href=../../../mq/cloud-native/promoting-environments-stage-prod/ class=md-nav__link> Promote from staging to prod </a> </li> <li class=md-nav__item> <a href=../../../mq/cloud-native/automate-promotion/ class=md-nav__link> Automate promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_9 type=checkbox id=__nav_4_3_2_9> <label class=md-nav__link for=__nav_4_3_2_9> Monitor Queue Manager <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Monitor Queue Manager" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_9> <span class="md-nav__icon md-icon"></span> Monitor Queue Manager </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/monitoring/topic1/ class=md-nav__link> Technology stack </a> </li> <li class=md-nav__item> <a href=../../../mq/monitoring/topic2/ class=md-nav__link> MQ scenario </a> </li> <li class=md-nav__item> <a href=../../../mq/monitoring/topic3/ class=md-nav__link> Metrics application </a> </li> <li class=md-nav__item> <a href=../../../mq/monitoring/topic4/ class=md-nav__link> Customising dashboard </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_10 type=checkbox id=__nav_4_3_2_10> <label class=md-nav__link for=__nav_4_3_2_10> Expose MQ App APIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Expose MQ App APIs" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_10> <span class="md-nav__icon md-icon"></span> Expose MQ App APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/apic/deploy-apic/ class=md-nav__link> Deploy API Connect </a> </li> <li class=md-nav__item> <a href=../../../mq/apic/configure-apic/ class=md-nav__link> Configure API Connect </a> </li> <li class=md-nav__item> <a href=../../../mq/apic/publish-apis/ class=md-nav__link> Publish APIs </a> </li> <li class=md-nav__item> <a href=../../../mq/apic/consume-apis/ class=md-nav__link> Consume APIs </a> </li> <li class=md-nav__item> <a href=../../../mq/apic/monitor-apis/ class=md-nav__link> Monitor APIs </a> </li> <li class=md-nav__item> <a href=../../../mq/apic/promote-apis/ class=md-nav__link> Promote APIs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_11 type=checkbox id=__nav_4_3_2_11> <label class=md-nav__link for=__nav_4_3_2_11> Architecture Decisions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Architecture Decisions" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_11> <span class="md-nav__icon md-icon"></span> Architecture Decisions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../mq/ad/ class=md-nav__link> Decision Index </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3 type=checkbox id=__nav_4_3_3> <label class=md-nav__link for=__nav_4_3_3> IBM API Connect <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM API Connect" data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> IBM API Connect </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/overview/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_2 type=checkbox id=__nav_4_3_3_2> <label class=md-nav__link for=__nav_4_3_3_2> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_2> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_3 type=checkbox id=__nav_4_3_3_3> <label class=md-nav__link for=__nav_4_3_3_3> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_3> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps, Tekton & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../apic/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> <li class=md-nav__item> <a href=../../../apic/cluster-config/applications/ class=md-nav__link> Application components </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_4 type=checkbox id=__nav_4_3_3_4> <label class=md-nav__link for=__nav_4_3_3_4> Deploy APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_4> <span class="md-nav__icon md-icon"></span> Deploy APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_5 type=checkbox id=__nav_4_3_3_5> <label class=md-nav__link for=__nav_4_3_3_5> Configure APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_5> <span class="md-nav__icon md-icon"></span> Configure APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/configuration/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_6 type=checkbox id=__nav_4_3_3_6> <label class=md-nav__link for=__nav_4_3_3_6> Publish APIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Publish APIs" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_6> <span class="md-nav__icon md-icon"></span> Publish APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/publish/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4 type=checkbox id=__nav_4_3_4> <label class=md-nav__link for=__nav_4_3_4> IBM API Connect Multi-Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM API Connect Multi-Cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_3_4> <span class="md-nav__icon md-icon"></span> IBM API Connect Multi-Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/multi-cluster/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/create-clusters/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4_3 type=checkbox id=__nav_4_3_4_3> <label class=md-nav__link for=__nav_4_3_4_3> Configure the clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the clusters" data-md-level=4> <label class=md-nav__title for=__nav_4_3_4_3> <span class="md-nav__icon md-icon"></span> Configure the clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/multi-cluster/configure-clusters-gitops/ class=md-nav__link> GitOps repos & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/configure-clusters-gitops-config/ class=md-nav__link> Configure GitOps repos </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/deploy/ class=md-nav__link> Deploy APIC </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/config-pipeline/ class=md-nav__link> Configure APIC </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/publish-pipeline/ class=md-nav__link> Publish APIs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5 type=checkbox id=__nav_4_3_5> <label class=md-nav__link for=__nav_4_3_5> Event-Driven Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Event-Driven Architecture" data-md-level=3> <label class=md-nav__title for=__nav_4_3_5> <span class="md-nav__icon md-icon"></span> Event-Driven Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../eda/link/ class=md-nav__link> EDA GitOps Solution </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Cloud Pak for Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Security" data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Cloud Pak for Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/using/this-guide/ class=md-nav__link> The CP4S tutorial </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/overview/architecture/ class=md-nav__link> CP4S architecture </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-create/ibm-setup/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_4 type=checkbox id=__nav_4_4_4> <label class=md-nav__link for=__nav_4_4_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_4_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/services/ class=md-nav__link> Add services </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/backup-recovery-upgrade/ class=md-nav__link> Managing Lifecycle for CP4S </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/connect-datasources/ class=md-nav__link> Connecting DataSources for CP4S </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/platform/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_2 type=checkbox id=__nav_4_5_2> <label class=md-nav__link for=__nav_4_5_2> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_5_2> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/cluster-create/ibm-setup/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_3 type=checkbox id=__nav_4_5_3> <label class=md-nav__link for=__nav_4_5_3> Configure the Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the Cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_5_3> <span class="md-nav__icon md-icon"></span> Configure the Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/cluster-config/gitops-argocd/ class=md-nav__link> GitOps and ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../../cp4d/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../cp4d/platform/deployment/ class=md-nav__link> Deployment </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5 type=checkbox id=__nav_4_5_5> <label class=md-nav__link for=__nav_4_5_5> Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Services data-md-level=3> <label class=md-nav__title for=__nav_4_5_5> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5_1 type=checkbox id=__nav_4_5_5_1> <label class=md-nav__link for=__nav_4_5_5_1> Watson Studio <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Studio" data-md-level=4> <label class=md-nav__title for=__nav_4_5_5_1> <span class="md-nav__icon md-icon"></span> Watson Studio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/watson-studio/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../cp4d/watson-studio/deployment/ class=md-nav__link> Deployment </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5_2 type=checkbox id=__nav_4_5_5_2> <label class=md-nav__link for=__nav_4_5_5_2> Watson Knowledge Catalog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Knowledge Catalog" data-md-level=4> <label class=md-nav__title for=__nav_4_5_5_2> <span class="md-nav__icon md-icon"></span> Watson Knowledge Catalog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/wkc/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../cp4d/wkc/deployment/ class=md-nav__link> Deployment </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6> Cloud Pak for Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Automation" data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1 type=checkbox id=__nav_4_6_1> <label class=md-nav__link for=__nav_4_6_1> IBM Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Process Mining" data-md-level=3> <label class=md-nav__title for=__nav_4_6_1> <span class="md-nav__icon md-icon"></span> IBM Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/overview/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/using/this-guide/ class=md-nav__link> Using this guide </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_3 type=checkbox id=__nav_4_6_1_3> <label class=md-nav__link for=__nav_4_6_1_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_4 type=checkbox id=__nav_4_6_1_4> <label class=md-nav__link for=__nav_4_6_1_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_5 type=checkbox id=__nav_4_6_1_5> <label class=md-nav__link for=__nav_4_6_1_5> Deploy Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy Process Mining" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_5> <span class="md-nav__icon md-icon"></span> Deploy Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=References data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/ad/ class=md-nav__link> Architectural Decisions </a> </li> <li class=md-nav__item> <a href=../../../../../references/prerequisites/instructions/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../../../../references/training/training/ class=md-nav__link> Training </a> </li> <li class=md-nav__item> <a href=../../../../../references/restorecluster/gitops-restore-cluster/ class=md-nav__link> Restoring a Cluster from a GitOps Repository </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=About data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../overview/whats-new/ class=md-nav__link> What's New </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_2 type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2> Contributing Content <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Contributing Content" data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Contributing Content </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../contribute/githubflow/ class=md-nav__link> GitHub Open Source Contribution Steps </a> </li> <li class=md-nav__item> <a href=../../../../../contribute/documentation/ class=md-nav__link> Running a Local Site Instance </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#pre-requisites class=md-nav__link> Pre-requisites </a> </li> <li class=md-nav__item> <a href=#creating-the-bar-file class=md-nav__link> Creating the BAR file </a> </li> <li class=md-nav__item> <a href=#custom-container-image class=md-nav__link> Custom container image </a> </li> <li class=md-nav__item> <a href=#pipeline-overview class=md-nav__link> Pipeline overview </a> </li> <li class=md-nav__item> <a href=#fork-repositories class=md-nav__link> Fork repositories </a> </li> <li class=md-nav__item> <a href=#set-environment-variables class=md-nav__link> Set Environment variables </a> </li> <li class=md-nav__item> <a href=#deploy-tekton-tasks class=md-nav__link> Deploy Tekton tasks </a> </li> <li class=md-nav__item> <a href=#deploy-pipeline-definition class=md-nav__link> Deploy pipeline definition </a> </li> <li class=md-nav__item> <a href=#set-up-sealedsecret class=md-nav__link> Set up SealedSecret </a> <nav class=md-nav aria-label="Set up SealedSecret"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-ssh-key-pairs class=md-nav__link> Create SSH key pairs </a> </li> <li class=md-nav__item> <a href=#upload-the-public-ssh-key class=md-nav__link> Upload the public ssh-key </a> </li> <li class=md-nav__item> <a href=#create-sealed-secrets class=md-nav__link> Create sealed secrets </a> </li> <li class=md-nav__item> <a href=#verify-the-secret class=md-nav__link> Verify the Secret </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-pvc class=md-nav__link> Create PVC </a> </li> <li class=md-nav__item> <a href=#deploy-ibm-entitlement-key class=md-nav__link> Deploy ibm-entitlement-key </a> </li> <li class=md-nav__item> <a href=#add-key-to-service-account class=md-nav__link> Add key to service account </a> </li> <li class=md-nav__item> <a href=#deploy-ace-dashboard class=md-nav__link> Deploy ACE Dashboard </a> <nav class=md-nav aria-label="Deploy ACE Dashboard"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#deploy-ibm-entitlement-key-on-the-dev-namespace class=md-nav__link> Deploy ibm-entitlement-key on the dev namespace </a> </li> <li class=md-nav__item> <a href=#deploy-dashboard class=md-nav__link> Deploy Dashboard </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#run-the-pipeline class=md-nav__link> Run the pipeline </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/edit/master/docs/guides/cp4i/ace/build-integration-server/build-integration-server.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=building-integration-server>Building Integration Server<a class=headerlink href=#building-integration-server title="Permanent link">&para;</a></h1> <!--- cSpell:ignore messageflow createcustomerrestcallingws createcustomer envsubst subflow subflows msgflow ibmint webui  pbcopy rolebinding backendurl policyxml soapserver realpath setdbparms truststores pipelinerun resyncs mqsc runmqsc dockerconfigjson queuemanager QMID podman ibmgaragecloud cntk cnkt eventid gitrevision gitrepositoryurl odowdaibm MQSC replicaset eventlistener triggerbinding triggertemplate mqcicd qmgr Artifactory configmaps OIDC CHLAUTH templating sealedsecret openapi --> <p><strong>Audience</strong>: Architects, Application developers, Administrators</p> <p><strong>Timing</strong>: 1 hour 30 minutes</p> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>In this topic, we will build <code>IntegrationServer</code> Custom Resource, which defines our AppConnect Integration Server.</p> <figure> <p><img alt src=../images/build-integration-server-server.svg> </p> <figcaption>Building Integration Server</figcaption> </figure> <p>As mentioned in the <a href=../overview/ >Overview</a> section, the <code>IntegrationServer</code> Custom Resource (CR) is produced by the Integration Server pipeline. The pipeline takes AppConnect application resources, such as message flows (.messageflow), sub-flows (.subflow), ESQL (.esql), mapping (.map), etc. creates a BAR file, bakes in the BAR file to a custom container image, pushes the container image to OpenShift internal registry. It then creates the <code>IntegrationServer</code> CR which refers to the custom container image. The CR also refers to he <code>Configuration</code> objects needed for the message flow and the integration server.</p> <hr> <h2 id=pre-requisites>Pre-requisites<a class=headerlink href=#pre-requisites title="Permanent link">&para;</a></h2> <p>Before attempting this topic, you should have successfully completed the <a href=../build-configurations/ >Building Configurations</a>. This section relies on the resources that have been already deployed as part of the <strong>Building Configurations</strong> and previous sections. At this stage we should have available: </p> <ul> <li><a href=../build-configurations/#install-cicd-argocd-application>ArgoCD application</a>.</li> <li><code>resolve-props</code> and <code>github-open-pr</code> <a href=../build-configurations/#deploy-tekton-tasks>Tekton tasks</a>.</li> <li>SSH keys for infrastructure and GitOps repos from the <a href=../build-configurations/#upload-the-public-ssh-key>Upload the public ssh-key</a> section.</li> <li>GitHub machine user from <a href=../build-configurations/#create-a-machine-user>Create a "machine user"</a> section and related permissions from <a href=../build-configurations/#create-access-token-for-the-machine-user>Create access token for the Machine User</a> section.</li> <li>Sealed secret operator from <a href=../../cluster-config/services/#deploy-services-to-the-cluster>Deploy services to the cluster</a> section. </li> <li><code>kubeseal</code> from <a href=../build-configurations/#create-sealed-secrets>Create sealed secrets</a> section.</li> </ul> <hr> <h2 id=creating-the-bar-file>Creating the BAR file<a class=headerlink href=#creating-the-bar-file title="Permanent link">&para;</a></h2> <p>To deploy an integration solution to a production environment on OpenShift, we need to package the App Connect Enterprise (ACE) resources into a broker archive (BAR) file. </p> <p>Consider our Create Customer Integration application. The source code of the application is maintained in a <a href=https://github.com/cloud-native-toolkit-demos/create-customer>Git template</a>. The template contains resources such as message flows (.messageflow), sub-flows (.subflow), ESQL (.esql), mapping (.map), etc. as well as supporting Java Application with <code>.java</code> code files. The Java application need to be complied and packaged with all the resources to a BAR.</p> <p>The BAR file can be created from the source via <a href="https://www.ibm.com/docs/en/app-connect/12.0?topic=commands-ibmint-package-command"><code>ibmint package</code></a> command. The command is available on the App Connect Enterprise container image. We will make use of this command in our pipeline to build the BAR file from ACE source.</p> <hr> <h2 id=custom-container-image>Custom container image<a class=headerlink href=#custom-container-image title="Permanent link">&para;</a></h2> <p>The BAR file will be "baked in" in a custom container image. The image URI will then be referred in the <code>IntegrationServer</code> CR. Our pipeline will build this image and push it to the internal OpenShift registry.</p> <p>We will base our custom container image on a IBM App Connect Enterprise server image, located in the IBM Cloud Container Registry, <code>cp.icr.io</code>. Our pipeline would therefore need access to this registry. We will make use of <code>ibm-entitlement-key</code> container registry <code>Secret</code> to provide us access to the IBM Cloud Container Registry.</p> <hr> <h2 id=pipeline-overview>Pipeline overview<a class=headerlink href=#pipeline-overview title="Permanent link">&para;</a></h2> <figure> <p><img alt src=../images/ace-is-pipeline.svg width=1024> </p> <figcaption>Integration Server pipeline</figcaption> </figure> <p>The pipeline has 6 tasks:</p> <ol> <li> <p>Clone source repo.</p> </li> <li> <p>Clone infra repo.</p> </li> <li> <p>Clone gitops repo.</p> <p>Based on <a href=https://github.com/tektoncd/catalog/tree/main/task/git-clone/0.4>git-clone</a> cluster task, execution of these tasks will clone the required repositories:</p> <ul> <li> <p>ACE Source Repository: Contains the ACE application resources, such message flows and subflows (<code>.msgflow</code>, <code>.subflow</code>), maps (<code>.map</code>), ESQL code (<code>.esql</code>), supporting Java application code (<code>.java</code>), XML schemas (e.g. WSDL files) and any other resources (e.g. <code>openapi.json</code>). The pipeline needs read-only access to this repository.</p> </li> <li> <p>Infrastructure Repository: Contains template for <a href="https://www.ibm.com/docs/en/app-connect/containers_cd?topic=resources-integration-server-reference"><strong>IntegrationServer</strong></a> custom resource and Dockerfile for our custom integration server container image. These files are plain text template file that container place holders. The pipeline needs read-only access to this repository.</p> </li> <li> <p>GitOps repository: The multi-tenancy apps repository. This is the repository the GitOps operator watches for any desire state of the application. <strong>Configuration</strong>s for ACE application concern, and therefore the CRs are maintained in the The multi-tenancy apps repository. The pipeline will write the generated <strong>Configuration</strong>s to this GitOps repository. The pipeline needs write access to this repository.</p> </li> </ul> <p>The tasks will clone the repositories on shared workspace. Subsequent tasks will make use the workspace to access content of the repositories.</p> <p>The tasks will require secure access to the repositories. We will use SSH based authentication by using GitHub's deploy key.</p> </li> <li> <p>Resolve props.</p> <p>Pipeline properties maintains properties of the IntegrationServer we are going to deploy. It contains metadata such as name of the application, release name of the Integration Server, licensing information, version of the server, and the type of endpoint. It also contains the URI of the image our custom integration server container image is going to be based upon.</p> <p>It also lists <strong>Configuration</strong>s that the IntegrationServer requires as it gets deployed. These configurations will be referenced in the <code>IntegrationServer</code> custom resource.</p> <p>The task is the same one that was deployed as part of the <a href=../build-configurations/ >Building Configurations</a> section. But it reads the <code>pipeline_properties.yaml</code> from the source repository.</p> </li> <li> <p>Build bar</p> <p>A custom task that builds the ACE BAR file from ACE resources. It makes use of <code>ibmint package</code> command. The command is available in the ACE server and ACE for Developers container image. We will make use of ACE server container image. For list of ACE server and ACE for Developer images see <a href="https://www.ibm.com/docs/en/app-connect/containers_cd?topic=obtaining-app-connect-enterprise-server-image-from-cloud-container-registry">IBM App Connect Enterprise server image from the IBM Cloud Container Registry</a>.</p> </li> <li> <p>Build image</p> <p>A container image based on IBM App Connect Enterprise server image is created that bakes in the BAR file generated in the previous pipeline task. The <a href=https://github.com/cloud-native-toolkit-demos/ace-infra/blob/master/Dockerfile>Dockerfile</a> located in the Infrastructure repository is used, replacing the base image. The base image URI is taken from the pipeline properties located on the source repository. See <a href=https://github.com/cloud-native-toolkit-demos/create-customer/blob/master/pipeline_properties.yaml>pipeline_properties.yaml</a> for an example.</p> </li> <li> <p>Build integration server</p> <p>This custom task have three steps:</p> <ol> <li> <p>Create <strong>IntegrationServer</strong>s YAML file: Generates an <code>IntegrationServer</code> CR. The templated <code>IntegrationServer</code> CR from the infrastructure repository is used by substituting the the parameters. In particular, custom container image and required <code>Configuration</code>s are referenced in the generated CR. The step makes use of <code>yq</code> and <code>envsubst</code> CLI. Custom image, <code>sh-tools</code>, will contains these tools.</p> </li> <li> <p>Update the <code>kustomization.yaml</code> file: <strong>IntegrationServer</strong>s that are to be deployed by GitOps operator is driven by kustomize. Once the pipeline creates a <strong>IntegrationServer</strong>, the <code>kustomization.yaml</code> lists it so that it can be deployed. Therefore, the pipeline need update the <code>kustomization.yaml</code> file. The step makes use of <code>yq</code> and <code>realpath</code> CLI. Custom image, <code>sh-tools</code>, will contains these tools.</p> </li> <li> <p>Push the changes to GitOps repository: The <strong>IntegrationServer</strong> resource and the updated <code>kustomization.yaml</code> file is then pushed to the GitOps repository under a new branch. <code>bitnami/git</code> image is used for this step.</p> </li> </ol> <p>Before the pipeline can execute this custom task need to be deployed.</p> </li> <li> <p>Create Pull Request</p> <p>A custom task that that create a pull request to pull the changes to GitOps repository. The task is from tekton catalog, <a href=https://github.com/tektoncd/catalog/tree/main/task/github-open-pr/0.2>github-open-pr</a>, but it is not part of the ClusterTask that comes with OpenShift pipeline operator.</p> </li> </ol> <hr> <h2 id=fork-repositories>Fork repositories<a class=headerlink href=#fork-repositories title="Permanent link">&para;</a></h2> <p>We will need to create Source and Infrastructure git repositories from <code>cloud-native-toolkit-demos</code> organization to your organization. </p> <p>The Infrastructure repository should already been created on your organization as part of the Build Configuration section. See <a href=../build-configurations/#create-infrastructure-repository>Create Infrastructure repository</a>.</p> <p>The GitOps repository, which in our case is the <code>multi-tenancy-gitops-apps</code> repository should already been created from the template as part of the <a href=../../cluster-config/gitops-tekton-argocd/ >GitOps, Tekton &amp; ArgoCD</a> section.</p> <ol> <li> <p><em>Create the Configuration repository in your GitHub organization</em></p> <p>Let's start by making our own copy of the Configuration repository.</p> <p>In your browser, navigate to <a href=https://github.com/cloud-native-toolkit-demos/create-customer>https://github.com/cloud-native-toolkit-demos/create-customer</a>.</p> <p>Click on <strong>Use this template</strong> and select your organization, name the repository and click <strong>Create repository from template</strong>. </p> <p><figure markdown> <img alt src=../images/github-ui-ace-source-template.png width=1024> <figcaption>Source Template</figcaption> </figure></p> <p>After a few seconds the repository will be present in your chosen account.</p> </li> <li> <p><em>Review the repository</em></p> <p>We can take a look at the content of the repository in the github.com on the browser with vscode.</p> <p>If you press dot (.) key while you are in your github repository, it will open vscode on the browser. See <a href="https://www.youtube.com/watch?v=ywUZOOzLX3c">The dot</a> for a demo how it works.</p> <p>On the <code>create-customer</code> repository within your organization, press the dot (<code>.</code>) key:</p> <p><figure markdown> <img alt src=../images/ace-source-dot.png width=1024> <figcaption>ACE source on github</figcaption> </figure></p> <p>The folders <code>createcustomer</code>, <code>createcustomerJava</code>, and <code>createcustomer_Test</code> have been directly pushed from ACE toolkit via the Git plugin.</p> <p>The pipeline properties file, <code>pipeline_properties.yaml</code>, sets up the various properties for the integration server that is to be built. In particular, </p> <table> <thead> <tr> <th>Property</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>baseImage</code></td> <td>URI of the base image to be used in building the custom integration server image. See <a href="https://www.ibm.com/docs/en/app-connect/containers_cd?topic=obtaining-app-connect-enterprise-server-image-from-cloud-container-registry">IBM App Connect Enterprise server image</a> for various image URIs</td> </tr> <tr> <td><code>project</code></td> <td>Lists the project folders of the ACE application.</td> </tr> <tr> <td><code>applicationName</code></td> <td>Name of the application to be built. This name will used in the URI of the custom integration server</td> </tr> <tr> <td><code>releaseName</code></td> <td>Name of the integration server</td> </tr> <tr> <td><code>license</code></td> <td>Licensing information, which includes the License and the use. See <a href="https://www.ibm.com/docs/en/app-connect/containers_cd?topic=resources-licensing-reference-app-connect-operator">Licensing reference for IBM App Connect Operator</a> for more information</td> </tr> <tr> <td><code>service.endpointType</code></td> <td>Either <code>http</code> or <code>https</code>. In this section of the tutorial we will use <code>http</code></td> </tr> <tr> <td><code>version</code></td> <td>Version of the integration server</td> </tr> <tr> <td><code>configurations</code></td> <td>The configurations required for this integration server</td> </tr> </tbody> </table> </li> </ol> <hr> <h2 id=set-environment-variables>Set Environment variables<a class=headerlink href=#set-environment-variables title="Permanent link">&para;</a></h2> <p>Throughout this chapter we will make use of two environment variables:</p> <ul> <li><code>GIT_ORG</code>: an environment variable that identifies your GitHub organization.</li> <li><code>GIT_ROOT</code>: an environment variable that identifies the root folder for your cloned git repositories.</li> </ul> <p>We will make use of these environment variable to save typing and reduce errors. We have made use of these variable in the chapter, <a href=../../cluster-config/gitops-tekton-argocd>GitOps, Tekton &amp; ArgoCD</a>.</p> <p>Start a terminal window, we need to keep this terminal and the shell running throughout this chapter.</p> <p>In the following command, replace <code>&lt;git-organization&gt;</code> with the GitHub organization name you've just chosen (e.g. tutorial-org-123):</p> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>GIT_ORG</span><span class=o>=</span>&lt;git-organization&gt;
<span class=nb>export</span> <span class=nv>GIT_ROOT</span><span class=o>=</span><span class=nv>$HOME</span>/git/<span class=nv>$GIT_ORG</span>-root
</code></pre></div> <p>You can verify your environment variables as follows:</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span> <span class=nv>$GIT_ORG</span> 
<span class=nb>echo</span> <span class=nv>$GIT_ROOT</span>
</code></pre></div> <hr> <h2 id=deploy-tekton-tasks>Deploy Tekton tasks<a class=headerlink href=#deploy-tekton-tasks title="Permanent link">&para;</a></h2> <p>There are two custom tasks to deploy:</p> <ul> <li> <p>Building BAR, <code>build-bar</code></p> </li> <li> <p>Build integration server, <code>build-is</code>. </p> </li> </ul> <p>Let's start deploying them.</p> <ol> <li> <p><em>Change to CI environment directory</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$GIT_ROOT</span>/multi-tenancy-gitops-apps/ace/environments/ci
</code></pre></div> </li> <li> <p><em>Update kustomization to enable custom tasks <code>build-bar</code> and <code>build-is</code></em></p> <p>Open <code>kustomization.yaml</code> (<code>$GIT_ROOT/multi-tenancy-gitops-apps/ace/environments/ci/kustomization.yaml</code>) and uncomment:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tasks/build-bar.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tasks/build-is.yaml</span><span class=w></span>
</code></pre></div> </li> <li> <p><em>Commit and push the changes</em></p> <div class=highlight><pre><span></span><code>git add .
git commit -am <span class=s2>&quot;Deploy build-bar amd build-is tasks&quot;</span>
git push
</code></pre></div> </li> </ol> <p>You can verify that ArgoCD deployed the resources using the ArgoCD UI, for <code>apps-ace-rest-ci-1</code>:</p> <figure> <p><img alt src=../images/argo-ui-build-is.png width=1024> </p> <figcaption>`build-is` and `build-bar` on ArgoCD UI</figcaption> </figure> <hr> <h2 id=deploy-pipeline-definition>Deploy pipeline definition<a class=headerlink href=#deploy-pipeline-definition title="Permanent link">&para;</a></h2> <p>We are now ready to deploy the integration server pipeline.</p> <ol> <li> <p><em>Change to CI environment directory</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$GIT_ROOT</span>/multi-tenancy-gitops-apps/ace/environments/ci
</code></pre></div> </li> <li> <p><em>Update kustomization to enable resolve-props tasks</em></p> <p>Open <code>kustomization.yaml</code> (<code>$GIT_ROOT/multi-tenancy-gitops-apps/ace/environments/ci/kustomization.yaml</code>) and uncomment:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pipelines/ace-integration-server.yaml</span><span class=w></span>
</code></pre></div> </li> <li> <p><em>Commit the and push the change</em></p> <div class=highlight><pre><span></span><code>git add .
git commit -m <span class=s2>&quot;Deploy ace-integration-server pipeline&quot;</span>
git push
</code></pre></div> </li> <li> <p><em>Check the deployment of the pipeline in ArgoCD UI</em></p> <p>Under "apps-ace-rest-ci-1" project, you should see that the task has been deployed:</p> <p><figure markdown> <img alt src=../images/argo-ui-ace-is-pipeline.png width=1024> <figcaption><code>ace-integration-server</code> pipeline synched by ArgoCD</figcaption> </figure></p> </li> <li> <p><em>Check the deployment of the pipeline in OpenShift UI</em></p> <p>You can also verify the deploy on OpenShift UI. From <strong>Pipelines &gt; Pipelines</strong>, make sure Project <code>ci</code> is selected from the drop down menu:</p> <p><figure markdown> <img alt src=../images/ocp-ui-ace-is-pipeline.png width=1024> <figcaption><code>ace-integration-server</code> pipeline in OpenShift UI</figcaption> </figure></p> </li> </ol> <hr> <h2 id=set-up-sealedsecret>Set up <code>SealedSecret</code><a class=headerlink href=#set-up-sealedsecret title="Permanent link">&para;</a></h2> <p>Our integration server pipeline would needs to access Git repositories for source of the ACE application files and the templates for the <strong>IntegrationServer</strong>s objects. In this tutorial we will assume that our configuration repository is a private repository. As noted in this blog, <a href=https://cloud.redhat.com/blog/private-git-repositories-part-2a-repository-ssh-keys>Private Git Repositories</a>, the preferred mechanism for accessing a private Git repository is to create a unique repository SSH key. In this section we will set up this mechanism.</p> <h3 id=create-ssh-key-pairs>Create SSH key pairs<a class=headerlink href=#create-ssh-key-pairs title="Permanent link">&para;</a></h3> <p>We will will need two pairs for SSH keys, one for the ACE source repository, one for the infrastructure repository and one for our <code>multi-tenancy-gitops-apps</code> repository. The keys for the infrastructure repository and <code>multi-tenancy-gitops-apps</code> repository should already be created as part of completion of the Build Configuration section. See <a href=../build-configurations/#create-ssh-key-pairs>Create SSH key pairs</a>.</p> <p>In this sub-section, we will create the key pair for ACE source repository.</p> <ol> <li> <p><em>Change to a directory outside the git repositories</em></p> <p>We will generate a pair of SSH keys (public and private) but we do not want to store these in a git repository. In this tutorial, we will assume to create and store the SSH keys in <code>$HOME/keys</code> directory.</p> <p>Create the directory and change to it:</p> <div class=highlight><pre><span></span><code>mkdir -p <span class=nv>$HOME</span>/keys
<span class=nb>cd</span> <span class=nv>$HOME</span>/keys
</code></pre></div> </li> <li> <p><em>Create ssh key pairs</em></p> <p>Using <code>ssh-keygen</code>, we can create ssh key pair for the configuration repository:</p> <div class=highlight><pre><span></span><code>ssh-keygen -C <span class=s2>&quot;gitops-pipeline/create-customer@github.com/ace-prod-ref&quot;</span> -f create-customer-at-ace-prod-ref-github -N <span class=s1>&#39;&#39;</span>
</code></pre></div> <p>Filenames for the keys will start with <code>create-customer-at-ace-prod-ref-github</code> and we are not setting a passphrase. </p> <p>If you list the files that are created in the current directory, you should see:</p> <div class=highlight><pre><span></span><code>tree .
</code></pre></div> <div class="no-copy highlight"><pre><span></span><code>.
 ace-config-at-ace-prod-ref-github
 ace-config-at-ace-prod-ref-github.pub
 ace-infra-at-ace-prod-ref-github
 ace-infra-at-ace-prod-ref-github.pub
 create-customer-at-ace-prod-ref-github
 create-customer-at-ace-prod-ref-github.pub
 multi-tenancy-gitops-apps-at-ace-prod-ref-github
 multi-tenancy-gitops-apps-at-ace-prod-ref-github.pub

<span class=m>0</span> directories, <span class=m>8</span> files
</code></pre></div> <p>The file <code>create-customer-at-ace-prod-ref-github</code> and <code>create-customer-at-ace-prod-ref-github.pub</code> are created in this step. The others were created in the Build Configuration section.</p> </li> </ol> <h3 id=upload-the-public-ssh-key>Upload the public ssh-key<a class=headerlink href=#upload-the-public-ssh-key title="Permanent link">&para;</a></h3> <ol> <li> <p><em>Upload the public ssh-key to the ACE source Git repository</em></p> <p>The public keys of our pairs need to be uploaded to our Git repositories, as Deploy keys.</p> <p>Visit your repository, go to Settings, and then to choose <strong>Deploy keys</strong> on the left hand side menu. For example, for <code>create-customer</code> repository:</p> <p><figure markdown> <img alt src=../images/github-ui-create-customer-deploy-key.png width=1024> <figcaption>Deploy Key Settings</figcaption> </figure></p> <p>Click on <strong>Add deploy key</strong> button, give a title (say "gitops-pipeline") and copy the content of public key (for example, <code>create-customer-at-ace-prod-ref-github.pub</code> for ace-config repository).</p> <details class=tip> <summary>Use <code>pbcopy</code> in MacOS</summary> <p>If you are using MacOS, you can use <code>pbcopy</code> CLI to copy the public key on your clipboard:</p> <div class=highlight><pre><span></span><code>cat ~/keys/create-customer-at-ace-prod-ref-github.pub <span class=p>|</span> pbcopy
</code></pre></div> </details> <p><figure markdown> <img alt src=../images/github-ui-deploy-key-create-customer.png width=1024> <figcaption>Deploy Key for ACE Source Repository</figcaption> </figure></p> <p>Click on <strong>Add key</strong> button to the add the deploy key.</p> </li> </ol> <h3 id=create-sealed-secrets>Create sealed secrets<a class=headerlink href=#create-sealed-secrets title="Permanent link">&para;</a></h3> <p>The private part of the SSH key need to be used by our pipeline to authenticate itself when cloning the repository. Moreover, the personal access token of the machine user will also be used the pipeline. </p> <p>The keys and the token can be accessed via a kubernetes secret object. The secret object can be created by GitOps operator, but instead of storing the SSH key in a <code>Secret</code> manifest yaml, we will store it as <code>SealedSecret</code>. </p> <p>A <code>Secret</code> manifest encodes it's data, but does not encrypts it. Therefore it is not a good idea to store a plain <code>Secret</code> manifest yaml in a git repository. Instead, we will use <code>SealedSecret</code> manifest, which encrypts a <code>Secret</code> manifest and generates a encrypted version of its data content. We can store this encrypted <code>SealedSecret</code> manifest in a Git repository. Once GitOps operator reconciles this object on to the cluster, <code>SealedSecret</code> operator will decrypt it and store it as a secret in the namespace. Only <code>SealedSecret</code> operator decrypt the <code>SealedSecret</code> manifest.</p> <ol> <li> <p><em>Change to GitOps apps repository</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$GIT_ROOT</span>/multi-tenancy-gitops-apps
</code></pre></div> <p>This repository maintains application manifests. The private key of our SSH key-pair is an application specific artifact, and therefore it is to be maintained in the application repository.</p> <p>Change to the directory where sealed secrets are stored</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> ace/environments/ci/secrets
</code></pre></div> </li> <li> <p><em>Run the <code>gitops-repo-pk-secret.sh</code> script to generate <code>SealedSecret</code>s for SSH deploy keys</em></p> <p><code>gitops-repo-pk-secret.sh</code> script make use of three environment variables</p> <ul> <li> <p><code>GITOPS_PK_SECRET_NAME</code>: Name of the secret. The name is also used in creating the <code>SealedSecret</code> manifest yaml file</p> </li> <li> <p><code>GIT_BASEURL</code>: Base URL of the git repository. This is needed for the tekton specific annotation on the <code>Secret</code> object. It is also needed to generate the host keys.</p> </li> <li> <p><code>SSH_PRIVATE_KEY_PATH</code>: full path to the private key.</p> </li> </ul> <p>Assuming our private key is kept in <code>$HOME/keys</code> directory, then to generate the <code>SealedSecret</code> manifest, we can execute the script as follows for private key of <code>create-customer</code> deploy key:</p> <div class=highlight><pre><span></span><code><span class=nv>GITOPS_PK_SECRET_NAME</span><span class=o>=</span>create-customer-at-github <span class=se>\</span>
    <span class=nv>GIT_BASEURL</span><span class=o>=</span>github.com <span class=se>\</span>
    <span class=nv>SSH_PRIVATE_KEY_PATH</span><span class=o>=</span><span class=nv>$HOME</span>/keys/create-customer-at-ace-prod-ref-github <span class=se>\</span>
    ./gitops-repo-pk-secret.sh
</code></pre></div> <p>A new file, named <code>git-ssh-pk-create-customer-at-github.yaml</code> will be created on the <code>ace/environments/ci/secrets</code> directory.</p> <div class="admonition note"> <p class=admonition-title>Conventions over configurations</p> <p>Like the previous section, this guide will follow certain naming convention. For example, the private key for our ACE source GitHub repository, <code>create-customer</code> will be stored in a secret named <code>create-customer-at-github</code>. In the later sub-sections, we have scripts that make use of this naming convention. You are free to use any naming conventions, but if you do verify the content of the script before running them.</p> </div> <p><code>SealedSecret</code> CR for private key of <code>ace-infra</code> and <code>multi-tenancy-gitops-apps</code> should have already been installed as part of the completion of Build Configuration section. See <a href=../build-configurations/#create-sealed-secrets>Create sealed secrets</a></p> </li> <li> <p><em>Check git status</em></p> <p>If you check git status with</p> <p><div class=highlight><pre><span></span><code>git status
</code></pre></div> you should be able to confirm that:</p> <div class="no-copy highlight"><pre><span></span><code>On branch up-to-configuration
Your branch is up to date with <span class=s1>&#39;origin/master&#39;</span>.

Untracked files:
  <span class=o>(</span>use <span class=s2>&quot;git add &lt;file&gt;...&quot;</span> to include <span class=k>in</span> what will be committed<span class=o>)</span>
        gitops-repo-pk-secret-create-customer-at-github.yaml

nothing added to commit but untracked files present <span class=o>(</span>use <span class=s2>&quot;git add&quot;</span> to track<span class=o>)</span>
</code></pre></div> </li> <li> <p><em>Commit the <code>SealedSecret</code> manifest to application repository</em></p> <div class=highlight><pre><span></span><code>git add  gitops-repo-pk-secret-create-customer-at-github.yaml
git commit -m <span class=s1>&#39;Add SealedSecret for create-customer private key&#39;</span>
</code></pre></div> </li> <li> <p>Add the <code>SealedSecret</code>s on <code>apps-ace-rest-ci-1</code> ArgoCD application</p> <p>CI/CD related manifests are configure by <code>apps-ace-rest-ci-1</code> ArgoCD application, which is configured by <code>ace/environments/ci/kustomization.yaml</code>. To add the <code>SealedSecret</code> on the cluster, add the following item under <code>resources</code> field:</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets/gitops-repo-pk-secret-create-customer-at-github.yaml</span><span class=w></span>
</code></pre></div> <p>Commit and push the change</p> <div class=highlight><pre><span></span><code>git add .
git commit -m <span class=s1>&#39;Enable sealed secrets for create-customer access&#39;</span>
git push
</code></pre></div> </li> </ol> <div class="admonition note"> <p class=admonition-title><code>SealedSecret</code>s for GitHub access token</p> <p><code>SealedSecret</code> CR for personal access token of the machine user should have already been installed as part of the completion of Build Configuration section. See <a href=../build-configurations/#create-sealed-secrets>Create sealed secrets</a></p> </div> <h3 id=verify-the-secret>Verify the <code>Secret</code><a class=headerlink href=#verify-the-secret title="Permanent link">&para;</a></h3> <p>Open up <code>apps-ace-rest-ci-1</code> on ArgoCD UI:</p> <figure> <p><img alt src=../images/argo-ui-create-customer-sealed-secret.png width=1024> </p> <figcaption>Sealed Secret and Secret of create-customer private key</figcaption> </figure> <p>As you can see, we have a new <strong>SealedSecret</strong> deployed. The SealedSecret operator then decrypted them and created kubernetes <strong>Secret</strong> object (which are owned by the corresponding <strong>SealedSecret</strong> objects).</p> <p>You can also verify that the secret is created from the OCP UI. Go to <strong>Workloads &gt; Secrets</strong>, make sure <code>ci</code> project is selected. Select Label to filter the secrets and put in <code>created-by=pipeline</code> is the Search box:</p> <figure> <p><img alt src=../images/ocp-ui-create-customer-secret.png width=1024> </p> <figcaption>Secret for create customer repository in OpenShift Web UI</figcaption> </figure> <hr> <h2 id=create-pvc>Create PVC<a class=headerlink href=#create-pvc title="Permanent link">&para;</a></h2> <ol> <li> <p><em>Change to CI environment directory</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$GIT_ROOT</span>/multi-tenancy-gitops-apps/ace/environments/ci
</code></pre></div> </li> <li> <p><em>Update kustomization to enable ace-config pvc</em></p> <p>Open <code>kustomization.yaml</code> (<code>$GIT_ROOT/multi-tenancy-gitops-apps/ace/environments/ci/kustomization.yaml</code>) and uncomment:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pvc/ace-integration-server.yaml</span><span class=w></span>
</code></pre></div> </li> <li> <p><em>Commit the and push the change</em></p> <div class=highlight><pre><span></span><code>git add .
git commit -m <span class=s2>&quot;Deploy ace-integration-server pvc&quot;</span>
git push
</code></pre></div> </li> <li> <p><em>Check the deployment of the task in ArgoCD UI</em></p> <p>Under "apps-ace-rest-ci-1" project, you should see that the task has been deployed:</p> <p><figure markdown> <img alt src=../images/argo-ui-ace-integration-server-pvc.png width=1024> <figcaption><code>ace-integration-server</code> PVC synched by ArgoCD</figcaption> </figure></p> </li> <li> <p><em>Check the deployment of the PVC in OpenShift UI</em></p> <p>You can also verify the deploy on OpenShift UI. From <strong>Storage &gt; PersistentVolumeClaims</strong>, make sure Project <code>ci</code> is selected from the drop down menu:</p> <p><figure markdown> <img alt src=../images/ocp-ui-ace-integration-server-pvc.png width=1024> <figcaption><code>ace-integration-server</code> PVC in OpenShift UI</figcaption> </figure></p> <p>wait until the PVC bound.</p> </li> </ol> <hr> <h2 id=deploy-ibm-entitlement-key>Deploy <code>ibm-entitlement-key</code><a class=headerlink href=#deploy-ibm-entitlement-key title="Permanent link">&para;</a></h2> <p>We will make use of ACE server container image which is located in the IBM Cloud Container Registry. You will need an IBM entitlement key to access this registry. We will create a sealedsecret for the entitlement key secret.</p> <ol> <li> <p><em>Object the key</em>*</p> <p>Follow the instruction to copy the entitlement key from <a href=https://myibm.ibm.com/products-services/containerlibrary>Access your container software</a>.</p> </li> <li> <p><em>Change to secret environment directory</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$GIT_ROOT</span>/multi-tenancy-gitops-apps/ace/environments/ci/secrets
</code></pre></div> </li> <li> <p><em>Run the script, <code>ibm-entitled-key-secret.sh</code></em></p> <div class=highlight><pre><span></span><code><span class=nv>IBM_ENTITLEMENT_KEY</span><span class=o>=</span><span class=s2>&quot;&lt;PUT YOUR KEY HERE&gt;&quot;</span> ./ibm-entitlement-key-secret.sh
</code></pre></div> <p>replacing the <code>&lt;PUT YOUR KEY HERE&gt;</code> with the value of your key.</p> <p>this will create a file, <code>ibm-entitlement-key-secret.yaml</code>, which you can verify by</p> <div class=highlight><pre><span></span><code>git status
</code></pre></div> <p>which should display the following:</p> <div class="no-copy highlight"><pre><span></span><code>On branch up-to-configuration
Your branch is up to date with <span class=s1>&#39;origin/master&#39;</span>.

Changes not staged <span class=k>for</span> commit:
<span class=o>(</span>use <span class=s2>&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class=o>)</span>
<span class=o>(</span>use <span class=s2>&quot;git restore &lt;file&gt;...&quot;</span> to discard changes <span class=k>in</span> working directory<span class=o>)</span>
        modified:   ibm-entitlement-key-secret.yaml

no changes added to commit <span class=o>(</span>use <span class=s2>&quot;git add&quot;</span> and/or <span class=s2>&quot;git commit -a&quot;</span><span class=o>)</span>
</code></pre></div> </li> <li> <p><em>Add and commit the sealed secret</em></p> <div class=highlight><pre><span></span><code>git add ibm-entitlement-key-secret.yaml
git commit -m <span class=s2>&quot;Add IBM entitlement key&quot;</span>
</code></pre></div> </li> <li> <p><em>Update kustomization to enable IBM entitlement key</em></p> <p>Open <code>kustomization.yaml</code> (<code>$GIT_ROOT/multi-tenancy-gitops-apps/ace/environments/ci/kustomization.yaml</code>) and add:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets/ibm-entitlement-key-secret.yaml</span><span class=w></span>
</code></pre></div> </li> <li> <p><em>Commit and push the change</em></p> <div class=highlight><pre><span></span><code>git add .
git commit -m <span class=s2>&quot;Deploy IBM entitlment key&quot;</span>
git push
</code></pre></div> </li> <li> <p><em>Verify that the key is deployed</em></p> <p><figure markdown> <img alt src=../images/argo-ui-ibm-entitlement-key-secret.png width=1024> <figcaption><code>ibm-entitlement-key</code> on ArgoCD UI</figcaption> </figure></p> </li> </ol> <hr> <h2 id=add-key-to-service-account>Add key to service account<a class=headerlink href=#add-key-to-service-account title="Permanent link">&para;</a></h2> <p>Our pipeline by defaults run under <code>pipeline</code> service account. In order for our pipeline task, <code>build-is-image</code> to access the ACE server container image from IBM Cloud Container Registry, the <code>ibm-entitlement-key</code> secret needed to added in the service account.</p> <ol> <li> <p><em>Edit the <code>pipeline</code> service account</em></p> <div class=highlight><pre><span></span><code>oc edit sa pipeline -n ci
</code></pre></div> </li> <li> <p><em>Add <code>ibm-entitlement-key</code> as a new secret</em></p> <p>Scroll to the bottom, where you would see something like</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>secrets</span><span class=p>:</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pipeline-token-XXXXX</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pipeline-dockercfg-XXXXX</span><span class=w></span>
</code></pre></div> <p>add the <code>ibm-entitlement-key</code> secret</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>secrets</span><span class=p>:</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pipeline-token-XXXXX</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pipeline-dockercfg-XXXXX</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ibm-entitlement-key</span><span class=w></span>
</code></pre></div> <p>save and exit the editor.</p> </li> <li> <p><em>Verify that the secret has been added</em></p> <p>Run </p> <div class=highlight><pre><span></span><code>oc get sa pipeline -n ci -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.secrets[*].name}{&quot;\n&quot;}&#39;</span>
</code></pre></div> <p>and you should see</p> <div class="no-copy highlight"><pre><span></span><code>pipeline-token-XXXXX pipeline-dockercfg-XXXXX ibm-entitlement-key
</code></pre></div> </li> </ol> <hr> <h2 id=deploy-ace-dashboard>Deploy ACE Dashboard<a class=headerlink href=#deploy-ace-dashboard title="Permanent link">&para;</a></h2> <p>Although not strictly necessary, the dashboard is a nice UI to verify your Integration Server deployment and view the metadata.</p> <p>The Dashboard requires to pull down images from IBM Cloud Container Registry. Therefore, we will also need to deploy <code>ibm-entitlement-key</code> secret.</p> <h3 id=deploy-ibm-entitlement-key-on-the-dev-namespace>Deploy <code>ibm-entitlement-key</code> on the dev namespace<a class=headerlink href=#deploy-ibm-entitlement-key-on-the-dev-namespace title="Permanent link">&para;</a></h3> <ol> <li> <p><em>Change to base secrets directory</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$GIT_ROOT</span>/multi-tenancy-gitops-apps/ace/environments/base/secrets
</code></pre></div> </li> <li> <p><em>Run the script, <code>ibm-entitled-key-secret.sh</code></em></p> <div class=highlight><pre><span></span><code><span class=nv>IBM_ENTITLEMENT_KEY</span><span class=o>=</span><span class=s2>&quot;&lt;PUT YOUR KEY HERE&gt;&quot;</span> ./ibm-entitlement-key-secret.sh
</code></pre></div> <p>replacing the <code>&lt;PUT YOUR KEY HERE&gt;</code> with the value of your key.</p> <p>this will create a file, <code>ibm-entitlement-key-secret.yaml</code>, which you can verify by</p> <div class=highlight><pre><span></span><code>git status
</code></pre></div> <p>which should display the following:</p> <div class="no-copy highlight"><pre><span></span><code>On branch up-to-configuration
Your branch is up to date with <span class=s1>&#39;origin/master&#39;</span>.

Changes not staged <span class=k>for</span> commit:
<span class=o>(</span>use <span class=s2>&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class=o>)</span>
<span class=o>(</span>use <span class=s2>&quot;git restore &lt;file&gt;...&quot;</span> to discard changes <span class=k>in</span> working directory<span class=o>)</span>
        modified:   ibm-entitlement-key-secret.yaml

no changes added to commit <span class=o>(</span>use <span class=s2>&quot;git add&quot;</span> and/or <span class=s2>&quot;git commit -a&quot;</span><span class=o>)</span>
</code></pre></div> </li> <li> <p><em>Add and commit the sealed secret</em></p> <div class=highlight><pre><span></span><code>git add ibm-entitlement-key-secret.yaml
git commit -m <span class=s2>&quot;Add IBM entitlement key&quot;</span>
</code></pre></div> </li> <li> <p><em>Update kustomization to add IBM entitlement key</em></p> <p>Open <code>kustomization.yaml</code> (<code>$GIT_ROOT/multi-tenancy-gitops-apps/ace/environments/base/kustomization.yaml</code>) and add:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets/ibm-entitlement-key-secret.yaml</span><span class=w></span>
</code></pre></div> </li> <li> <p><em>Commit and push the change</em></p> <div class=highlight><pre><span></span><code>git add .
git commit -m <span class=s2>&quot;Deploy IBM entitlment key&quot;</span>
git push
</code></pre></div> </li> <li> <p><em>Verify that the key is deployed</em></p> <p>On the ArgoCD application, <code>apps-ace-rest-dev-1</code>, you should now see the secret</p> <p><figure markdown> <img alt src=../images/argo-ui-ibm-entitlement-key.png width=1024> <figcaption><code>ibm-entitlement-key</code> on ArgoCD UI</figcaption> </figure></p> </li> </ol> <h3 id=deploy-dashboard>Deploy Dashboard<a class=headerlink href=#deploy-dashboard title="Permanent link">&para;</a></h3> <ol> <li> <p><em>Change to base environment directory</em></p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$GIT_ROOT</span>/multi-tenancy-gitops-apps/ace/environments/base
</code></pre></div> </li> <li> <p><em>Update kustomization to add ACE dashboard</em></p> <p>Open <code>kustomization.yaml</code> (<code>$GIT_ROOT/multi-tenancy-gitops-apps/ace/environments/base/kustomization.yaml</code>) and add:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">dashboard/ace-dashboard.yaml</span><span class=w></span>
</code></pre></div> </li> <li> <p><em>Commit and push the change</em></p> <div class=highlight><pre><span></span><code>git add .
git commit -m <span class=s2>&quot;Deploy ACE Dashboard&quot;</span>
git push
</code></pre></div> </li> <li> <p><em>Verify that the Dashboard is deployed</em></p> <p>On <code>apps-ace-rest-dev-1</code> argo application application</p> <p><figure markdown> <img alt src=../images/argo-ui-ace-dashboard.png width=1024> <figcaption>ACE Dashboard on ArgoCD UI</figcaption> </figure></p> <p>The URL for the dashboard can be found on the deployed Dashboard CR:</p> <div class=highlight><pre><span></span><code>oc get dashboard ace-dashboard -n dev -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.status.endpoints[0].uri}{&quot;\n&quot;}&#39;</span>
</code></pre></div> <p>It uses the same username/password as that of the Platform Navigator. The user name is <code>admin</code> and you can extract the password with:</p> <div class=highlight><pre><span></span><code>oc extract secret/ibm-iam-bindinfo-platform-auth-idp-credentials --keys<span class=o>=</span>admin_password -n ibm-common-services --to<span class=o>=</span>-
</code></pre></div> <p>Once you log in, you can see the Dashboard:</p> <p><figure markdown> <img alt src=../images/ace-dashboard-ui.png width=1024> <figcaption>ACE Dashboard</figcaption> </figure></p> <p>Currently it has no integration server.</p> </li> </ol> <hr> <h2 id=run-the-pipeline>Run the pipeline<a class=headerlink href=#run-the-pipeline title="Permanent link">&para;</a></h2> <p>Now that all the tasks, pipeline, and required resources are deployed, we can run the pipeline. We do this by creating a <strong>PipelineRun</strong> resource which refers to a <strong>Pipeline</strong> resource. A <strong>PipelineRun</strong> resource is a running instance of a <strong>Pipeline</strong>.</p> <p>A <strong>PipelineRun</strong> instantiates a <strong>Pipeline</strong> by setting its parameters and workspaces. Some of the parameters have default values (mostly based on values used in this tutorial), but they can be overridden when creating the <strong>PipelineRun</strong> instance.</p> <p>The pipeline has the following parameters:</p> <table> <thead> <tr> <th>Parameter</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>is-source-repo-url</code></td> <td>URL of the ACE application source repository. In this tutorial we are making use of SSH based URL.</td> </tr> <tr> <td><code>is-infra-repo-url</code></td> <td>URL of the Infrastructure repository. In this tutorial we are making use of SSH based URL.</td> </tr> <tr> <td><code>git-ops-repo-url</code></td> <td>URL of the GitOps repository. In this tutorial we are making use of SSH based URL.</td> </tr> <tr> <td><code>gitops-apps-repo-full-name</code></td> <td>Full repository name of the GitOps repository</td> </tr> <tr> <td><code>github-pr-title</code></td> <td>Title of the pull request. Default is set to a string with the name of the pipeline run. Feel free to update it.</td> </tr> <tr> <td><code>github-pr-body</code></td> <td>Body of the pull request. Default is set to a string with the name of the pipeline run. Feel free to update it.</td> </tr> <tr> <td><code>github-pr-token-secret-name</code></td> <td>Name of the secret that contains the access token of the machine user the pipeline will use to make the pull request. Default is <code>cicd-acme</code> as that's how we set up the secret earlier.</td> </tr> </tbody> </table> <p>We will need to set the parameters to the appropriate values. If you are following this tutorial, you would need set the <code>is-source-repo-url</code>, <code>is-infra-repo-url</code> , <code>git-ops-repo-url</code> and <code>gitops-apps-repo-full-name</code> as they do not have a default. Rest of the parameters you can leave them as default for now.</p> <p>On the other hand, the pipeline has the following workspaces:</p> <table> <thead> <tr> <th>Workspace</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>shared-workspace</code></td> <td>The PVC where the <code>git-clone</code> task will clone the repositories and other task make use of them.</td> </tr> <tr> <td><code>ace-source-repo-secret</code></td> <td>The secret that contains the SSH private key to authenticate with ACE application source repository.</td> </tr> <tr> <td><code>ace-infra-repo-secret</code></td> <td>The secret that contains the SSH private key to authenticate with Infrastructure repository.</td> </tr> <tr> <td><code>gitops-repo-secret</code></td> <td>The secret that contains the SSH private key to authenticate with GitOps repository.</td> </tr> </tbody> </table> <p>For the workspaces, </p> <ul> <li> <p>For <code>shared-workspace</code> we will set it to PVC, <code>ace-integration-server</code></p> </li> <li> <p>For <code>ace-source-repo-secret</code> we will set it to <strong>Secret</strong>, <code>create-customer-at-github</code></p> </li> <li> <p>For <code>ace-infra-repo-secret</code> we will set it to <strong>Secret</strong>, <code>ace-infra-at-github</code></p> </li> <li> <p>For <code>gitops-repo-secret</code> we will set it to <strong>Secret</strong>, <code>multi-tenancy-gitops-repo-at-github</code></p> </li> </ul> <p>One way to instantiates a <strong>Pipeline</strong> is to use the OpenShift Web UI. When running the Configuration pipeline, we used this method. See <a href=../build-configurations/#run-the-pipeline>Run the pipeline</a></p> <p><a id=tkn></a>The other method is to use <code>tkn</code>. We will use that in this section</p> <ol> <li> <p><em>Install <code>tkn</code> CLI</em></p> <p>On MacOS you can use Homebrew to install <code>tkn</code></p> <div class=highlight><pre><span></span><code>brew install tektoncd-cli
</code></pre></div> <p>For other operating systems, see <a href=https://github.com/tektoncd/cli><code>tkn</code></a></p> </li> <li> <p><em>Change to pipeline directory</em></p> <p>Issue the following command to change to your GitOps repository and the pipeline directory</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$GIT_ROOT</span>/multi-tenancy-gitops-apps/ace/environments/ci/pipelines
</code></pre></div> </li> <li> <p><em>Run the script <code>run-ace-is-pipeline.sh</code></em></p> <p>The script, <code>run-ace-is-pipeline.sh</code>,</p> <p><a id=run-ace-is-pipeline.sh></a> <div class="no-copy highlight"><pre><span></span><code><span class=ch>#!/usr/bin/env bash</span>

<span class=k>if</span> <span class=o>[</span> -z <span class=si>${</span><span class=nv>GIT_ORG</span><span class=si>}</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span> <span class=nb>echo</span> <span class=s2>&quot;Please set GIT_ORG when running script&quot;</span><span class=p>;</span> <span class=nb>exit</span> <span class=m>1</span><span class=p>;</span> <span class=k>fi</span>
<span class=k>if</span> <span class=o>[</span> -z <span class=si>${</span><span class=nv>SOURCE_REPO</span><span class=si>}</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span> <span class=nb>echo</span> <span class=s2>&quot;Please set SOURCE_REPO when running script&quot;</span><span class=p>;</span> <span class=nb>exit</span> <span class=m>1</span><span class=p>;</span> <span class=k>fi</span>

tkn -n ci pipeline start <span class=se>\</span>
    ace-integration-server <span class=se>\</span>
    --param is-source-repo-url<span class=o>=</span>git@github.com:<span class=si>${</span><span class=nv>GIT_ORG</span><span class=si>}</span>/<span class=si>${</span><span class=nv>SOURCE_REPO</span><span class=si>}</span>.git <span class=se>\</span>
    --param is-infra-repo-url<span class=o>=</span>git@github.com:<span class=si>${</span><span class=nv>GIT_ORG</span><span class=si>}</span>/ace-infra.git <span class=se>\</span>
    --param git-ops-repo-url<span class=o>=</span>git@github.com:<span class=si>${</span><span class=nv>GIT_ORG</span><span class=si>}</span>/multi-tenancy-gitops-apps.git <span class=se>\</span>
    --param gitops-apps-repo-full-name<span class=o>=</span><span class=si>${</span><span class=nv>GIT_ORG</span><span class=si>}</span>/multi-tenancy-gitops-apps <span class=se>\</span>
    --workspace <span class=nv>name</span><span class=o>=</span>shared-workspace,claimName<span class=o>=</span>ace-integration-server <span class=se>\</span>
    --workspace <span class=nv>name</span><span class=o>=</span>ace-infra-repo-secret,secret<span class=o>=</span>ace-infra-at-github <span class=se>\</span>
    --workspace <span class=nv>name</span><span class=o>=</span>gitops-repo-secret,secret<span class=o>=</span>multi-tenancy-gitops-apps-at-github <span class=se>\</span>
    --workspace <span class=nv>name</span><span class=o>=</span>ace-source-repo-secret,secret<span class=o>=</span><span class=si>${</span><span class=nv>SOURCE_REPO</span><span class=si>}</span>-at-github
</code></pre></div></p> <p>depends on two parameters, <code>GIT_ORG</code> and <code>SOURCE_REPO</code>. The script sets all the parameters and workspaces values when issuing <code>tkn</code> command to start the pipeline. If you are following this guide as is, due to our naming conventions, you would not need to change the script.</p> <p>Nevertheless, review the script to make sure they have right values. </p> <p>To start the pipeline, issue the following</p> <div class=highlight><pre><span></span><code><span class=nv>SOURCE_REPO</span><span class=o>=</span>create-customer ./run-ace-is-pipeline.sh
</code></pre></div> <div class="admonition note"> <p class=admonition-title>what about <code>GIT_ORG</code>?</p> <p>It is already part of the shell environment, as we set it up earlier.</p> </div> <p>You will get an output like the following:</p> <div class="no-copy highlight"><pre><span></span><code>PipelineRun started: ace-integration-server-run-w4x8d

In order to track the PipelineRun progress run:
tkn pipelinerun logs ace-integration-server-run-w4x8d -f -n ci
</code></pre></div> <p>You can use <code>tkn</code> CLI to check the status of the pipeline, with <code>tkn pipelinerun describe</code> command. For example, for the above:</p> <div class="no-copy highlight"><pre><span></span><code>tkn pipelinerun describe ace-integration-server-run-w4x8d -n ci
</code></pre></div> <p>You will see the various task running, as well as the parameters and workspaces that have been set:</p> <div class="no-copy highlight"><pre><span></span><code>Name:              ace-integration-server-run-w4x8d
Namespace:         ci
Pipeline Ref:      ace-integration-server
Service Account:   pipeline
Timeout:           1h0m0s
Labels:
app.kubernetes.io/instance<span class=o>=</span>apps-ace-rest-ci-1
tekton.dev/pipeline<span class=o>=</span>ace-integration-server

  Status

STARTED         DURATION   STATUS
<span class=m>7</span> minutes ago   ---        Running

 Resources

No resources

 Params

NAME                           VALUE
 git-ops-repo-url             git@github.com:ace-prod-ref/multi-tenancy-gitops-apps.git
 gitops-apps-repo-full-name   ace-prod-ref/multi-tenancy-gitops-apps
 is-infra-repo-url            git@github.com:ace-prod-ref/ace-infra.git
 is-source-repo-url           git@github.com:ace-prod-ref/create-customer.git

 Results

No results

 Workspaces

NAME                       SUB PATH   WORKSPACE BINDING
 shared-workspace         ---        PersistentVolumeClaim <span class=o>(</span><span class=nv>claimName</span><span class=o>=</span>ace-integration-server<span class=o>)</span>
 ace-infra-repo-secret    ---        Secret <span class=o>(</span><span class=nv>secret</span><span class=o>=</span>ace-infra-at-github<span class=o>)</span>
 gitops-repo-secret       ---        Secret <span class=o>(</span><span class=nv>secret</span><span class=o>=</span>multi-tenancy-gitops-apps-at-github<span class=o>)</span>
 ace-source-repo-secret   ---        Secret <span class=o>(</span><span class=nv>secret</span><span class=o>=</span>create-customer-at-github<span class=o>)</span>

  Taskruns

NAME                                                            TASK NAME              STARTED         DURATION     STATUS
 ace-integration-server-run-csvfx-build-is-image-7v75z         build-is-image         <span class=m>6</span> minutes ago   ---          Running
 ace-integration-server-run-csvfx-build-bar-rnwb2              build-bar              <span class=m>6</span> minutes ago   <span class=m>14</span> seconds   Succeeded
 ace-integration-server-run-csvfx-resolve-props-cmgps          resolve-props          <span class=m>6</span> minutes ago   <span class=m>30</span> seconds   Succeeded
 ace-integration-server-run-csvfx-clone-gitops-repo-vmrmk      clone-gitops-repo      <span class=m>6</span> minutes ago   <span class=m>13</span> seconds   Succeeded
 ace-integration-server-run-csvfx-clone-is-infra-repo-tr9dk    clone-is-infra-repo    <span class=m>6</span> minutes ago   <span class=m>10</span> seconds   Succeeded
 ace-integration-server-run-csvfx-clone-is-source-repo-xjjkt   clone-is-source-repo   <span class=m>6</span> minutes ago   <span class=m>12</span> seconds   Succeeded
</code></pre></div> <details class=tip> <summary>On OCP UI</summary> <p>You can also check the pipeline run from OpenShift Web Console. Navigate to <strong>Pipelines &gt; Pipelines</strong>, and click on the pipeline run link for the pipeline, <code>ace-integration-server</code>:</p> <p><figure markdown> <img alt src=../images/ocp-ui-pipeline-run-ace-is.png width=1024> <figcaption>Pipeline run in OpenShift Web Console</figcaption> </figure></p> <p><figure markdown> <img alt src=../images/ocp-ui-pipeline-run-ace-is-status.png width=1024> <figcaption>Pipeline run status in OpenShift Web Console</figcaption> </figure></p> </details> <p>Once the pipeline run finishes, a pull request will be created for the to add the <code>IntegrationServer</code> CR on <code>multi-tenancy-gitops-apps</code> repository.</p> <p><figure markdown> <img alt src=../images/github-pull-request-ace-is.png width=1024> <figcaption>Pull request for ACE integration server</figcaption> </figure></p> <p>And if you check the commits within the pull request, you will see creation of the <code>IntegrationServer</code> CR and activating in <code>kustomization.yaml</code></p> <p><figure markdown> <img alt src=../images/github-pull-request-commit-ace-is.png width=1024> <figcaption>Commit in pull request</figcaption> </figure></p> </li> <li> <p><em>Merge the pull request</em></p> <p>From Github Web UI merge the pull request.</p> </li> <li> <p><em>Verify ArgoCD syncs the <code>IntegrationServer</code> CR</em></p> <p>On on the ArgoCD application, <code>apps-ace-rest-dev-1</code>, you should see the <code>IntegrationServer</code> CR:</p> <p><figure markdown> <img alt src=../images/argo-ui-integration-server.png width=1024> <figcaption><code>IntegrationServer</code> CR on ArgoCD</figcaption> </figure></p> </li> <li> <p><em>Verify the integration server in ACE Dashboard</em></p> <p>On ACE Dashboard, you will now see a new Integration Server: </p> <p><figure markdown> <img alt src=../images/ace-dashboard-integration-server.png width=1024> <figcaption>Integration server in ACE Dashboard</figcaption> </figure></p> <p><figure markdown> <img alt src=../images/createcustomer-api-dashboard.png width=1024> <figcaption><code>createcustomer</code> API on ACE dashboard</figcaption> </figure></p> <p>You can explore the API on the dashboard. The API will be presented based on the OpenAPI document, currently deployed as part of the <code>createcustomer</code> ACE server. </p> <p>Open the API and navigate to API method, <code>POST /createcustomer</code>, and click on <em>Try it</em> tab</p> <p><figure markdown> <img alt src=../images/ace-dashboard-create-customer-try.png width=1024> <figcaption></figcaption> </figure></p> <p>You can write your own payload, or simply generate one. Click <strong>Generate</strong> to generate a payload:</p> <p><figure markdown> <img alt src=../images/ace-dashboard-generated-wrong.png width=1024> <figcaption>Incorrect phone number generated</figcaption> </figure></p> <p><a name=wrong_format></a> Notice the phone number format. This is not the format our SOAP server accepts. If we send this request, our SOAP server will send an error back. For instance:</p> <p><figure markdown> <img alt src=../images/ace-dashboard-create-customer-try-wrong-ph.png width=1024> <figcaption>Incorrect phone number format</figcaption> </figure></p> <div class="admonition note"> <p class=admonition-title>Updating OpenAPI definition for phone number</p> <p>We will fix the generation of the phone number in the right format in the next section.</p> </div> <p>You can send a valid request but the setting the phone number in the right format:</p> <p><figure markdown> <img alt src=../images/ace-dashboard-create-customer-try-correct-ph.png width=1024> <figcaption>Valid request</figcaption> </figure></p> </li> </ol> <p>This concludes this section.</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <!-- Footer --> <footer class=md-footer> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../build-configurations/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Build Configuration </div> </div> </a> <!-- Link to next page --> <a href=../continuous-update/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Continuous Update </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright  2021 Cloud Pak Production Deployment Guides </div> </div> <div class=md-footer-social> <a href=https://github.ibm.com/cloudpakbringup/deployment-guides target=_blank rel=noopener title="Production Deployment Guides on Github Enterprise" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"> <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"> </path> </svg> </a> <a href=https://ibm-cloud.slack.com/archives/C02CQ6M2D2R target=_blank rel=noopener title=Slack class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"> <path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"> </path> </svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tracking", "navigation.tabs.sticky", "navigation.top", "navigation.sections"], "search": "../../../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../../../assets/javascripts/bundle.748e2769.min.js></script> </body> </html>