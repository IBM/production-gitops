<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta name=author content="Cloud Pak Production Deployment Guides development team"><link rel=icon href=../../../../../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.1.1"><title>Promote from staging to prod - Cloud Pak Production Deployment Guides</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.23b6d78a.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.e6a45f82.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CIBM+Plex+Mono&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><link rel=stylesheet href=../../../../../css/extra.css><link rel=stylesheet href=../../../../../css/toolkit-code.css><script>__md_scope=new URL("../../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q0FLL49YN3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&gtag("event","search",{search_term:this.value})}),"undefined"!=typeof location$&&location$.subscribe(function(e){gtag("config","G-Q0FLL49YN3",{page_path:e.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q0FLL49YN3"></script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="Cloud Pak Production Deployment Guides - Promote from staging to prod"><meta property=og:description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta property=og:url content=None><meta property=og:image content=assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#promoting-from-staging-to-prod-environment class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../.. title="Cloud Pak Production Deployment Guides" class="md-header__button md-logo" aria-label="Cloud Pak Production Deployment Guides" data-md-component=logo> <img src=../../../../../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Cloud Pak Production Deployment Guides </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Promote from staging to prod </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../../../overview/overview/ class=md-tabs__link> Production Considerations </a> </li> <li class=md-tabs__item> <a href=../../../../../quickstart/overview/ class=md-tabs__link> Quick Start Demos </a> </li> <li class=md-tabs__item> <a href=../../../../guides-overview/ class="md-tabs__link md-tabs__link--active"> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../../../infrastructure/ad/ class=md-tabs__link> References </a> </li> <li class=md-tabs__item> <a href=../../../../../overview/whats-new/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!-- Determine class according to configuration --> <!-- Main navigation --> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <!-- Site title --> <!--
  <label class="md-nav__title" for="__drawer">
    <a
      href="../../../../.."
      title="Cloud Pak Production Deployment Guides"
      class="md-nav__button md-logo"
      aria-label="Cloud Pak Production Deployment Guides"
      data-md-component="logo"
    >
      
  <img src="../../../../../images/cloudnativetoolkit.png" alt="logo">

    </a>
    Cloud Pak Production Deployment Guides
  </label>
--> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> <!-- Render item list --> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Production Considerations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Production Considerations" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Production Considerations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../overview/overview/ class=md-nav__link> Objective </a> </li> <li class=md-nav__item> <a href=../../../../../gitops/personas/ class=md-nav__link> Personas </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> DevOps Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="DevOps Automation" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> DevOps Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../automation/why-automate/ class=md-nav__link> Why Automate? </a> </li> <li class=md-nav__item> <a href=../../../../../gitops/structure/ class=md-nav__link> GitOps Structure </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> Golden Topologies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Golden Topologies" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Golden Topologies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-azure/ class=md-nav__link> Azure Unmanaged </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-aro/ class=md-nav__link> Azure Managed (ARO) </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-aws/ class=md-nav__link> AWS Unmanaged </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-rosa/ class=md-nav__link> AWS Managed (ROSA) </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-roks/ class=md-nav__link> IBM Cloud Managed (ROKS) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5> Cloud Pak <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak" data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Cloud Pak </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_1 type=checkbox id=__nav_2_5_1> <label class=md-nav__link for=__nav_2_5_1> App Connect Enterprise <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="App Connect Enterprise" data-md-level=3> <label class=md-nav__title for=__nav_2_5_1> <span class="md-nav__icon md-icon"></span> App Connect Enterprise </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ace/overview/architecture/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_2 type=checkbox id=__nav_2_5_2> <label class=md-nav__link for=__nav_2_5_2> MQ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MQ data-md-level=3> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> MQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../../security/information/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../promote-environments/ class=md-nav__link> Promoting across environments </a> </li> <li class=md-nav__item> <a href=../../high-availability/overview/ class=md-nav__link> High Availability </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3 type=checkbox id=__nav_2_5_3> <label class=md-nav__link for=__nav_2_5_3> API Connect <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="API Connect" data-md-level=3> <label class=md-nav__title for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> API Connect </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3_1 type=checkbox id=__nav_2_5_3_1> <label class=md-nav__link for=__nav_2_5_3_1> Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Architecture data-md-level=4> <label class=md-nav__title for=__nav_2_5_3_1> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/architecture/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> <li class=md-nav__item> <a href=../../../apic/architecture/multi-cloud/ class=md-nav__link> Multi-cloud </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../apic/security/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../../apic/high-availability/overview/ class=md-nav__link> High Availability </a> </li> <li class=md-nav__item> <a href=../../../apic/disaster-recovery/overview/ class=md-nav__link> Disaster Recovery </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_4 type=checkbox id=__nav_2_5_4> <label class=md-nav__link for=__nav_2_5_4> Automation Decision Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Automation Decision Services" data-md-level=3> <label class=md-nav__title for=__nav_2_5_4> <span class="md-nav__icon md-icon"></span> Automation Decision Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/ads/architecture/ads/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/architecture/ibm-cloud/ class=md-nav__link> Process Mining </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_6 type=checkbox id=__nav_2_5_6> <label class=md-nav__link for=__nav_2_5_6> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=3> <label class=md-nav__title for=__nav_2_5_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/cpdbase/overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_6_2 type=checkbox id=__nav_2_5_6_2> <label class=md-nav__link for=__nav_2_5_6_2> Base CP <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Base CP" data-md-level=4> <label class=md-nav__title for=__nav_2_5_6_2> <span class="md-nav__icon md-icon"></span> Base CP </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/cpdbase/overview/cpd-overview/ class=md-nav__link> Overview </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_6_3 type=checkbox id=__nav_2_5_6_3> <label class=md-nav__link for=__nav_2_5_6_3> Watson Studio <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Studio" data-md-level=4> <label class=md-nav__title for=__nav_2_5_6_3> <span class="md-nav__icon md-icon"></span> Watson Studio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/watsonstudio/overview/cpd-ws-overview/ class=md-nav__link> Overview </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_6_4 type=checkbox id=__nav_2_5_6_4> <label class=md-nav__link for=__nav_2_5_6_4> Watson Knowledge Catalog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Knowledge Catalog" data-md-level=4> <label class=md-nav__title for=__nav_2_5_6_4> <span class="md-nav__icon md-icon"></span> Watson Knowledge Catalog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/watsonkc/overview/cpd-wkc-overview/ class=md-nav__link> Overview </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_6_5 type=checkbox id=__nav_2_5_6_5> <label class=md-nav__link for=__nav_2_5_6_5> Data Virtualization <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Data Virtualization" data-md-level=4> <label class=md-nav__title for=__nav_2_5_6_5> <span class="md-nav__icon md-icon"></span> Data Virtualization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/datavirt/overview/cpd-dv-overview/ class=md-nav__link> Overview </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_6_6 type=checkbox id=__nav_2_5_6_6> <label class=md-nav__link for=__nav_2_5_6_6> Spectrum Protect Plus <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Spectrum Protect Plus" data-md-level=4> <label class=md-nav__title for=__nav_2_5_6_6> <span class="md-nav__icon md-icon"></span> Spectrum Protect Plus </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/spplus/overview/spp-overview/ class=md-nav__link> Overview </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Quick Start Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Quick Start Demos" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Quick Start Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cntk/ class=md-nav__link> Cloud Native Toolkit </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-ace/ class=md-nav__link> ACE (CP4I) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-mq/ class=md-nav__link> MQ (CP4I) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4s/ class=md-nav__link> Security (CP4S) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-apic/ class=md-nav__link> APIC (CP4I) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-process-mining/ class=md-nav__link> Process Mining (CP4BA) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d/ class=md-nav__link> Cloud Pak for Data </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d-ws/ class=md-nav__link> Watson Studio (CP4D) </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-agent/ class=md-nav__link> Instana Agent </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../guides-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Infrastructure <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Infrastructure data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/infra-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_2 type=checkbox id=__nav_4_2_2> <label class=md-nav__link for=__nav_4_2_2> Managed Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Managed Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> Managed Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/roks/ class=md-nav__link> IBM ROKS </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/rosa/ class=md-nav__link> Amazon ROSA </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/aro/ class=md-nav__link> Microsoft ARO </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_3 type=checkbox id=__nav_4_2_3> <label class=md-nav__link for=__nav_4_2_3> Unmanaged Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Unmanaged Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> Unmanaged Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/aws/ class=md-nav__link> Amazon AWS </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/azure/ class=md-nav__link> Microsoft Azure </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/restricted-networks/ class=md-nav__link> Restricted Networks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3 checked> <label class=md-nav__link for=__nav_4_3> Cloud Pak <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Cloud Pak </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1 type=checkbox id=__nav_4_3_1> <label class=md-nav__link for=__nav_4_3_1> ACE <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=ACE data-md-level=3> <label class=md-nav__title for=__nav_4_3_1> <span class="md-nav__icon md-icon"></span> ACE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ace/overview/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../ace/overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_3 type=checkbox id=__nav_4_3_1_3> <label class=md-nav__link for=__nav_4_3_1_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ace/cluster-create/ibm-setup/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_4 type=checkbox id=__nav_4_3_1_4> <label class=md-nav__link for=__nav_4_3_1_4> Configure the Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the Cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_4> <span class="md-nav__icon md-icon"></span> Configure the Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ace/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps, Tekton & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../ace/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> <li class=md-nav__item> <a href=../../../ace/cluster-config/services/ class=md-nav__link> Deploying Services </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../ace/cloud-native-example/example/ class=md-nav__link> Cloud Native Example </a> </li> <li class=md-nav__item> <a href=../../../ace/deploy-backend-service/deploy-backend-service/ class=md-nav__link> Deploy Backend Service </a> </li> <li class=md-nav__item> <a href=../../../ace/environment-promotion/promoting-environments/ class=md-nav__link> Environment Promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2 type=checkbox id=__nav_4_3_2 checked> <label class=md-nav__link for=__nav_4_3_2> MQ <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MQ data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> MQ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/this-guide/ class=md-nav__link> The MQ tutorial </a> </li> <li class=md-nav__item> <a href=../../overview/architecture/ class=md-nav__link> Target architecture </a> </li> <li class=md-nav__item> <a href=../../cluster-create/ibm-setup/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_4 type=checkbox id=__nav_4_3_2_4> <label class=md-nav__link for=__nav_4_3_2_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../cluster-config/services/ class=md-nav__link> Add services </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_5 type=checkbox id=__nav_4_3_2_5> <label class=md-nav__link for=__nav_4_3_2_5> Build Queue Manager <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build Queue Manager" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_5> <span class="md-nav__icon md-icon"></span> Build Queue Manager </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../qmgr-pipeline/topic1/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../qmgr-pipeline/topic2/ class=md-nav__link> Running the pipeline </a> </li> <li class=md-nav__item> <a href=../../qmgr-pipeline/topic3/ class=md-nav__link> Deploying and using </a> </li> <li class=md-nav__item> <a href=../../qmgr-pipeline/topic4/ class=md-nav__link> Continuous updates </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_6 type=checkbox id=__nav_4_3_2_6> <label class=md-nav__link for=__nav_4_3_2_6> Build MQ application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build MQ application" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_6> <span class="md-nav__icon md-icon"></span> Build MQ application </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../app-pipeline/topic1/ class=md-nav__link> Sample application </a> </li> <li class=md-nav__item> <a href=../../app-pipeline/topic2/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../app-pipeline/topic3/ class=md-nav__link> Managing an application change </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_7 type=checkbox id=__nav_4_3_2_7 checked> <label class=md-nav__link for=__nav_4_3_2_7> Environment Promotion <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Environment Promotion" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_7> <span class="md-nav__icon md-icon"></span> Environment Promotion </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../promoting-environments-dev-stage/ class=md-nav__link> Promote from dev to staging </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Promote from staging to prod <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Promote from staging to prod </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#pre-requisites class=md-nav__link> Pre-requisites </a> </li> <li class=md-nav__item> <a href=#access-the-promotion-pipeline class=md-nav__link> Access the promotion pipeline </a> </li> <li class=md-nav__item> <a href=#run-the-promotion-pipeline class=md-nav__link> Run the promotion pipeline </a> <nav class=md-nav aria-label="Run the promotion pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#queue-manager class=md-nav__link> Queue Manager </a> </li> <li class=md-nav__item> <a href=#mq-sample-application class=md-nav__link> MQ Sample Application </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#explore-the-promotion-pipeline class=md-nav__link> Explore the promotion pipeline </a> </li> <li class=md-nav__item> <a href=#activate-argocd-applications class=md-nav__link> Activate ArgoCD Applications </a> </li> <li class=md-nav__item> <a href=#review-the-resultant-gitops-application-folders class=md-nav__link> Review the resultant GitOps application folders </a> </li> <li class=md-nav__item> <a href=#examine-the-activated-argocd-applications class=md-nav__link> Examine the activated ArgoCD applications </a> <nav class=md-nav aria-label="Examine the activated ArgoCD applications"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#queue-manager_1 class=md-nav__link> Queue Manager </a> </li> <li class=md-nav__item> <a href=#mq-sample-application_1 class=md-nav__link> MQ Sample Application </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#validate-the-queue-manager class=md-nav__link> Validate the Queue Manager </a> </li> <li class=md-nav__item> <a href=#validate-the-application class=md-nav__link> Validate the Application </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../automate-promotion/ class=md-nav__link> Automate promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_8 type=checkbox id=__nav_4_3_2_8> <label class=md-nav__link for=__nav_4_3_2_8> Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Security data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_8> <span class="md-nav__icon md-icon"></span> Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../security/handson/mtls/ class=md-nav__link> Secure data in motion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_9 type=checkbox id=__nav_4_3_2_9> <label class=md-nav__link for=__nav_4_3_2_9> Architecture Decisions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Architecture Decisions" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_9> <span class="md-nav__icon md-icon"></span> Architecture Decisions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ad/ class=md-nav__link> Decision Index </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3 type=checkbox id=__nav_4_3_3> <label class=md-nav__link for=__nav_4_3_3> APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=APIC data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/overview/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_2 type=checkbox id=__nav_4_3_3_2> <label class=md-nav__link for=__nav_4_3_3_2> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_2> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_3 type=checkbox id=__nav_4_3_3_3> <label class=md-nav__link for=__nav_4_3_3_3> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_3> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps, Tekton & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../apic/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_4 type=checkbox id=__nav_4_3_3_4> <label class=md-nav__link for=__nav_4_3_3_4> Deploy APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_4> <span class="md-nav__icon md-icon"></span> Deploy APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_5 type=checkbox id=__nav_4_3_3_5> <label class=md-nav__link for=__nav_4_3_3_5> Configure APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_5> <span class="md-nav__icon md-icon"></span> Configure APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/configuration/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_6 type=checkbox id=__nav_4_3_3_6> <label class=md-nav__link for=__nav_4_3_3_6> Publish APIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Publish APIs" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_6> <span class="md-nav__icon md-icon"></span> Publish APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/publish/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4 type=checkbox id=__nav_4_3_4> <label class=md-nav__link for=__nav_4_3_4> APIC Multi-Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="APIC Multi-Cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_3_4> <span class="md-nav__icon md-icon"></span> APIC Multi-Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/multi-cluster/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/create-clusters/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4_3 type=checkbox id=__nav_4_3_4_3> <label class=md-nav__link for=__nav_4_3_4_3> Configure the clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the clusters" data-md-level=4> <label class=md-nav__title for=__nav_4_3_4_3> <span class="md-nav__icon md-icon"></span> Configure the clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/multi-cluster/configure-clusters-gitops/ class=md-nav__link> GitOps repos & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/configure-clusters-gitops-config/ class=md-nav__link> Configure GitOps repos </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/deploy/ class=md-nav__link> Deploy APIC </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/config-pipeline/ class=md-nav__link> Configure APIC </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/publish-pipeline/ class=md-nav__link> Publish APIs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5 type=checkbox id=__nav_4_3_5> <label class=md-nav__link for=__nav_4_3_5> Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Process Mining" data-md-level=3> <label class=md-nav__title for=__nav_4_3_5> <span class="md-nav__icon md-icon"></span> Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/overview/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/using/this-guide/ class=md-nav__link> Using this guide </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5_3 type=checkbox id=__nav_4_3_5_3> <label class=md-nav__link for=__nav_4_3_5_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_5_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5_4 type=checkbox id=__nav_4_3_5_4> <label class=md-nav__link for=__nav_4_3_5_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_5_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5_5 type=checkbox id=__nav_4_3_5_5> <label class=md-nav__link for=__nav_4_3_5_5> Deploy Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy Process Mining" data-md-level=4> <label class=md-nav__title for=__nav_4_3_5_5> <span class="md-nav__icon md-icon"></span> Deploy Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../cp4d-overview/ class=md-nav__link> Cloud Pak for Data </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=References data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/ad/ class=md-nav__link> Architectural Decisions </a> </li> <li class=md-nav__item> <a href=../../../../../references/prerequisites/instructions/ class=md-nav__link> Prerequisites </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=About data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../overview/whats-new/ class=md-nav__link> What's New </a> </li> <li class=md-nav__item> <a href=../../../../../contribute/documentation/ class=md-nav__link> Contribute </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#pre-requisites class=md-nav__link> Pre-requisites </a> </li> <li class=md-nav__item> <a href=#access-the-promotion-pipeline class=md-nav__link> Access the promotion pipeline </a> </li> <li class=md-nav__item> <a href=#run-the-promotion-pipeline class=md-nav__link> Run the promotion pipeline </a> <nav class=md-nav aria-label="Run the promotion pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#queue-manager class=md-nav__link> Queue Manager </a> </li> <li class=md-nav__item> <a href=#mq-sample-application class=md-nav__link> MQ Sample Application </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#explore-the-promotion-pipeline class=md-nav__link> Explore the promotion pipeline </a> </li> <li class=md-nav__item> <a href=#activate-argocd-applications class=md-nav__link> Activate ArgoCD Applications </a> </li> <li class=md-nav__item> <a href=#review-the-resultant-gitops-application-folders class=md-nav__link> Review the resultant GitOps application folders </a> </li> <li class=md-nav__item> <a href=#examine-the-activated-argocd-applications class=md-nav__link> Examine the activated ArgoCD applications </a> <nav class=md-nav aria-label="Examine the activated ArgoCD applications"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#queue-manager_1 class=md-nav__link> Queue Manager </a> </li> <li class=md-nav__item> <a href=#mq-sample-application_1 class=md-nav__link> MQ Sample Application </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#validate-the-queue-manager class=md-nav__link> Validate the Queue Manager </a> </li> <li class=md-nav__item> <a href=#validate-the-application class=md-nav__link> Validate the Application </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/edit/master/docs/guides/cp4i/mq/cloud-native/promoting-environments-stage-prod.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=promoting-from-staging-to-prod-environment>Promoting from Staging to Prod environment<a class=headerlink href=#promoting-from-staging-to-prod-environment title="Permanent link">&para;</a></h1> <!--- cSpell:ignore  pipelinerun mqsc msqc runmqsc dockerconfigjson queuemanager QMID podman ibmgaragecloud cntk cnkt eventid gitrevision gitrepositoryurl odowdaibm MQSC replicaset eventlistener triggerbinding triggertemplate mqcicd qmgr Artifactory configmaps OIDC CHLAUTH templating sealedsecret jmeter spl3ow gw8mgi --> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p><strong>Audience</strong>: Application developers, Administrators</p> <p>In the <a href=../promoting-environments-dev-stage/ >previous topic</a> of this chapter, we ran the promotion pipeline for dev to staging. The pipeline successfully promoted the Queue Manager instance and MQ Sample application instance from <code>dev</code> to <code>staging</code>.</p> <p>In this topic, you will set up a promotion pipeline that promotes the Queue Manager and MQ sample application from <code>staging</code> environment to <code>prod</code> environment. We'll activate the ArgoCD application that will watch the GitOps folder containing the Helm charts and use it and its dependent resources to deploy a running queue manager and sample application to the <code>prod</code> namespace in the cluster.</p> <p>Look at the following diagram:</p> <p><img alt="Staging to Prod pipeline" src=../images/mq_stage_to_prod_pipeline.drawio.svg></p> <p>We've highlighted the components we're going to explore in this topic:</p> <ul> <li>The <code>promotion pipeline from staging to prod</code> will perform a set of tasks for performance testing. If successful, the pipeline leaves a PR in the GitOps apps repository.</li> <li>The <code>GitOps apps repository</code> will have a PR for the latest good build and test represented as a Helm chart for <code>prod</code> environment. This chart will be subsequently used by ArgoCD to deploy to the cluster.</li> <li>An <code>ArgoCD application</code> will monitor the GitOps folder where its Helm chart is held. Whenever this folder is updated, this ArgoCD application will apply these updates to the cluster, resulting in a new deployment.</li> <li>The instance of <code>Queue Manager</code> running in the cluster is active prod queue manager ready for use by MQ applications under prod.</li> <li>The instance of <code>MQ Sample Application</code> running in the cluster is active prod sample application under prod.</li> </ul> <p>In this topic, we're going to:</p> <ul> <li>Access the promotion pipeline</li> <li>Run the promotion pipeline for <code>Queue Manager</code></li> <li>Run the promotion pipeline for <code>MQ Sample Application</code></li> <li>Explore the promotion pipeline.</li> <li>Activate ArgoCD application for <code>Queue Manager</code> and <code>MQ Sample Application</code> for prod namespace.</li> <li>Review the resultant GitOps application folders for <code>Queue Manager</code> and <code>MQ Sample Application</code>.</li> <li>Examine the activated ArgoCD application that deploys the <code>Queue Manager</code> and <code>MQ Sample Application</code> to the cluster.</li> <li>Validate <code>Queue Manager</code> and <code>MQ Sample Application</code>.</li> </ul> <p>By the end of this topic we'll have a fully functioning staging to prod promotion pipeline that we can use to promote queue manager and sample application from staging environment to prod environment.</p> <hr> <h2 id=pre-requisites>Pre-requisites<a class=headerlink href=#pre-requisites title="Permanent link">&para;</a></h2> <p>Before attempting this topic, you should have successfully completed the <a href=../promoting-environments-dev-stage/ >previous chapter</a>.</p> <hr> <h2 id=access-the-promotion-pipeline>Access the promotion pipeline<a class=headerlink href=#access-the-promotion-pipeline title="Permanent link">&para;</a></h2> <p>As we can see in the diagram above, the promotion pipeline is responsible for promoting the <code>Queue Manager</code> and <code>MQ Sample application</code> from <code>staging</code> to <code>prod</code>. If successful, it leaves a PR with the updated resources for prod in the GitOps apps repository, which are used by ArgoCD to deploy the updated <code>Queue Manager</code> and <code>application</code> to the cluster.</p> <p>It's usually the case a pipeline runs automatically when the Queue Manager or the Sample application is successfully deployed in staging environment. However, our first pipeline run is manual so that you can be in control, making it easier to understand what's happening.</p> <ol> <li> <p><em>Locate the <code>ci</code> pipelines in the web console</em></p> <p>Let's find the promotion pipeline using the OpenShift web console.</p> <p>Navigate to <code>Pipelines-&gt;Pipelines</code> in the left hand pane, and select <code>Project: ci</code>, to show all pipelines in the <code>ci</code> namespace:</p> <p><img alt=diagram19 src=../images/diagram19.png></p> <p>You can see all the pipelines that we installed into the <code>ci</code> namespace in the previous chapter. We'll use different pipelines for different activities throughout the tutorial.</p> <p>For this topic, we're going to use the <code>ibm-mq-promote-stage-prod</code> pipeline. When the <code>Queue Manager</code> or <code>Sample application</code> are successfully deployed to the <code>staging</code> namespace, this pipeline will perform performance testing and on a successful run, it will promote the existing resources in <code>staging</code> to the <code>prod</code> namespace.</p> </li> <li> <p><em>The</em> <code>ibm-mq-promote-stage-prod</code> <em>promotion pipeline</em></p> <p>Select the <code>ibm-mq-promote-stage-prod</code> pipeline from the list of all pipelines:</p> <p><img alt=diagram47 src=../images/diagram47.png></p> <p>Like all pipelines, <code>ibm-mq-promote-stage-prod</code> is composed from a set of <strong>tasks</strong>:</p> <ul> <li><code>stage-instance-tests</code></li> <li><code>gitops</code></li> </ul> <p>The task name often provides a strong hint of each task's specific function. We'll examine these tasks in detail as the pipeline runs.</p> </li> <li> <p><em>The</em> <code>oc</code> <em>command as an alternative to the Web console</em></p> <p>As well as using the OpenShift web console, you can also interact with pipeline using the <code>oc</code> or <code>tekton</code> commands.</p> <p>Ensure you're logged in to cluster, and issue the following command to list the <code>ibm-mq-promote-stage-prod</code> pipeline details:</p> <div class=highlight><pre><span></span><code>oc get pipeline ibm-mq-promote-stage-prod -n ci
</code></pre></div> <p>which shows a brief summary of the pipeline:</p> <div class=highlight><pre><span></span><code>NAME                        AGE
ibm-mq-promote-stage-prod   5d18h
</code></pre></div> <p>You can get more detail by adding the <code>-o yaml</code> option; we'll do that later.</p> </li> </ol> <hr> <h2 id=run-the-promotion-pipeline>Run the promotion pipeline<a class=headerlink href=#run-the-promotion-pipeline title="Permanent link">&para;</a></h2> <h3 id=queue-manager>Queue Manager<a class=headerlink href=#queue-manager title="Permanent link">&para;</a></h3> <ol> <li> <p><em>Configure your first pipeline run</em></p> <p>In <code>pipeline details</code> view above, you'll see an <code>Actions</code> button. Select <code>Start</code> to configure a pipeline run.</p> <p>You'll be presented with the following dialog:</p> <p><img alt=diagram48 src=../images/diagram48.png></p> <p>The supplied arguments allow the user of the pipeline to configure its behavior. For example, a user can use this pipeline with different queue manager source repositories.</p> <p>Configure the run as follows:</p> <ul> <li>Set <code>git-url</code> to your fork of the <code>mq-infra</code> repository</li> <li>Set <code>git-revision</code> to <code>master</code>.</li> <li>Set <code>src-environment</code> to <code>staging</code>.</li> <li>Set <code>dest-environment</code> to <code>prod</code>.</li> <li>Set the <code>app-path</code> pointing to your <code>GitOps apps repository</code> which in our case is <code>mq/environments</code>.</li> <li>Set <code>git-pr</code> to <code>true</code>.</li> <li>Set <code>test-file</code> pointing to your <code>jmeter jmx file</code>. If your source repository don't have any jmx file defined, just leave the defaults.</li> </ul> <details class=note open=open> <summary>Note</summary> <p>At the moment, Queue Manager <code>mq-infra</code> repository do not have any performance tests defined using Jmeter. This pipeline is designed in a way to skip this tests if the definitions are not present. However, MQ Sample application <code>mq-spring-app</code> repository have these tests defined and we will be coming across it in the later section of this tutorial.</p> </details> <p>Hit <code>Start</code> to start the pipeline run.</p> <p>You can also use the command line to run a pipeline; we'll explore that option later.</p> </li> <li> <p><em>Watch a pipeline run executing</em></p> <p>The pipeline run has now started.</p> <p>Notice how the view changes to <code>Pipeline Run details</code>:</p> <p><img alt=diagram49 src=../images/diagram49.png></p> <p>We're now looking at the live output from a pipeline run, rather than the pipeline used to create the run.</p> <p>Notice that the pipeline run name <code>ibm-mq-promote-stage-prod-spl3ow</code> is based on the pipeline name -- with a unique suffix. Every new pipeline run will have a unique name.</p> <p>See also how the first <code>stage-instance-tests</code> task is running, while the remaining tasks are waiting to start.</p> <p>Hover over <code>stage-instance-tests</code> task and you will see the <strong>steps</strong> that comprise it.</p> </li> <li> <p><em>Watch pipeline steps complete</em></p> <p>As the pipeline run proceeds, notice all the steps got completed:</p> <p><img alt=diagram50 src=../images/diagram50.png></p> <p>This pipeline will take about a minute or two to complete.</p> </li> </ol> <h3 id=mq-sample-application>MQ Sample Application<a class=headerlink href=#mq-sample-application title="Permanent link">&para;</a></h3> <ol> <li> <p><em>Configure your first pipeline run</em></p> <p>In <code>pipeline details</code> view above, you'll see an <code>Actions</code> button. Select <code>Start</code> to configure a pipeline run.</p> <p>You'll be presented with the following dialog:</p> <p><img alt=diagram51 src=../images/diagram51.png></p> <p>The supplied arguments allow the user of the pipeline to configure its behavior. For example, a user can use this pipeline with different sample application source repositories.</p> <p>Configure the run as follows:</p> <ul> <li>Set <code>git-url</code> to your fork of the <code>mq-spring-app</code> repository</li> <li>Set <code>git-revision</code> to <code>master</code>.</li> <li>Set <code>src-environment</code> to <code>staging</code>.</li> <li>Set <code>dest-environment</code> to <code>prod</code>.</li> <li>Set the <code>app-path</code> pointing to your <code>GitOps apps repository</code> which in our case is <code>mq/environments</code>.</li> <li>Set <code>git-pr</code> to <code>true</code>.</li> <li>Set <code>test-plan</code> pointing to your <code>jmeter jmx file</code>. If your source repository don't have any jmx file, just leave the defaults. <code>mq-spring-app</code> repository have the jmx file defined at <code>jmeter/mq-spring-app.jmx</code> using Jmeter.</li> </ul> <p>Hit <code>Start</code> to start the pipeline run.</p> <p>You can also use the command line to run a pipeline; we'll explore that option later.</p> </li> <li> <p><em>Watch a pipeline run executing</em></p> <p>The pipeline run has now started.</p> <p>Notice how the view changes to <code>Pipeline Run details</code>:</p> <p><img alt=diagram52 src=../images/diagram52.png></p> <p>We're now looking at the live output from a pipeline run, rather than the pipeline used to create the run.</p> <p>Notice that the pipeline run name <code>ibm-mq-promote-stage-prod-gw8mgi</code> is based on the pipeline name -- with a unique suffix. Every new pipeline run will have a unique name.</p> <p>See also how the first <code>stage-instance-tests</code> task is running, while the remaining tasks are waiting to start.</p> <p>Hover over <code>stage-instance-tests</code> task and you will see the <strong>steps</strong> that comprise it.</p> </li> <li> <p><em>Watch pipeline steps complete</em></p> <p>As the pipeline run proceeds, notice all the steps got completed:</p> <p><img alt=diagram53 src=../images/diagram53.png></p> <p>This pipeline will take about a minute or two to complete.</p> </li> </ol> <hr> <h2 id=explore-the-promotion-pipeline>Explore the promotion pipeline<a class=headerlink href=#explore-the-promotion-pipeline title="Permanent link">&para;</a></h2> <p>Let's look more closely at how the <code>ibm-mq-promote-stage-prod</code> pipeline is structured. Let's also examine the tasks and steps that make up the pipeline, and how they progressively validate the deployments in <code>staging</code> namespace, resulting in the production of a Helm chart ready for deployment in <code>prod</code> namespace.</p> <ol> <li> <p><em>Pipeline, Task, Step</em></p> <p>Let's start with the pipeline, its tasks and steps.</p> <p>Hover over the <code>stage-instance-tests</code> task:</p> <p><img alt=diagram54 src=../images/diagram54.png></p> <p>See how our pipeline is made up of tasks such as <code>stage-instance-tests</code> and <code>gitops</code>. These run in the order defined by the pipeline. Our pipeline is linear, though Tekton supports more sophisticated pipeline graphs if necessary.</p> <p>See how each task comprises a set of steps such as <code>git-clone</code> or <code>setup</code>. These run in the order defined by the task.</p> </li> <li> <p><em>The pipeline run logs</em></p> <p>When a pipeline runs, all its output is captured in a set of logs, one for each task.</p> <p>Click on the <code>stage-instance-tests</code> task to show its logs:</p> <p><img alt=diagram55 src=../images/diagram55.png></p> <p>(<em>Alternatively, you can select the <code>Logs</code> tab from the UI, and then select the tasks on the left pane within the pipeline run view.</em>)</p> <p>See how the <code>stage-instance-tests</code> task has its output in a dedicated log. You can select any log for any task that has completed or is executing. When a pipeline run completes, all its logs remain available, which can help diagnosing problems for example.</p> </li> <li> <p><em>Exploring an example task output:</em> <code>stage-instance-tests</code></p> <p>It's easy to examine a task log; you simply select the relevant task and scroll the log up or down. For active tasks the log will be dynamically updated.</p> <p>Click on the <code>stage-instance-tests</code> task:</p> <p><img alt=diagram56 src=../images/diagram56.png></p> <p>This console window shows the output generated by <code>stage-instance-tests</code> task. As the task script proceeds, its output is captured; that's what we can see in this window.</p> <p>Notice that the <code>stage-instance-tests</code> task output is from the <strong>first step</strong> in the <code>stage-instance-tests</code> task. This step is called <code>STEP-GIT-CLONE</code>. Note how the step names are capitalized in the web console output.</p> <p>Let's look at another task and its steps more closely.</p> </li> <li> <p><em>Exploring a task step in detail</em>: <code>STEP-JMETER-IT</code></p> <p>A task is built of multiple steps. Let's explore the <code>stage-instance-tests</code> task and its <code>step-jmeter-it</code> step.</p> <p>Select the <code>stage-instance-tests</code> task and scroll through its logs to see its <strong>third step</strong>, <code>STEP-JMETER-IT</code>:</p> <p><img alt=diagram57 src=../images/diagram57.png></p> <p><img alt=diagram58 src=../images/diagram58.png></p> <p>See how the <code>step-jmeter-it</code> output is captured in the same log as the previous step <code>git-clone</code>.</p> </li> <li> <p><em>The pipeline definition</em></p> <p>Up to this point, we've examined the pipeline run and the logs it generates. Let's now look at how a pipeline is defined.</p> <p>Issue the following command to show the <code>ibm-mq-promote-stage-prod</code> pipeline:</p> <div class=highlight><pre><span></span><code>oc describe pipeline ibm-mq-promote-stage-prod -n ci
</code></pre></div> <p>which shows the pipeline YAML in considerable detail:</p> <div class=highlight><pre><span></span><code><span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">ibm-mq-promote-stage-prod</span>
<span class=nt>Namespace</span><span class=p>:</span>    <span class="l l-Scalar l-Scalar-Plain">ci</span>
<span class=nt>Labels</span><span class=p>:</span>       <span class="l l-Scalar l-Scalar-Plain">app.kubernetes.io/instance=apps-mq-rest-ci-1</span>
<span class=nt>Annotations</span><span class=p>:</span>  <span class=nt>app.openshift.io/runtime</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">test</span>
<span class=nt>API Version</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">tekton.dev/v1beta1</span>
<span class=nt>Kind</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">Pipeline</span>
<span class=nt>Metadata</span><span class=p>:</span>
  <span class=nt>Creation Timestamp</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">2021-09-23T17:29:24Z</span>
  <span class=nt>Generation</span><span class=p>:</span>          <span class="l l-Scalar l-Scalar-Plain">1</span>
  <span class=nt>Managed Fields</span><span class=p>:</span>
    <span class=nt>API Version</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">tekton.dev/v1beta1</span>
    <span class=nt>Fields Type</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">FieldsV1</span>
    <span class=nt>fieldsV1</span><span class=p>:</span>
      <span class="l l-Scalar l-Scalar-Plain">f:metadata</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">f:annotations</span><span class="p p-Indicator">:</span>
          <span class=nt>.</span><span class=p>:</span>
          <span class="l l-Scalar l-Scalar-Plain">f:app.openshift.io/runtime</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">f:kubectl.kubernetes.io/last-applied-configuration</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">f:labels</span><span class="p p-Indicator">:</span>
          <span class=nt>.</span><span class=p>:</span>
          <span class="l l-Scalar l-Scalar-Plain">f:app.kubernetes.io/instance</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">f:spec</span><span class="p p-Indicator">:</span>
        <span class=nt>.</span><span class=p>:</span>
        <span class="l l-Scalar l-Scalar-Plain">f:params</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">f:tasks</span><span class="p p-Indicator">:</span>
    <span class=nt>Manager</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">argocd-application-controller</span>
    <span class=nt>Operation</span><span class=p>:</span>       <span class="l l-Scalar l-Scalar-Plain">Update</span>
    <span class=nt>Time</span><span class=p>:</span>            <span class="l l-Scalar l-Scalar-Plain">2021-09-23T17:29:24Z</span>
  <span class=nt>Resource Version</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">2478082</span>
  <span class=nt>Self Link</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">/apis/tekton.dev/v1beta1/namespaces/ci/pipelines/ibm-mq-promote-stage-prod</span>
  <span class=nt>UID</span><span class=p>:</span>               <span class="l l-Scalar l-Scalar-Plain">d7ed2886-97f4-4c89-beb7-dd9c343dabf1</span>
<span class=nt>Spec</span><span class=p>:</span>
  <span class=nt>Params</span><span class=p>:</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">The url for the git repository</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">git-url</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">master</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">git branch for the test app</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">git-revision</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">staging</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">environment</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">src-environment</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">prod</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">environment</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">dest-environment</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">mq/environments</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">Path in gitops repo</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">app-path</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">Enable the pipeline to do a PR for the gitops repo</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">git-pr</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">jmeter/test.jmx</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">Path of the postman collection (jmeter/mq-spring-app.jmx)</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">test-plan</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
  <span class=nt>Tasks</span><span class=p>:</span>
    <span class=nt>Name</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">stage-instance-tests</span>
    <span class=nt>Params</span><span class=p>:</span>
      <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">git-url</span>
      <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.git-url)</span>
      <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">src-environment</span>
      <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.src-environment)</span>
      <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">test-plan</span>
      <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.test-plan)</span>
    <span class=nt>Task Ref</span><span class=p>:</span>
      <span class=nt>Kind</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">Task</span>
      <span class=nt>Name</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">ibm-jmeter-performance-test</span>
    <span class=nt>Name</span><span class=p>:</span>    <span class="l l-Scalar l-Scalar-Plain">gitops</span>
    <span class=nt>Params</span><span class=p>:</span>
      <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">app-name</span>
      <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(tasks.stage-instance-tests.results.app-name)</span>
      <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">src-environment</span>
      <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.src-environment)</span>
      <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">dest-environment</span>
      <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.dest-environment)</span>
      <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">app-path</span>
      <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.app-path)</span>
      <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">git-pr</span>
      <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.git-pr)</span>
    <span class=nt>Run After</span><span class=p>:</span>
      <span class="l l-Scalar l-Scalar-Plain">stage-instance-tests</span>
    <span class=nt>Task Ref</span><span class=p>:</span>
      <span class=nt>Kind</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">Task</span>
      <span class=nt>Name</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">ibm-gitops</span>
<span class=nt>Events</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">&lt;none&gt;</span>
</code></pre></div> <p>Don't be intimidated by this output -- it's actually just a more detailed source view of the information shown for the <code>ibm-mq-promote-stage-prod</code> pipeline in the web console.</p> <p>Locate the following key structures in the <code>Pipeline</code> YAML:</p> <ul> <li><code>API Version: tekton.dev/v1beta1</code> and <code>Kind: Pipeline</code> identify this as a Tekton pipeline.</li> <li><code>Spec: Params</code> identifies the <strong>pipeline input parameters</strong></li> <li><code>Tasks:</code> is a list of the tasks in this pipeline, each of which has</li> <li>A <code>Name:</code> naming the task</li> <li>A set of <code>Params:</code> identifying the <strong>task input parameters</strong></li> <li>An optional <code>Run After:</code> value indicating when the task is run</li> <li>A <code>Task Ref:</code> identifying the actual task code to be run using the task's input</li> </ul> <p>Notice that there's <strong>no code</strong> in the pipeline definition; instead, the definition specifies the required inputs to the pipeline, as well as the set of required tasks and their order of execution. The code executed by each task is identified by <code>Task Ref:</code>, rather than in the pipeline; the pipeline definition merely defines the order of task execution and how parameters are marshaled between tasks.</p> <p>Let's now examine the pipeline definition in a little more detail.</p> </li> <li> <p><em>The pipeline input</em> <code>Spec: Params</code></p> <p>When we configure a pipeline run, the arguments map precisely to <code>Spec: Params</code> in the pipeline YAML file.</p> <p>Below, we've just shown the <code>Spec: Params:</code> for the <code>ibm-mq-promote-stage-prod</code> pipeline:</p> <div class=highlight><pre><span></span><code><span class=nt>Spec</span><span class=p>:</span>
  <span class=nt>Params</span><span class=p>:</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">The url for the git repository</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">git-url</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">master</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">git branch for the test app</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">git-revision</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">staging</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">environment</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">src-environment</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">prod</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">environment</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">dest-environment</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">mq/environments</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">Path in gitops repo</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">app-path</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">Enable the pipeline to do a PR for the gitops repo</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">git-pr</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class=nt>Default</span><span class=p>:</span>      <span class="l l-Scalar l-Scalar-Plain">jmeter/test.jmx</span>
    <span class=nt>Description</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">Path of the postman collection (jmeter/mq-spring-app.jmx)</span>
    <span class=nt>Name</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">test-plan</span>
    <span class=nt>Type</span><span class=p>:</span>         <span class="l l-Scalar l-Scalar-Plain">string</span>
</code></pre></div> <p>Spend a few moments mapping each of these parameters maps to those on the <code>Start Pipeline</code> input dialog where you specified the pipeline run arguments. For example, map <code>Name:</code>, <code>Description:</code> and <code>Default:</code> to the different fields in the dialog.</p> </li> <li> <p><em>Parameters for the first</em> <code>setup</code> <em>task</em></p> <p>We can see that the first task in the pipeline is called <code>stage-instance-tests</code>. Let's examine its YAML to see how it gets its input parameters:</p> <div class=highlight><pre><span></span><code><span class=nt>Tasks</span><span class=p>:</span>
  <span class=nt>Name</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">stage-instance-tests</span>
  <span class=nt>Params</span><span class=p>:</span>
    <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">git-url</span>
    <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.git-url)</span>
    <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">src-environment</span>
    <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.src-environment)</span>
    <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">test-plan</span>
    <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.test-plan)</span>
  <span class=nt>Task Ref</span><span class=p>:</span>
    <span class=nt>Kind</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">Task</span>
    <span class=nt>Name</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">ibm-jmeter-performance-test</span>
</code></pre></div> <p>See how the <code>dev-instance-tests</code> task derives its <code>git-url</code> parameter using the <strong>pipeline</strong> input parameter value <code>$(params.git-url)</code>. See how <code>src-environment</code> and <code>test-plan</code> work in a similar way. The first task in a pipeline typically works like this -- its parameters are mapped from the pipeline's input parameters.</p> <p>Notice also that some pipeline input parameters are not referred to by the <code>stage-instance-tests</code> task; they will be used by subsequent tasks using the appropriate <code>$(params.)</code> value.</p> </li> <li> <p><em>Passing arguments between tasks</em></p> <p>As each task completes, the pipeline proceeds. When a new task starts it often requires one or more results generated by a previous task.</p> <p>We can see a good example of this in the <code>gitops</code> task:</p> <div class=highlight><pre><span></span><code><span class=nt>Name</span><span class=p>:</span>    <span class="l l-Scalar l-Scalar-Plain">gitops</span>
<span class=nt>Params</span><span class=p>:</span>
  <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">app-name</span>
  <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(tasks.stage-instance-tests.results.app-name)</span>
  <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">src-environment</span>
  <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.src-environment)</span>
  <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">dest-environment</span>
  <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.dest-environment)</span>
  <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">app-path</span>
  <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.app-path)</span>
  <span class=nt>Name</span><span class=p>:</span>   <span class="l l-Scalar l-Scalar-Plain">git-pr</span>
  <span class=nt>Value</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">$(params.git-pr)</span>
<span class=nt>Run After</span><span class=p>:</span>
  <span class="l l-Scalar l-Scalar-Plain">stage-instance-tests</span>
<span class=nt>Task Ref</span><span class=p>:</span>
  <span class=nt>Kind</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">Task</span>
  <span class=nt>Name</span><span class=p>:</span>  <span class="l l-Scalar l-Scalar-Plain">ibm-gitops</span>
</code></pre></div> <p>See how the <code>gitops</code> task specifies that the <code>app-name</code> parameter should use value generated by the <code>stage-instance-tests</code> task using the syntax: <code>$(tasks.stage-instance-tests.results.app-name)</code>.</p> <p>Also notice how the <code>gitops</code> tasks uses <code>Run After:</code> to specify that it should execute <strong>after</strong> the <code>stage-instance-tests</code> task. This follows the Kubernetes idiom of resources being declarative -- the order of execution is defined by <code>RunAfter:</code> rather than the order in which tasks appear in the YAML.</p> <p>Again, notice that the <code>gitops</code> task <strong>doesn't</strong> contain the code that the task executes. This is contained in <code>Task Ref:</code> which identifies <code>ibm-gitops</code> as the task to execute using the specified parameters. It's the code in <code>ibm-gitops</code> which generates the log output for the task; we'll examine it later.</p> <p>The way pipelines tasks are designed makes them highly reusable. As we'll see later, tasks are written with defined inputs and outputs such that they can be re-used by different pipelines. Pipelines focus on organizing the order of task execution and how parameters are marshaled into and between tasks; it's the tasks that do the actual work.</p> </li> <li> <p><em>Locating the pipeline and tasks source YAMLs</em></p> <p>Finally, let's locate the source for the <code>ibm-mq-promote-stage-prod</code> pipeline and the tasks within it.</p> <p>It is located in the following folder:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git
<span class=nb>cd</span> multi-tenancy-gitops-apps
tree mq/environments/ci/pipelines/
</code></pre></div> <p>We can see the other pipelines for the <code>ci</code> namespace in this folder:</p> <div class=highlight><pre><span></span><code>mq/environments/ci/pipelines/
├── ibm-test-pipeline-for-dev.yaml
├── ibm-test-pipeline-for-stage.yaml
├── java-maven-dev-pipeline.yaml
├── mq-pipeline-dev.yaml
└── mq-spring-app-dev-pipeline.yaml
</code></pre></div> <p>These map to the MQ-related pipelines we saw in the <code>Pipelines-&gt;Pipelines</code> view in the web console.</p> </li> <li> <p><em>Exploring the</em> <code>ibm-mq-promote-stage-prod</code> <em>source YAML</em></p> <p>View the source for the <code>ibm-test-pipeline-for-stage.yaml</code> pipeline with the command:</p> <div class=highlight><pre><span></span><code>cat mq/environments/ci/pipelines/ibm-test-pipeline-for-stage.yaml
</code></pre></div> <p>which shows the source YAML for the <code>ibm-mq-promote-dev-stage</code> pipeline:</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">tekton.dev/v1beta1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Pipeline</span>
<span class=nt>metadata</span><span class=p>:</span>
  <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ibm-mq-promote-stage-prod</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>app.openshift.io/runtime</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">test</span>
<span class=nt>spec</span><span class=p>:</span>
  <span class=nt>params</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">git-url</span>
      <span class=nt>description</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">The url for the git repository</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">git-revision</span>
      <span class=nt>description</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">git branch for the test app</span>
      <span class=nt>default</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">master</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">src-environment</span>
      <span class=nt>description</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">environment</span>
      <span class=nt>default</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">staging</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">dest-environment</span>
      <span class=nt>description</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">environment</span>
      <span class=nt>default</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">prod</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">app-path</span>
      <span class=nt>description</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Path in gitops repo</span>
      <span class=nt>default</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mq/environments</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">git-pr</span>
      <span class=nt>description</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Enable the pipeline to do a PR for the gitops repo</span>
      <span class=nt>default</span><span class=p>:</span> <span class=s>&quot;true&quot;</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">test-plan</span>
      <span class=nt>description</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Path of the postman collection (jmeter/mq-spring-app.jmx)</span>
      <span class=nt>default</span><span class=p>:</span> <span class=s>&quot;jmeter/test.jmx&quot;</span>
  <span class=nt>tasks</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">stage-instance-tests</span>
      <span class=nt>taskRef</span><span class=p>:</span>
        <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ibm-jmeter-performance-test</span>
      <span class=nt>params</span><span class=p>:</span>
        <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">git-url</span>
          <span class=nt>value</span><span class=p>:</span> <span class=s>&quot;$(params.git-url)&quot;</span>
        <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">src-environment</span>
          <span class=nt>value</span><span class=p>:</span> <span class=s>&quot;$(params.src-environment)&quot;</span>
        <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">test-plan</span>
          <span class=nt>value</span><span class=p>:</span> <span class=s>&quot;$(params.test-plan)&quot;</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">gitops</span>
      <span class=nt>taskRef</span><span class=p>:</span>
        <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ibm-gitops</span>
      <span class=nt>runAfter</span><span class=p>:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">stage-instance-tests</span>
      <span class=nt>params</span><span class=p>:</span>
        <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">app-name</span>
          <span class=nt>value</span><span class=p>:</span> <span class=s>&quot;$(tasks.stage-instance-tests.results.app-name)&quot;</span>
        <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">src-environment</span>
          <span class=nt>value</span><span class=p>:</span> <span class=s>&quot;$(params.src-environment)&quot;</span>
        <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">dest-environment</span>
          <span class=nt>value</span><span class=p>:</span> <span class=s>&quot;$(params.dest-environment)&quot;</span>
        <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">app-path</span>
          <span class=nt>value</span><span class=p>:</span> <span class=s>&quot;$(params.app-path)&quot;</span>
        <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">git-pr</span>
          <span class=nt>value</span><span class=p>:</span> <span class=s>&quot;$(params.git-pr)&quot;</span>
</code></pre></div> <p>This YAML is <em>slightly</em> different to the output of the <code>oc get pipeline</code> command, because extra information is added during deployment such as <code>Creation Timestamp:</code>.</p> </li> <li> <p><em>Finding the ArgoCD application that manages pipelines</em></p> <p>You can see how the <code>ibm-mq-promote-stage-prod</code> and other pipeline YAMLs were deployed by examining the ArgoCD application that watches the folder containing the <code>ci</code> namespace pipelines.</p> <p>Issue the following command:</p> <div class=highlight><pre><span></span><code>cat mq/config/argocd/ci/ci-app-rest.yaml
</code></pre></div> <p>which shows the <code>apps-mq-rest-ci-1</code> ArgoCD application that watches for updates:</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class=nt>metadata</span><span class=p>:</span>
  <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">apps-mq-rest-ci-1</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>argocd.argoproj.io/sync-wave</span><span class=p>:</span> <span class=s>&quot;300&quot;</span>
  <span class=nt>finalizers</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">resources-finalizer.argocd.argoproj.io</span>
<span class=nt>spec</span><span class=p>:</span>
  <span class=nt>destination</span><span class=p>:</span>
    <span class=nt>namespace</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">ci</span>
    <span class=nt>server</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span>
  <span class=nt>project</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">applications</span>
  <span class=nt>source</span><span class=p>:</span>
    <span class=nt>path</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">mq/environments/ci</span>
    <span class=nt>repoURL</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">https://github.com/hp-gitops-test/multi-tenancy-gitops-apps</span>
    <span class=nt>targetRevision</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">master</span>
  <span class=nt>syncPolicy</span><span class=p>:</span>
    <span class=nt>automated</span><span class=p>:</span>
      <span class=nt>prune</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class=nt>selfHeal</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div> <p>See how this <code>apps-mq-rest-ci-1</code> watches: <code>path: mq/environments/ci</code>. As we know, this folder contains the YAML for the <code>ibm-mq-promote-stage-prod</code> and other pipelines under <code>pipelines</code> folder. When this ArgoCD application was made active in the cluster, it installed all the pipelines along with other resources in this folder.</p> </li> </ol> <hr> <h2 id=activate-argocd-applications>Activate ArgoCD Applications<a class=headerlink href=#activate-argocd-applications title="Permanent link">&para;</a></h2> <p>We're now going to activate the ArgoCD applications to manage the deployment of <code>Queue Manager</code> and <code>MQ Sample application</code> to the <code>prod</code> namespace.</p> <ol> <li> <p><em>Ensure you're logged in to the cluster</em></p> <p>Start a terminal window and log into your OCP cluster, substituting the <code>--token</code> and <code>--server</code> parameters with your values:</p> <div class=highlight><pre><span></span><code>   oc login --token<span class=o>=</span>&lt;token&gt; --server<span class=o>=</span>&lt;server&gt;
</code></pre></div> <p>If you are unsure of these values, click your user ID in the OpenShift web console and select "Copy Login Command".</p> </li> <li> <p><em>Locate your GitOps repository</em></p> <p>If necessary, change to the root of your GitOps repository, which is typically <code>$HOME/git</code>.</p> <p>Issue the following command to change to your GitOps repository:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git
<span class=nb>cd</span> multi-tenancy-gitops
</code></pre></div> </li> <li> <p><em>Select resources to deploy</em></p> <p>Access the <code>0-bootstrap/single-cluster/3-apps/kustomization.yaml</code>:</p> <div class=highlight><pre><span></span><code>cat <span class=m>0</span>-bootstrap/single-cluster/3-apps/kustomization.yaml
</code></pre></div> <p>Open <code>0-bootstrap/single-cluster/3-apps/kustomization.yaml</code> and uncomment the below:</p> <div class=highlight><pre><span></span><code>- argocd/mq/prod.yaml
</code></pre></div> <p>Once modified, it should be something like below:</p> <div class=highlight><pre><span></span><code>resources:
<span class=c1>#- argocd/ace/cicd.yaml</span>
<span class=c1>#- argocd/ace/dev.yaml</span>
<span class=c1>#- argocd/ace/stage.yaml</span>
<span class=c1>#- argocd/ace/prod.yaml</span>

- argocd/mq/cicd.yaml
- argocd/mq/dev.yaml
- argocd/mq/stage.yaml
- argocd/mq/prod.yaml

<span class=c1>#- argocd/apic/cicd.yaml</span>
<span class=c1>#- argocd/apic/dev.yaml</span>
<span class=c1>#- argocd/apic/stage.yaml</span>
<span class=c1>#- argocd/apic/prod.yaml</span>

<span class=c1>#- argocd/bookinfo/cicd.yaml</span>
<span class=c1>#- argocd/bookinfo/dev.yaml</span>
<span class=c1>#- argocd/bookinfo/stage.yaml</span>
<span class=c1>#- argocd/bookinfo/prod.yaml</span>

<span class=c1>#- argocd/soapserver/soapserver.yaml</span>

patches:
- target:
    group: argoproj.io
    kind: Application
    labelSelector: <span class=s2>&quot;gitops.tier.layer=applications&quot;</span>
  patch: <span class=p>|</span>-
    - op: add
      path: /spec/source/repoURL
      value: https://github.com/prod-ref-guide/multi-tenancy-gitops-apps.git
    - op: add
      path: /spec/source/targetRevision
      value: master
</code></pre></div> </li> <li> <p><em>Push GitOps changes to GitHub</em></p> <p>Let’s make these GitOps changes visible to the ArgoCD <code>applications</code> application via GitHub.</p> <p>Add all changes in the current folder to a git index, commit them, and push them to GitHub:</p> <div class=highlight><pre><span></span><code>git add .
git commit -s -m <span class=s2>&quot;Activating prod instance for queue manager and sample app&quot;</span>
git push origin <span class=nv>$GIT_BRANCH</span>
</code></pre></div> <p>The changes have now been pushed to your GitOps repository:</p> <div class=highlight><pre><span></span><code>Enumerating objects: <span class=m>11</span>, <span class=k>done</span>.
Counting objects: <span class=m>100</span>% <span class=o>(</span><span class=m>11</span>/11<span class=o>)</span>, <span class=k>done</span>.
Delta compression using up to <span class=m>8</span> threads
Compressing objects: <span class=m>100</span>% <span class=o>(</span><span class=m>6</span>/6<span class=o>)</span>, <span class=k>done</span>.
Writing objects: <span class=m>100</span>% <span class=o>(</span><span class=m>6</span>/6<span class=o>)</span>, <span class=m>515</span> bytes <span class=p>|</span> <span class=m>257</span>.00 KiB/s, <span class=k>done</span>.
Total <span class=m>6</span> <span class=o>(</span>delta <span class=m>5</span><span class=o>)</span>, reused <span class=m>0</span> <span class=o>(</span>delta <span class=m>0</span><span class=o>)</span>
remote: Resolving deltas: <span class=m>100</span>% <span class=o>(</span><span class=m>5</span>/5<span class=o>)</span>, completed with <span class=m>5</span> <span class=nb>local</span> objects.
To https://github.com/hp-gitops-mq/multi-tenancy-gitops.git
   <span class=m>3225847</span>..25f7459  master -&gt; master
</code></pre></div> <p>This change to the GitOps repository can now be used by ArgoCD.</p> </li> <li> <p><em>The <code>applications</code> argocd application</em></p> <p>Let's examine the ArgoCD application that manage the <strong>applications</strong> in our reference architecture.</p> <p>In the ArgoCD UI <strong>Applications</strong> view, click on the icon for the <code>applications</code> application:</p> <p><img alt=diagram59 src=../images/diagram59.png></p> </li> </ol> <hr> <h2 id=review-the-resultant-gitops-application-folders>Review the resultant GitOps application folders<a class=headerlink href=#review-the-resultant-gitops-application-folders title="Permanent link">&para;</a></h2> <p>The result of our previously successful <code>ibm-mq-promote-stage-prod</code> pipeline runs was to leave a PR in a GitOps folder for <code>Queue Manager</code> and <code>MQ Sample application</code>. This PR create a Helm chart if one is not present in the <code>prod</code> folder. If the Helm chart is already there, it updates the <code>version</code> in the <code>requirements.yaml</code> to match the latest deployment currently residing in the <code>staging</code> namespace.</p> <ol> <li> <p><em>Ensure you've set up the $GIT_ORG environment variable</em></p> <p>This chapter also uses environment variables to save typing and reduce errors.</p> <p>Let's set up an environment variable, <code>$GIT_ORG</code>, that contains your GitHub organization name. We'll use this variable in many subsequent commands.</p> <p><strong>Open a new terminal window</strong>.</p> <p>Replace <code>&lt;git-org&gt;</code> in the following command with your GitHub user name:</p> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>GIT_ORG</span><span class=o>=</span>&lt;git-org&gt;
</code></pre></div> <p>You can verify your <code>$GIT_ORG</code> as follows:</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span> <span class=nv>$GIT_ORG</span>
</code></pre></div> <p>which will show your GitHub Organization, for example:</p> <div class=highlight><pre><span></span><code>prod-ref-guide
</code></pre></div> </li> <li> <p><em>Grab the <code>multi-tenancy-gitops-apps</code> repository url</em></p> <p>Issue the below command to get the GitOps apps repository url.</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span> https://github.com/<span class=nv>$GIT_ORG</span>/multi-tenancy-gitops-apps/pulls
</code></pre></div> <p>which will give you an url, for instance:</p> <div class=highlight><pre><span></span><code>https://github.com/prod-ref-guide/multi-tenancy-gitops-apps/pulls
</code></pre></div> </li> <li> <p><em>Review the Pull Requests created by <code>ibm-mq-promote-dev-stage</code> pipeline</em></p> <p>Open the above url in your browser and you will see Pull Requests generated by the <code>ibm-mq-promote-dev-stage</code> pipeline.</p> <p><img alt=diagram64 src=../images/diagram64.png></p> <p>Merge these Pull Requests.</p> <p><img alt=diagram65 src=../images/diagram65.png></p> <p><img alt=diagram66 src=../images/diagram66.png></p> <p><img alt=diagram67 src=../images/diagram67.png></p> <p><img alt=diagram68 src=../images/diagram68.png></p> </li> <li> <p><em>Re-merging local clone to view prod resources in GitOps apps repository</em></p> <p>The <code>ibm-mq-promote-stage-prod</code> pipeline left a Pull request and we merged the changes in the previous step. This means that our local clone of the GitOps repository is one commit behind GitHub. To allow us to view the changes locally, we must re-merge our local branch with GitHub.</p> <p><strong>Return to the terminal window</strong> you're using for the <code>multi-tenancy-gitops-apps</code> GitOps apps repository.</p> <p>Issue the following command to change to your GitOps apps repository:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git
<span class=nb>cd</span> multi-tenancy-gitops-apps
</code></pre></div> <p>Issue the following commands to merge the local branch:</p> <div class=highlight><pre><span></span><code>git fetch origin
git merge origin/<span class=nv>$GIT_BRANCH</span>
</code></pre></div> <p>which shows our local branch being updated:</p> <div class=highlight><pre><span></span><code>Updating ea6706d..8882bb9
Fast-forward
 mq/environments/prod/mq-infra/Chart.yaml             <span class=p>|</span> <span class=m>4</span> ++++
 mq/environments/prod/mq-infra/requirements.yaml      <span class=p>|</span> <span class=m>4</span> ++++
 mq/environments/prod/mq-infra/values.yaml            <span class=p>|</span> <span class=m>3</span> +++
 mq/environments/prod/mq-spring-app/Chart.yaml        <span class=p>|</span> <span class=m>4</span> ++++
 mq/environments/prod/mq-spring-app/requirements.yaml <span class=p>|</span> <span class=m>4</span> ++++
 mq/environments/prod/mq-spring-app/values.yaml       <span class=p>|</span> <span class=m>3</span> +++
 <span class=m>6</span> files changed, <span class=m>22</span> insertions<span class=o>(</span>+<span class=o>)</span>
 create mode <span class=m>100644</span> mq/environments/prod/mq-infra/Chart.yaml
 create mode <span class=m>100644</span> mq/environments/prod/mq-infra/requirements.yaml
 create mode <span class=m>100644</span> mq/environments/prod/mq-infra/values.yaml
 create mode <span class=m>100644</span> mq/environments/prod/mq-spring-app/Chart.yaml
 create mode <span class=m>100644</span> mq/environments/prod/mq-spring-app/requirements.yaml
 create mode <span class=m>100644</span> mq/environments/prod/mq-spring-app/values.yaml
</code></pre></div> <p>Notice how these files correspond to the new Helm chart created in the GitOps apps repository by the <code>ibm-mq-promote-stage-prod</code> pipeline run.</p> </li> <li> <p><em>Explore the Helm chart in the GitOps Apps repository</em></p> <p>Let's examine the newly produced Helm charts in the GitOps apps repository; it was created by the previous pipeline runs.</p> <p>Issue the following command:</p> <div class=highlight><pre><span></span><code>tree mq/environments/prod/mq-infra/
</code></pre></div> <p>which shows the newly produced Helm chart:</p> <div class=highlight><pre><span></span><code>mq/environments/prod/mq-infra/
├── Chart.yaml
├── requirements.yaml
└── values.yaml
</code></pre></div> <p>Notice that:</p> <ul> <li>The chart for <code>Queue Manager</code> was created in the <code>mq/environments/</code> folder to reflect the fact this queue manager is part of the <strong>applications</strong> layer.</li> <li>The chart was created in the <code>prod</code> subfolder to reflect the fact that it's going to be deployed to the <code>prod</code> namespace.</li> <li>The chart was created in a new folder <code>/mq-infra</code>. This folder is dedicated to <code>Queue Manager</code>.</li> </ul> <p>Issue the following command:</p> <div class=highlight><pre><span></span><code>tree mq/environments/prod/mq-spring-app/
</code></pre></div> <p>which shows the newly produced Helm chart:</p> <div class=highlight><pre><span></span><code>mq/environments/prod/mq-spring-app/
├── Chart.yaml
├── requirements.yaml
└── values.yaml
</code></pre></div> <p>Notice that:</p> <ul> <li>The chart for <code>MQ Sample application</code> was created in the <code>mq/environments/</code> folder to reflect the fact this application is part of the <strong>applications</strong> layer.</li> <li>The chart was created in the <code>prod</code> subfolder to reflect the fact that it's going to be deployed to the <code>prod</code> namespace.</li> <li>The chart was created in a new folder <code>/mq-spring-app</code>. This folder is dedicated to <code>MQ Sample application</code>.</li> </ul> </li> </ol> <hr> <h2 id=examine-the-activated-argocd-applications>Examine the activated ArgoCD applications<a class=headerlink href=#examine-the-activated-argocd-applications title="Permanent link">&para;</a></h2> <p>We're now going to examine the activated ArgoCD applications that uses the above Helm charts to manage the deployment of <code>Queue Manager</code> and <code>MQ Sample application</code> to the <code>prod</code> namespace.</p> <h3 id=queue-manager_1>Queue Manager<a class=headerlink href=#queue-manager_1 title="Permanent link">&para;</a></h3> <ol> <li> <p><em>The ArgoCD application for Queue Manager</em></p> <p><code>QM1</code> has its deployment to the cluster managed by a dedicated ArgoCD application called <code>prod-mq-infra-instance</code>.</p> <p>Issue the following command to show the ArgoCD application details:</p> <div class=highlight><pre><span></span><code>cat mq/config/argocd/prod/prod-mq-infra-instance.yaml
</code></pre></div> <p>which shows a YAML file typical of those we've seen before:</p> <div class=highlight><pre><span></span><code>apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: prod-mq-infra-instance
  annotations:
    argocd.argoproj.io/sync-wave: <span class=s2>&quot;300&quot;</span>
  finalizers:
    - resources-finalizer.argocd.argoproj.io
spec:
  destination:
    namespace: prod
    server: https://kubernetes.default.svc
  project: applications
  source:
    path: mq/environments/prod/mq-infra
    repoURL: https://github.com/hp-gitops-mq/multi-tenancy-gitops-apps
    targetRevision: master
    helm:
      valueFiles:
      - values.yaml
  syncPolicy:
    automated:
      prune: <span class=nb>true</span>
      selfHeal: <span class=nb>true</span>
</code></pre></div> <p>See how the Helm chart we explored in the previous section of this topic is referenced by <code>path: mq/environments/prod/mq-infra</code>:</p> <div class=highlight><pre><span></span><code>mq/environments/prod/mq-infra
├── Chart.yaml
├── requirements.yaml
└── values.yaml
</code></pre></div> <p>The ArgoCD application applies this Helm chart to the cluster to instantiate <code>QM1</code> as a set of cluster resources.</p> </li> <li> <p><em>Look at active</em> <code>Queue Manager</code> <em>ArgoCD application</em></p> <p>Let's examine <code>QM1</code> and its Kubernetes resources using the ArgoCD UI.</p> <p>In the ArgoCD UI search the <strong>Applications</strong> view with the keyword <code>prod-mq-infra</code>:</p> <p>(<em>You may need to launch the ArgoCD UI again. Refer to <a href=../../cluster-config/gitops-tekton-argocd/ >these instructions</a>.</em>)</p> <p><img alt=diagram69 src=../images/diagram69.png></p> </li> <li> <p><em>View the new</em> <code>Queue Manager</code> <em>Kubernetes resources</em></p> <p>We can look at the deployed instance of <code>QM1</code> and its dependent kubernetes resources.</p> <p>Click on the <code>prod-mq-infra-instance</code> ArgoCD application:</p> <p><img alt=diagram70 src=../images/diagram70.png></p> </li> </ol> <h3 id=mq-sample-application_1>MQ Sample Application<a class=headerlink href=#mq-sample-application_1 title="Permanent link">&para;</a></h3> <ol> <li> <p><em>The ArgoCD application for MQ Sample Application</em></p> <p><code>MQ Sample Application</code> has its deployment to the cluster managed by a dedicated ArgoCD application called <code>prod-mq-spring-app-instance</code>.</p> <p>Issue the following command to show the ArgoCD application details:</p> <div class=highlight><pre><span></span><code>cat mq/config/argocd/prod/prod-mq-spring-app-instance.yaml
</code></pre></div> <p>which shows a YAML file typical of those we've seen before:</p> <div class=highlight><pre><span></span><code>apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: prod-mq-spring-app-instance
  annotations:
    argocd.argoproj.io/sync-wave: <span class=s2>&quot;300&quot;</span>
  finalizers:
    - resources-finalizer.argocd.argoproj.io    
spec:
  destination:
    namespace: prod
    server: https://kubernetes.default.svc
  project: applications
  source:
    path: mq/environments/prod/mq-spring-app
    repoURL: https://github.com/hp-gitops-mq/multi-tenancy-gitops-apps
    targetRevision: master
    helm:
      valueFiles:
      - values.yaml
  syncPolicy:
    automated:
      prune: <span class=nb>true</span>
      selfHeal: <span class=nb>true</span>
</code></pre></div> <p>See how the Helm chart we explored in the previous section of this topic is referenced by <code>path: mq/environments/prod/mq-spring-app</code>:</p> <div class=highlight><pre><span></span><code>mq/environments/prod/mq-spring-app
├── Chart.yaml
├── requirements.yaml
└── values.yaml
</code></pre></div> <p>The ArgoCD application applies this Helm chart to the cluster to instantiate <code>MQ Sample Application</code> as a set of cluster resources.</p> </li> <li> <p><em>Look at active</em> <code>MQ Sample Application</code> <em>ArgoCD application</em></p> <p>Let's examine <code>MQ Sample Application</code> and its Kubernetes resources using the ArgoCD UI.</p> <p>In the ArgoCD UI search the <strong>Applications</strong> view with the keyword <code>prod-mq-spring</code>:</p> <p>(<em>You may need to launch the ArgoCD UI again. Refer to <a href=../../cluster-config/gitops-tekton-argocd/ >these instructions</a>.</em>)</p> <p><img alt=diagram71 src=../images/diagram71.png></p> </li> <li> <p><em>View the new</em> <code>MQ Sample Application</code> <em>Kubernetes resources</em></p> <p>We can look at the deployed instance of <code>MQ Sample Application</code> and its dependent kubernetes resources.</p> <p>Click on the <code>prod-mq-spring-app-instance</code> ArgoCD application:</p> <p><img alt=diagram72 src=../images/diagram72.png></p> </li> </ol> <hr> <h2 id=validate-the-queue-manager>Validate the Queue Manager<a class=headerlink href=#validate-the-queue-manager title="Permanent link">&para;</a></h2> <ol> <li> <p><em>Connect to the queue manager pod</em></p> <p>Let's connect to this container, so that we can explore the queue manager.</p> <p>Issue the following command:</p> <div class=highlight><pre><span></span><code>oc <span class=nb>exec</span> -n prod qm-dev-ibm-mq-0 -it -- /bin/bash
</code></pre></div> <p>to connect you to the pod default container, where you'll see the <code>bash</code> prompt:</p> <div class=highlight><pre><span></span><code>bash-4.4$
</code></pre></div> <p>Your terminal is now connected to the container running the queue manager.</p> </li> <li> <p><em>Use MQ command line</em></p> <p>The container we've connected to has a fully running instance of the queue manager configured according to the YAML generated by the Helm chart. We can use regular MQ commands to verify that this is a regular queue manager.</p> <p>Issue the following command:</p> <div class=highlight><pre><span></span><code>dspmq -o all
</code></pre></div> <p>to see a full list of the queue managers running in the container:</p> <div class=highlight><pre><span></span><code>QMNAME<span class=o>(</span>QM1<span class=o>)</span>  STATUS<span class=o>(</span>Running<span class=o>)</span> DEFAULT<span class=o>(</span>yes<span class=o>)</span> STANDBY<span class=o>(</span>Permitted<span class=o>)</span> INSTNAME<span class=o>(</span>Installation1<span class=o>)</span> INSTPATH<span class=o>(</span>/opt/mqm<span class=o>)</span> INSTVER<span class=o>(</span><span class=m>9</span>.2.3.0<span class=o>)</span> ROLE<span class=o>(</span>Not configured<span class=o>)</span> INSTANCE<span class=o>()</span> INSYNC<span class=o>()</span> QUORUM<span class=o>()</span>
</code></pre></div> <p>We can see that <code>QM1</code> is running, it's the default queue manager, where it's installed in the container file system, and it's version.</p> </li> <li> <p><em>Display queue manager properties</em></p> <p>We can also run an MQSC command to display the queue manager properties. These properties were defined in the MQSC file.</p> <p>Issue the following command:</p> <div class=highlight><pre><span></span><code>runmqsc QM1 <span class=o>&lt;&lt;&lt;</span> <span class=s2>&quot;dis qmgr&quot;</span>
</code></pre></div> <p>to see the full set of queue manager properties for <code>QM1</code>:</p> <div class=highlight><pre><span></span><code><span class=m>5724</span>-H72 <span class=o>(</span>C<span class=o>)</span> Copyright IBM Corp. <span class=m>1994</span>, <span class=m>2021</span>.
Starting MQSC <span class=k>for</span> queue manager QM1.


     <span class=m>1</span> : dis qmgr
AMQ8408I: Display Queue Manager details.
   QMNAME<span class=o>(</span>QM1<span class=o>)</span>                             ACCTCONO<span class=o>(</span>DISABLED<span class=o>)</span>
   ACCTINT<span class=o>(</span><span class=m>1800</span><span class=o>)</span>                           ACCTMQI<span class=o>(</span>OFF<span class=o>)</span>
   ACCTQ<span class=o>(</span>OFF<span class=o>)</span>                              ACTIVREC<span class=o>(</span>MSG<span class=o>)</span>
   ACTVCONO<span class=o>(</span>DISABLED<span class=o>)</span>                      ACTVTRC<span class=o>(</span>OFF<span class=o>)</span>
   ADVCAP<span class=o>(</span>ENABLED<span class=o>)</span>                         ALTDATE<span class=o>(</span><span class=m>2021</span>-09-29<span class=o>)</span>
   ALTTIME<span class=o>(</span><span class=m>14</span>.38.48<span class=o>)</span>                       AMQPCAP<span class=o>(</span>NO<span class=o>)</span>
   AUTHOREV<span class=o>(</span>DISABLED<span class=o>)</span>                      CCSID<span class=o>(</span><span class=m>819</span><span class=o>)</span>
   CERTLABL<span class=o>(</span> <span class=o>)</span>                             CERTVPOL<span class=o>(</span>ANY<span class=o>)</span>
   CHAD<span class=o>(</span>DISABLED<span class=o>)</span>                          CHADEV<span class=o>(</span>DISABLED<span class=o>)</span>
   CHADEXIT<span class=o>(</span> <span class=o>)</span>                             CHLEV<span class=o>(</span>DISABLED<span class=o>)</span>
   CHLAUTH<span class=o>(</span>DISABLED<span class=o>)</span>                       CLWLDATA<span class=o>(</span> <span class=o>)</span>
   CLWLEXIT<span class=o>(</span> <span class=o>)</span>                             CLWLLEN<span class=o>(</span><span class=m>100</span><span class=o>)</span>
   CLWLMRUC<span class=o>(</span><span class=m>999999999</span><span class=o>)</span>                     CLWLUSEQ<span class=o>(</span>LOCAL<span class=o>)</span>
   CMDEV<span class=o>(</span>DISABLED<span class=o>)</span>                         CMDLEVEL<span class=o>(</span><span class=m>923</span><span class=o>)</span>
   COMMANDQ<span class=o>(</span>SYSTEM.ADMIN.COMMAND.QUEUE<span class=o>)</span>    CONFIGEV<span class=o>(</span>DISABLED<span class=o>)</span>
   CONNAUTH<span class=o>(</span>SYSTEM.DEFAULT.AUTHINFO.IDPWOS<span class=o>)</span>
   CRDATE<span class=o>(</span><span class=m>2021</span>-09-29<span class=o>)</span>                      CRTIME<span class=o>(</span><span class=m>14</span>.38.45<span class=o>)</span>
   CUSTOM<span class=o>(</span> <span class=o>)</span>                               DEADQ<span class=o>(</span>DEV.DEAD.LETTER.QUEUE<span class=o>)</span>
   DEFCLXQ<span class=o>(</span>SCTQ<span class=o>)</span>                           DEFXMITQ<span class=o>(</span> <span class=o>)</span>
   DESCR<span class=o>(</span> <span class=o>)</span>                                DISTL<span class=o>(</span>YES<span class=o>)</span>
   IMGINTVL<span class=o>(</span><span class=m>60</span><span class=o>)</span>                            IMGLOGLN<span class=o>(</span>OFF<span class=o>)</span>
   IMGRCOVO<span class=o>(</span>YES<span class=o>)</span>                           IMGRCOVQ<span class=o>(</span>YES<span class=o>)</span>
   IMGSCHED<span class=o>(</span>MANUAL<span class=o>)</span>                        INHIBTEV<span class=o>(</span>DISABLED<span class=o>)</span>
   IPADDRV<span class=o>(</span>IPV4<span class=o>)</span>                           LOCALEV<span class=o>(</span>DISABLED<span class=o>)</span>
   LOGGEREV<span class=o>(</span>DISABLED<span class=o>)</span>                      MARKINT<span class=o>(</span><span class=m>5000</span><span class=o>)</span>
   MAXHANDS<span class=o>(</span><span class=m>256</span><span class=o>)</span>                           MAXMSGL<span class=o>(</span><span class=m>4194304</span><span class=o>)</span>
   MAXPROPL<span class=o>(</span>NOLIMIT<span class=o>)</span>                       MAXPRTY<span class=o>(</span><span class=m>9</span><span class=o>)</span>
   MAXUMSGS<span class=o>(</span><span class=m>10000</span><span class=o>)</span>                         MONACLS<span class=o>(</span>QMGR<span class=o>)</span>
   MONCHL<span class=o>(</span>OFF<span class=o>)</span>                             MONQ<span class=o>(</span>OFF<span class=o>)</span>
   PARENT<span class=o>(</span> <span class=o>)</span>                               PERFMEV<span class=o>(</span>DISABLED<span class=o>)</span>
   PLATFORM<span class=o>(</span>UNIX<span class=o>)</span>                          PSMODE<span class=o>(</span>ENABLED<span class=o>)</span>
   PSCLUS<span class=o>(</span>ENABLED<span class=o>)</span>                         PSNPMSG<span class=o>(</span>DISCARD<span class=o>)</span>
   PSNPRES<span class=o>(</span>NORMAL<span class=o>)</span>                         PSRTYCNT<span class=o>(</span><span class=m>5</span><span class=o>)</span>
   PSSYNCPT<span class=o>(</span>IFPER<span class=o>)</span>                         QMID<span class=o>(</span>QM1_2021-09-29_14.38.45<span class=o>)</span>
   REMOTEEV<span class=o>(</span>DISABLED<span class=o>)</span>                      REPOS<span class=o>(</span> <span class=o>)</span>
   REPOSNL<span class=o>(</span> <span class=o>)</span>                              REVDNS<span class=o>(</span>ENABLED<span class=o>)</span>
   ROUTEREC<span class=o>(</span>MSG<span class=o>)</span>                           SCHINIT<span class=o>(</span>QMGR<span class=o>)</span>
   SCMDSERV<span class=o>(</span>QMGR<span class=o>)</span>                          SPLCAP<span class=o>(</span>ENABLED<span class=o>)</span>
   SSLCRLNL<span class=o>(</span> <span class=o>)</span>                             SSLCRYP<span class=o>(</span> <span class=o>)</span>
   SSLEV<span class=o>(</span>DISABLED<span class=o>)</span>                         SSLFIPS<span class=o>(</span>NO<span class=o>)</span>
   SSLKEYR<span class=o>(</span>/run/runmqserver/tls/key<span class=o>)</span>       SSLRKEYC<span class=o>(</span><span class=m>0</span><span class=o>)</span>
   STATACLS<span class=o>(</span>QMGR<span class=o>)</span>                          STATCHL<span class=o>(</span>OFF<span class=o>)</span>
   STATINT<span class=o>(</span><span class=m>1800</span><span class=o>)</span>                           STATMQI<span class=o>(</span>OFF<span class=o>)</span>
   STATQ<span class=o>(</span>OFF<span class=o>)</span>                              STRSTPEV<span class=o>(</span>ENABLED<span class=o>)</span>
   SUITEB<span class=o>(</span>NONE<span class=o>)</span>                            SYNCPT
   TREELIFE<span class=o>(</span><span class=m>1800</span><span class=o>)</span>                          TRIGINT<span class=o>(</span><span class=m>999999999</span><span class=o>)</span>
   VERSION<span class=o>(</span><span class=m>09020300</span><span class=o>)</span>                       XRCAP<span class=o>(</span>NO<span class=o>)</span>
One MQSC <span class=nb>command</span> read.
No commands have a syntax error.
All valid MQSC commands were processed.
</code></pre></div> <p>Note how <code>CHLAUTH(DISABLED)</code> has been set. This was set in the MQSC file configuration for <code>QM1</code> in via the <code>mqsc-configmap</code> configmap.</p> <p>Feel free to run other <code>runmqsc</code> commands to explore the queue manager properties.</p> </li> <li> <p><em>Exit from queue manager container</em></p> <p>When we're finished exploring the queue manager container, we can exit it.</p> <p>Issue the following command:</p> <div class=highlight><pre><span></span><code><span class=nb>exit</span>
</code></pre></div> <p>to return to your local machine's command prompt:</p> <div class=highlight><pre><span></span><code><span class=nb>exit</span>
.../git/multi-tenancy-gitops-apps
</code></pre></div> </li> </ol> <hr> <h2 id=validate-the-application>Validate the Application<a class=headerlink href=#validate-the-application title="Permanent link">&para;</a></h2> <ol> <li> <p><em>Check the application is running</em></p> <p>Using the <code>location</code> value from the <code>route</code> we can call the application to check its health by appending <code>/health</code>, for example:</p> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>PROD_APP_URL</span><span class=o>=</span><span class=k>$(</span>oc get route -n staging mq-spring-app -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s2>&quot;{.spec.host}&quot;</span><span class=k>)</span>
curl -X GET https://<span class=nv>$PROD_APP_URL</span>/actuator/health
</code></pre></div> <div class=highlight><pre><span></span><code><span class=o>{</span><span class=s2>&quot;status&quot;</span>:<span class=s2>&quot;UP&quot;</span>,<span class=s2>&quot;components&quot;</span>:<span class=o>{</span><span class=s2>&quot;HeathEndPointMain&quot;</span>:<span class=o>{</span><span class=s2>&quot;status&quot;</span>:<span class=s2>&quot;UP&quot;</span><span class=o>}</span>,<span class=s2>&quot;diskSpace&quot;</span>:<span class=o>{</span><span class=s2>&quot;status&quot;</span>:<span class=s2>&quot;UP&quot;</span>,<span class=s2>&quot;details&quot;</span>:<span class=o>{</span><span class=s2>&quot;total&quot;</span>:105552732160,<span class=s2>&quot;free&quot;</span>:74679922688,<span class=s2>&quot;threshold&quot;</span>:10485760,<span class=s2>&quot;exists&quot;</span>:true<span class=o>}}</span>,<span class=s2>&quot;jms&quot;</span>:<span class=o>{</span><span class=s2>&quot;status&quot;</span>:<span class=s2>&quot;UP&quot;</span>,<span class=s2>&quot;details&quot;</span>:<span class=o>{</span><span class=s2>&quot;provider&quot;</span>:<span class=s2>&quot;IBM MQ JMS Provider&quot;</span><span class=o>}}</span>,<span class=s2>&quot;livenessState&quot;</span>:<span class=o>{</span><span class=s2>&quot;status&quot;</span>:<span class=s2>&quot;UP&quot;</span><span class=o>}</span>,<span class=s2>&quot;ping&quot;</span>:<span class=o>{</span><span class=s2>&quot;status&quot;</span>:<span class=s2>&quot;UP&quot;</span><span class=o>}</span>,<span class=s2>&quot;readinessState&quot;</span>:<span class=o>{</span><span class=s2>&quot;status&quot;</span>:<span class=s2>&quot;UP&quot;</span><span class=o>}}</span>,<span class=s2>&quot;groups&quot;</span>:<span class=o>[</span><span class=s2>&quot;liveness&quot;</span>,<span class=s2>&quot;readiness&quot;</span><span class=o>]}</span>
</code></pre></div> </li> <li> <p><em>Call the application to put a message to a queue</em></p> <p>Using the same <code>location</code> value we can call the application to to put a message to a queue on the queue manager, for example:</p> <div class=highlight><pre><span></span><code>curl -X GET https://<span class=nv>$PROD_APP_URL</span>/api/send-hello-world
</code></pre></div> </li> <li> <p><em>Call the application to get a message from a queue</em></p> <p>Using the same <code>location</code> value we can call the application to to get a message from a queue on the queue manager, for example:</p> <div class=highlight><pre><span></span><code>curl -X GET https://<span class=nv>$PROD_APP_URL</span>/api/recv
</code></pre></div> </li> <li> <p><em>Call the application to put a JSON message to a queue</em></p> <p>Using the same <code>location</code> value we can call the application to to put a message with a JSON payload to a queue on the queue manager, for example:</p> <div class=highlight><pre><span></span><code>curl -X POST -H <span class=s2>&quot;Content-Type: application/json&quot;</span> https://<span class=nv>$PROD_APP_URL</span>/api/send-json --data <span class=s2>&quot;{\&quot;data\&quot;:\&quot;Hola Munda\&quot;}&quot;</span>
</code></pre></div> <p>Note the use of the <code>POST</code> verb in the above command. This can be followed with a call to get the message from the queue.</p> </li> </ol> <hr> <p>Congratulations! You've completed your first run of the promotion pipeline from dev to staging.</p> <p>Feel free to run the <code>ibm-mq-promote-stage-prod</code> pipeline more than once to get a feeling for how it works.</p> <p>You've used it to promote an instance of <code>QM1</code> and <code>MQ sample application</code> from <code>staging</code> environment to <code>prod</code> environment in the cluster. You've explored how the promotion pipeline for staging to prod is structured as tasks and steps. You've examined it's pipeline run log to understand how this pipeline works and how tasks are implemented. Finally, you've examined how the GitOps apps repository is updated with the <code>prod</code> resources from a successful run of the pipeline.</p> <p>You've completed set up continuous deployment for the <code>Queue Manager</code> as well as the <code>MQ sample application</code> and deployed their instances to the <code>prod</code> namespace in the cluster. You've interacted with this queue manager using the command line as well as verified the application.</p> <p>In the next topic of this chapter we're going to see how we can automatically promote the changes across environments.</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <!-- Footer --> <footer class=md-footer> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../promoting-environments-dev-stage/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Promote from dev to staging </div> </div> </a> <!-- Link to next page --> <a href=../automate-promotion/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Automate promotion </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright © 2021 Cloud Pak Production Deployment Guides </div> </div> <div class=md-footer-social> <a href=https://github.ibm.com/cloudpakbringup/deployment-guides target=_blank rel=noopener title="Production Deployment Guides on Github Enterprise" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"> <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"> </path> </svg> </a> <a href=https://ibm-cloud.slack.com/archives/C02CQ6M2D2R target=_blank rel=noopener title=Slack class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"> <path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"> </path> </svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tracking", "navigation.tabs.sticky", "navigation.top", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../../assets/javascripts/workers/search.c7dec7e7.min.js"}</script> <script src=../../../../../assets/javascripts/bundle.da79ceb7.min.js></script> </body> </html>