<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta name=author content="Cloud Pak Production Deployment Guides development team"><link rel=icon href=../../../../../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.2.5"><title>Promote APIs - Cloud Pak Production Deployment Guides</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.2d9f7617.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.e6a45f82.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><link rel=stylesheet href=../../../../../css/extra.css><link rel=stylesheet href=../../../../../css/toolkit-code.css><script>__md_scope=new URL("../../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Q0FLL49YN3"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&gtag("event","search",{search_term:this.value})}),"undefined"!=typeof location$&&location$.subscribe(function(e){gtag("config","G-Q0FLL49YN3",{page_path:e.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q0FLL49YN3"></script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="Cloud Pak Production Deployment Guides - Promote APIs"><meta property=og:description content="The Cloud Pak Production Deployment Guides document and demonstrate how to run cloud-native solutions leveraging IBM Cloud Pak capabilities in a Red Hat OpenShift environment"><meta property=og:url content=None><meta property=og:image content=assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#promote-application-apis-in-ibm-api-connect-to-production class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../.. title="Cloud Pak Production Deployment Guides" class="md-header__button md-logo" aria-label="Cloud Pak Production Deployment Guides" data-md-component=logo> <img src=../../../../../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Cloud Pak Production Deployment Guides </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Promote APIs </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../../../overview/overview/ class=md-tabs__link> Production Considerations </a> </li> <li class=md-tabs__item> <a href=../../../../../quickstart/overview/ class=md-tabs__link> Quick Start Demos </a> </li> <li class=md-tabs__item> <a href=../../../../guides-overview/ class="md-tabs__link md-tabs__link--active"> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../../../../infrastructure/ad/ class=md-tabs__link> References </a> </li> <li class=md-tabs__item> <a href=../../../../../overview/whats-new/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!-- Determine class according to configuration --> <!-- Main navigation --> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <!-- Site title --> <!--
  <label class="md-nav__title" for="__drawer">
    <a
      href="../../../../.."
      title="Cloud Pak Production Deployment Guides"
      class="md-nav__button md-logo"
      aria-label="Cloud Pak Production Deployment Guides"
      data-md-component="logo"
    >
      
  <img src="../../../../../images/cloudnativetoolkit.png" alt="logo">

    </a>
    Cloud Pak Production Deployment Guides
  </label>
--> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> <!-- Render item list --> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Production Considerations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Production Considerations" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Production Considerations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../overview/overview/ class=md-nav__link> Objective </a> </li> <li class=md-nav__item> <a href=../../../../../gitops/personas/ class=md-nav__link> Personas </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> DevOps Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="DevOps Automation" data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> DevOps Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../automation/why-automate/ class=md-nav__link> Why Automate? </a> </li> <li class=md-nav__item> <a href=../../../../../gitops/structure/ class=md-nav__link> GitOps Structure </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_4 type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4> Golden Topologies <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Golden Topologies" data-md-level=2> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Golden Topologies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-azure/ class=md-nav__link> Azure Unmanaged </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-aro/ class=md-nav__link> Azure Managed (ARO) </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-aws/ class=md-nav__link> AWS Unmanaged </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-rosa/ class=md-nav__link> AWS Managed (ROSA) </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/golden-topology-roks/ class=md-nav__link> IBM Cloud Managed (ROKS) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5 type=checkbox id=__nav_2_5> <label class=md-nav__link for=__nav_2_5> Cloud Pak for Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Integration" data-md-level=2> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> Cloud Pak for Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_1 type=checkbox id=__nav_2_5_1> <label class=md-nav__link for=__nav_2_5_1> IBM App Connect Enterprise <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM App Connect Enterprise" data-md-level=3> <label class=md-nav__title for=__nav_2_5_1> <span class="md-nav__icon md-icon"></span> IBM App Connect Enterprise </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ace/overview/architecture/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_2 type=checkbox id=__nav_2_5_2> <label class=md-nav__link for=__nav_2_5_2> IBM Message Queue <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Message Queue" data-md-level=3> <label class=md-nav__title for=__nav_2_5_2> <span class="md-nav__icon md-icon"></span> IBM Message Queue </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../../security/information/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../cloud-native/promote-environments/ class=md-nav__link> Promoting across environments </a> </li> <li class=md-nav__item> <a href=../../performance/performance/ class=md-nav__link> Performance </a> </li> <li class=md-nav__item> <a href=../../high-availability/overview/ class=md-nav__link> High Availability </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3 type=checkbox id=__nav_2_5_3> <label class=md-nav__link for=__nav_2_5_3> IBM API Connect <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM API Connect" data-md-level=3> <label class=md-nav__title for=__nav_2_5_3> <span class="md-nav__icon md-icon"></span> IBM API Connect </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_5_3_1 type=checkbox id=__nav_2_5_3_1> <label class=md-nav__link for=__nav_2_5_3_1> Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Architecture data-md-level=4> <label class=md-nav__title for=__nav_2_5_3_1> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/architecture/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> <li class=md-nav__item> <a href=../../../apic/architecture/multi-cloud/ class=md-nav__link> Multi-cloud </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../apic/security/overview/ class=md-nav__link> Security </a> </li> <li class=md-nav__item> <a href=../../../apic/high-availability/overview/ class=md-nav__link> High Availability </a> </li> <li class=md-nav__item> <a href=../../../apic/disaster-recovery/overview/ class=md-nav__link> Disaster Recovery </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6 type=checkbox id=__nav_2_6> <label class=md-nav__link for=__nav_2_6> Cloud Pak for Business Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Business Automation" data-md-level=2> <label class=md-nav__title for=__nav_2_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Business Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_1 type=checkbox id=__nav_2_6_1> <label class=md-nav__link for=__nav_2_6_1> IBM Automation Decision Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Automation Decision Services" data-md-level=3> <label class=md-nav__title for=__nav_2_6_1> <span class="md-nav__icon md-icon"></span> IBM Automation Decision Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/ads/architecture/ads/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_6_2 type=checkbox id=__nav_2_6_2> <label class=md-nav__link for=__nav_2_6_2> IBM Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Process Mining" data-md-level=3> <label class=md-nav__title for=__nav_2_6_2> <span class="md-nav__icon md-icon"></span> IBM Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/architecture/ibm-cloud/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_7 type=checkbox id=__nav_2_7> <label class=md-nav__link for=__nav_2_7> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=2> <label class=md-nav__title for=__nav_2_7> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d-hadr/cpdbase/overview/architecture/ class=md-nav__link> Architecture </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Quick Start Demos <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Quick Start Demos" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Quick Start Demos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cntk/ class=md-nav__link> Cloud Native Toolkit </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> Cloud Pak for Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Integration" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Cloud Pak for Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-ace/ class=md-nav__link> IBM App Connect Enterprise </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-mq/ class=md-nav__link> IBM Message Queue </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-apic/ class=md-nav__link> IBM API Connect </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-es/ class=md-nav__link> IBM Event Streams </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> Cloud Pak for Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Security" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Cloud Pak for Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4s/ class=md-nav__link> Cloud Pak for Security </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> Cloud Pak for Business Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Business Automation" data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Cloud Pak for Business Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-process-mining/ class=md-nav__link> IBM Process Mining </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d/ class=md-nav__link> Cloud Pak for Data </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d-ws/ class=md-nav__link> IBM Watson Studio </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-cp4d-wkc/ class=md-nav__link> IBM Watson Knowledge Catalog </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7> Observability <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Observability data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Observability </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-agent/ class=md-nav__link> Instana Agent </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-grafana/ class=md-nav__link> Instana & Grafana </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-server/ class=md-nav__link> Instana Server </a> </li> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-instana-mq/ class=md-nav__link> Instana & MQ </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8> Sterling B2Bi <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Sterling B2Bi" data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Sterling B2Bi </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../quickstart/quickstart-sterling-b2bi/ class=md-nav__link> Sterling File Gateway </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Tutorials <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tutorials data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../guides-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> Infrastructure <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Infrastructure data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/infra-overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_2 type=checkbox id=__nav_4_2_2> <label class=md-nav__link for=__nav_4_2_2> Managed Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Managed Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_2> <span class="md-nav__icon md-icon"></span> Managed Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/roks/ class=md-nav__link> IBM ROKS </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/rosa/ class=md-nav__link> Amazon ROSA </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/aro/ class=md-nav__link> Microsoft ARO </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2_3 type=checkbox id=__nav_4_2_3> <label class=md-nav__link for=__nav_4_2_3> Unmanaged Clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Unmanaged Clusters" data-md-level=3> <label class=md-nav__title for=__nav_4_2_3> <span class="md-nav__icon md-icon"></span> Unmanaged Clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/aws/ class=md-nav__link> Amazon AWS </a> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/azure/ class=md-nav__link> Microsoft Azure </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../infrastructure/restricted-networks/ class=md-nav__link> Restricted Networks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3 checked> <label class=md-nav__link for=__nav_4_3> Cloud Pak for Integration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Integration" data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Cloud Pak for Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1 type=checkbox id=__nav_4_3_1> <label class=md-nav__link for=__nav_4_3_1> IBM App Connect Enterprise <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM App Connect Enterprise" data-md-level=3> <label class=md-nav__title for=__nav_4_3_1> <span class="md-nav__icon md-icon"></span> IBM App Connect Enterprise </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ace/overview/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../ace/overview/architecture/ class=md-nav__link> Architecture </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_3 type=checkbox id=__nav_4_3_1_3> <label class=md-nav__link for=__nav_4_3_1_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ace/cluster-create/ibm-setup/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_4 type=checkbox id=__nav_4_3_1_4> <label class=md-nav__link for=__nav_4_3_1_4> Configure the Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the Cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_4> <span class="md-nav__icon md-icon"></span> Configure the Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ace/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps, Tekton & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../ace/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> <li class=md-nav__item> <a href=../../../ace/cluster-config/services/ class=md-nav__link> Deploying Services </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../ace/cloud-native-example/example/ class=md-nav__link> Cloud Native Example </a> </li> <li class=md-nav__item> <a href=../../../ace/deploy-backend-service/deploy-backend-service/ class=md-nav__link> Deploy Backend Service </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_1_7 type=checkbox id=__nav_4_3_1_7> <label class=md-nav__link for=__nav_4_3_1_7> Build Integration Server <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build Integration Server" data-md-level=4> <label class=md-nav__title for=__nav_4_3_1_7> <span class="md-nav__icon md-icon"></span> Build Integration Server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../ace/build-integration-server/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../ace/build-integration-server/build-configurations/ class=md-nav__link> Build Configuration </a> </li> <li class=md-nav__item> <a href=../../../ace/build-integration-server/build-integration-server/ class=md-nav__link> Build Integration Server </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../ace/environment-promotion/promoting-environments/ class=md-nav__link> Environment Promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2 type=checkbox id=__nav_4_3_2 checked> <label class=md-nav__link for=__nav_4_3_2> IBM Message Queue <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Message Queue" data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> IBM Message Queue </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../using/this-guide/ class=md-nav__link> The MQ tutorial </a> </li> <li class=md-nav__item> <a href=../../overview/architecture/ class=md-nav__link> Target architecture </a> </li> <li class=md-nav__item> <a href=../../cluster-create/ibm-setup/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_4 type=checkbox id=__nav_4_3_2_4> <label class=md-nav__link for=__nav_4_3_2_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../cluster-config/services/ class=md-nav__link> Add services </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_5 type=checkbox id=__nav_4_3_2_5> <label class=md-nav__link for=__nav_4_3_2_5> Build Queue Manager <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build Queue Manager" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_5> <span class="md-nav__icon md-icon"></span> Build Queue Manager </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../qmgr-pipeline/topic1/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../qmgr-pipeline/topic2/ class=md-nav__link> Running the pipeline </a> </li> <li class=md-nav__item> <a href=../../qmgr-pipeline/topic3/ class=md-nav__link> Deploying and using </a> </li> <li class=md-nav__item> <a href=../../qmgr-pipeline/topic4/ class=md-nav__link> Continuous updates </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_6 type=checkbox id=__nav_4_3_2_6> <label class=md-nav__link for=__nav_4_3_2_6> Build MQ application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Build MQ application" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_6> <span class="md-nav__icon md-icon"></span> Build MQ application </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../app-pipeline/topic1/ class=md-nav__link> Sample application </a> </li> <li class=md-nav__item> <a href=../../app-pipeline/topic2/ class=md-nav__link> Configuring the pipeline </a> </li> <li class=md-nav__item> <a href=../../app-pipeline/topic3/ class=md-nav__link> Managing an application change </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_7 type=checkbox id=__nav_4_3_2_7> <label class=md-nav__link for=__nav_4_3_2_7> Environment Promotion <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Environment Promotion" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_7> <span class="md-nav__icon md-icon"></span> Environment Promotion </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cloud-native/promoting-environments-dev-stage/ class=md-nav__link> Promote from dev to staging </a> </li> <li class=md-nav__item> <a href=../../cloud-native/promoting-environments-stage-prod/ class=md-nav__link> Promote from staging to prod </a> </li> <li class=md-nav__item> <a href=../../cloud-native/automate-promotion/ class=md-nav__link> Automate promotion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_8 type=checkbox id=__nav_4_3_2_8> <label class=md-nav__link for=__nav_4_3_2_8> Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Security data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_8> <span class="md-nav__icon md-icon"></span> Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../security/handson/mtls/ class=md-nav__link> Secure data in motion </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_9 type=checkbox id=__nav_4_3_2_9 checked> <label class=md-nav__link for=__nav_4_3_2_9> Expose MQ App APIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Expose MQ App APIs" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_9> <span class="md-nav__icon md-icon"></span> Expose MQ App APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../deploy-apic/ class=md-nav__link> Deploy API Connect </a> </li> <li class=md-nav__item> <a href=../configure-apic/ class=md-nav__link> Configure API Connect </a> </li> <li class=md-nav__item> <a href=../publish-apis/ class=md-nav__link> Publish APIs </a> </li> <li class=md-nav__item> <a href=../consume-apis/ class=md-nav__link> Consume APIs </a> </li> <li class=md-nav__item> <a href=../monitor-apis/ class=md-nav__link> Monitor APIs </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Promote APIs <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Promote APIs </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#production-catalog class=md-nav__link> Production catalog </a> </li> <li class=md-nav__item> <a href=#apis-and-products-as-code class=md-nav__link> APIs and Products as Code </a> <nav class=md-nav aria-label="APIs and Products as Code"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#apis-and-products-github-repository class=md-nav__link> APIs and Products GitHub Repository </a> </li> <li class=md-nav__item> <a href=#api-and-product-code-definitions class=md-nav__link> API and Product Code Definitions </a> </li> <li class=md-nav__item> <a href=#parametrize-environment class=md-nav__link> Parametrize Environment </a> </li> <li class=md-nav__item> <a href=#commit-and-deliver class=md-nav__link> Commit and Deliver </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#publish-apis-and-products-pipeline class=md-nav__link> Publish APIs and Products Pipeline </a> <nav class=md-nav aria-label="Publish APIs and Products Pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#deploy-the-pipeline class=md-nav__link> Deploy the Pipeline </a> </li> <li class=md-nav__item> <a href=#pipeline-scripts class=md-nav__link> Pipeline scripts </a> </li> <li class=md-nav__item> <a href=#provide-credentials class=md-nav__link> Provide Credentials </a> </li> <li class=md-nav__item> <a href=#execute-the-pipeline class=md-nav__link> Execute the Pipeline </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#consume-production-apis class=md-nav__link> Consume Production APIs </a> </li> <li class=md-nav__item> <a href=#links class=md-nav__link> Links </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2_10 type=checkbox id=__nav_4_3_2_10> <label class=md-nav__link for=__nav_4_3_2_10> Architecture Decisions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Architecture Decisions" data-md-level=4> <label class=md-nav__title for=__nav_4_3_2_10> <span class="md-nav__icon md-icon"></span> Architecture Decisions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ad/ class=md-nav__link> Decision Index </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3 type=checkbox id=__nav_4_3_3> <label class=md-nav__link for=__nav_4_3_3> IBM API Connect <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM API Connect" data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> IBM API Connect </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/overview/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_2 type=checkbox id=__nav_4_3_3_2> <label class=md-nav__link for=__nav_4_3_3_2> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_2> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_3 type=checkbox id=__nav_4_3_3_3> <label class=md-nav__link for=__nav_4_3_3_3> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_3> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps, Tekton & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../apic/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_4 type=checkbox id=__nav_4_3_3_4> <label class=md-nav__link for=__nav_4_3_3_4> Deploy APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_4> <span class="md-nav__icon md-icon"></span> Deploy APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_5 type=checkbox id=__nav_4_3_3_5> <label class=md-nav__link for=__nav_4_3_3_5> Configure APIC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure APIC" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_5> <span class="md-nav__icon md-icon"></span> Configure APIC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/configuration/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3_6 type=checkbox id=__nav_4_3_3_6> <label class=md-nav__link for=__nav_4_3_3_6> Publish APIs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Publish APIs" data-md-level=4> <label class=md-nav__title for=__nav_4_3_3_6> <span class="md-nav__icon md-icon"></span> Publish APIs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/publish/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4 type=checkbox id=__nav_4_3_4> <label class=md-nav__link for=__nav_4_3_4> IBM API Connect Multi-Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM API Connect Multi-Cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_3_4> <span class="md-nav__icon md-icon"></span> IBM API Connect Multi-Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/multi-cluster/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/create-clusters/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4_3 type=checkbox id=__nav_4_3_4_3> <label class=md-nav__link for=__nav_4_3_4_3> Configure the clusters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the clusters" data-md-level=4> <label class=md-nav__title for=__nav_4_3_4_3> <span class="md-nav__icon md-icon"></span> Configure the clusters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../apic/multi-cluster/configure-clusters-gitops/ class=md-nav__link> GitOps repos & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/configure-clusters-gitops-config/ class=md-nav__link> Configure GitOps repos </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/deploy/ class=md-nav__link> Deploy APIC </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/config-pipeline/ class=md-nav__link> Configure APIC </a> </li> <li class=md-nav__item> <a href=../../../apic/multi-cluster/publish-pipeline/ class=md-nav__link> Publish APIs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5 type=checkbox id=__nav_4_3_5> <label class=md-nav__link for=__nav_4_3_5> Event-Driven Architecture <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Event-Driven Architecture" data-md-level=3> <label class=md-nav__title for=__nav_4_3_5> <span class="md-nav__icon md-icon"></span> Event-Driven Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../eda/link/ class=md-nav__link> EDA GitOps Solution </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Cloud Pak for Security <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Security" data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Cloud Pak for Security </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/using/this-guide/ class=md-nav__link> The CP4S tutorial </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/overview/architecture/ class=md-nav__link> CP4S architecture </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-create/ibm-setup/ class=md-nav__link> Create the cluster </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_4 type=checkbox id=__nav_4_4_4> <label class=md-nav__link for=__nav_4_4_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_4_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/gitops-tekton-argocd/ class=md-nav__link> Set up GitOps </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/gitops-config/ class=md-nav__link> Add infrastructure </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/services/ class=md-nav__link> Add services </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/backup-recovery-upgrade/ class=md-nav__link> Managing Lifecycle for CP4S </a> </li> <li class=md-nav__item> <a href=../../../../cp4s/cp4s-tree/cluster-config/connect-datasources/ class=md-nav__link> Connecting DataSources for CP4S </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Cloud Pak for Data <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Data" data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Cloud Pak for Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/platform/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_2 type=checkbox id=__nav_4_5_2> <label class=md-nav__link for=__nav_4_5_2> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_5_2> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/cluster-create/ibm-setup/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_3 type=checkbox id=__nav_4_5_3> <label class=md-nav__link for=__nav_4_5_3> Configure the Cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the Cluster" data-md-level=3> <label class=md-nav__title for=__nav_4_5_3> <span class="md-nav__icon md-icon"></span> Configure the Cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/cluster-config/gitops-argocd/ class=md-nav__link> GitOps and ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../../cp4d/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../cp4d/platform/deployment/ class=md-nav__link> Deployment </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5 type=checkbox id=__nav_4_5_5> <label class=md-nav__link for=__nav_4_5_5> Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Services data-md-level=3> <label class=md-nav__title for=__nav_4_5_5> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5_1 type=checkbox id=__nav_4_5_5_1> <label class=md-nav__link for=__nav_4_5_5_1> Watson Studio <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Studio" data-md-level=4> <label class=md-nav__title for=__nav_4_5_5_1> <span class="md-nav__icon md-icon"></span> Watson Studio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/watson-studio/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../cp4d/watson-studio/deployment/ class=md-nav__link> Deployment </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_5_2 type=checkbox id=__nav_4_5_5_2> <label class=md-nav__link for=__nav_4_5_5_2> Watson Knowledge Catalog <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Watson Knowledge Catalog" data-md-level=4> <label class=md-nav__title for=__nav_4_5_5_2> <span class="md-nav__icon md-icon"></span> Watson Knowledge Catalog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4d/wkc/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../cp4d/wkc/deployment/ class=md-nav__link> Deployment </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6 type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6> Cloud Pak for Automation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cloud Pak for Automation" data-md-level=2> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Cloud Pak for Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1 type=checkbox id=__nav_4_6_1> <label class=md-nav__link for=__nav_4_6_1> IBM Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="IBM Process Mining" data-md-level=3> <label class=md-nav__title for=__nav_4_6_1> <span class="md-nav__icon md-icon"></span> IBM Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/overview/overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/using/this-guide/ class=md-nav__link> Using this guide </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_3 type=checkbox id=__nav_4_6_1_3> <label class=md-nav__link for=__nav_4_6_1_3> Create the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Create the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_3> <span class="md-nav__icon md-icon"></span> Create the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-create/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_4 type=checkbox id=__nav_4_6_1_4> <label class=md-nav__link for=__nav_4_6_1_4> Configure the cluster <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Configure the cluster" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_4> <span class="md-nav__icon md-icon"></span> Configure the cluster </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-config/gitops-tekton-argocd/ class=md-nav__link> GitOps & ArgoCD </a> </li> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/cluster-config/gitops-config/ class=md-nav__link> Getting started with GitOps </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_6_1_5 type=checkbox id=__nav_4_6_1_5> <label class=md-nav__link for=__nav_4_6_1_5> Deploy Process Mining <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Deploy Process Mining" data-md-level=4> <label class=md-nav__title for=__nav_4_6_1_5> <span class="md-nav__icon md-icon"></span> Deploy Process Mining </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../cp4ba/process-mining/deployment/ibm-cloud/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> References <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=References data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../infrastructure/ad/ class=md-nav__link> Architectural Decisions </a> </li> <li class=md-nav__item> <a href=../../../../../references/prerequisites/instructions/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../../../../references/training/training/ class=md-nav__link> Training </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> About <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=About data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../overview/whats-new/ class=md-nav__link> What's New </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6_2 type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2> Contributing Content <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Contributing Content" data-md-level=2> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Contributing Content </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../contribute/githubflow/ class=md-nav__link> GitHub Open Source Contribution </a> </li> <li class=md-nav__item> <a href=../../../../../contribute/documentation/ class=md-nav__link> Running a Local Site Instance </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=#production-catalog class=md-nav__link> Production catalog </a> </li> <li class=md-nav__item> <a href=#apis-and-products-as-code class=md-nav__link> APIs and Products as Code </a> <nav class=md-nav aria-label="APIs and Products as Code"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#apis-and-products-github-repository class=md-nav__link> APIs and Products GitHub Repository </a> </li> <li class=md-nav__item> <a href=#api-and-product-code-definitions class=md-nav__link> API and Product Code Definitions </a> </li> <li class=md-nav__item> <a href=#parametrize-environment class=md-nav__link> Parametrize Environment </a> </li> <li class=md-nav__item> <a href=#commit-and-deliver class=md-nav__link> Commit and Deliver </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#publish-apis-and-products-pipeline class=md-nav__link> Publish APIs and Products Pipeline </a> <nav class=md-nav aria-label="Publish APIs and Products Pipeline"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#deploy-the-pipeline class=md-nav__link> Deploy the Pipeline </a> </li> <li class=md-nav__item> <a href=#pipeline-scripts class=md-nav__link> Pipeline scripts </a> </li> <li class=md-nav__item> <a href=#provide-credentials class=md-nav__link> Provide Credentials </a> </li> <li class=md-nav__item> <a href=#execute-the-pipeline class=md-nav__link> Execute the Pipeline </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#consume-production-apis class=md-nav__link> Consume Production APIs </a> </li> <li class=md-nav__item> <a href=#links class=md-nav__link> Links </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.ibm.com/cloudpakbringup/production-deployment-guides/edit/master/docs/guides/cp4i/mq/apic/promote-apis.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=promote-application-apis-in-ibm-api-connect-to-production>Promote Application APIs in IBM API Connect to Production<a class=headerlink href=#promote-application-apis-in-ibm-api-connect-to-production title="Permanent link">&para;</a></h1> <!--- cSpell:ignore apic OIDC uncommented --> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>So far in this Expose MQ App APIs section of the MQ tutorial, you have successfully deployed IBM API Connect, published your Spring MQ Application APIs to a Developer Portal within your instance of IBM API Connect cluster and managed to consume those APIs from such Developer Portal as in you were a third party or external consumer of these.</p> <p>However, the Developer Portal you have published to and consumed from the Spring MQ Application APIs is associated to the <code>dev</code> catalog. Similar to application development lifecycle and promotion where your application goes from development to staging and finally into production (that you should have already gone through in this tutorial), the APIs for those applications will also travel alongside. That is, you also have a development lifecycle and promotion for your APIs. And likewise you do for you applications, you want your API promotion to be as much automated through code as possible.</p> <p>Automating your API promotion strategy through code means that:</p> <ol> <li>Your API definitions and Products will get stored as code in GitHub.</li> <li>Only through automation those APIs and Products will get published to the staging and production environments.</li> </ol> <p><img alt="MQ Promotion Pipeline Draw.io" src=../images/mq-promotion-pipeline.drawio.png style=max-height:700px></p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Given the environment limitations for running this tutorial, where you are limited to only one RedHat OpenShift cluster, you simulated your development, staging and production environments by segregating and separating your IBM Queue Managers and Spring MQ Applications using RedHat OpenShift Projects. Likewise, you will use the same IBM API Connect Cluster instance to manage, publish and socialize your development, staging and production application APIs by separating and segregating these using catalogs. Remember catalogs provide isolated API run-time environments within a pOrg. There are permission sets within a pOrg and those permissions can be scoped to the pOrg, Catalog or Space level. For more information on physical segregation of your IBM API Connect environments review the <a href=../deploy-apic/#api-cloud>API Cloud</a> section. For more information on logical segregation at the Provider Organization level review the <a href=../configure-apic/#provider-organization>Provider Organization</a> section. </p> </div> <div class="admonition warning"> <p class=admonition-title>Important</p> <p>For simplicity, the API promotion pipeline is shortened to go from development straight into production to cover the main concepts in this educational material. Of course, this is not a recommended practice for any client or enterprise and they should enhance their development lifecycle and promotion to include test, QA, staging, etc phases with their respective environments.</p> </div> <p>In this section you are going to:</p> <ol> <li>Create a production catalog for your application APIs running in production.</li> <li>Define your APIs and Products as code and store these in GitHub.</li> <li>Deploy and use a Tekton pipeline that will publish your APIs and Products into the production catalog.</li> </ol> <h2 id=production-catalog>Production catalog<a class=headerlink href=#production-catalog title="Permanent link">&para;</a></h2> <p>First step in your API promotion strategy for your <code>mq-spring-app</code> API OpenAPI definition, which defines your Spring MQ Application APIs, is to have the corresponding catalogs for the APIs to be published. As explained above, you will use the same IBM API Connect Cluster instance to manage, publish and socialize the APIs of all your applications regardless of what simulated environment these applications are running on. That is, giving the resource limitations of this tutorial to only having one RedHat OpenShift cluster available, you will not have physical segregation of IBM API Connect API Clouds at all and will use catalogs for developing logical separation and segregation of environments for your APIs instead. As also explained above, you will shorten your API promotion pipeline and get the APIs from your development catalog promoted straight into your production catalog. As a result, you need to create a production catalog.</p> <p>First, open up your IBM API Connect API Manager web console by pointing your browser to its url which you can retrieve with:</p> <div class=highlight><pre><span></span><code>oc get apiconnectcluster &lt;APIC_NAME&gt; -n &lt;PROJECT&gt; -o<span class=o>=</span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.status.endpoints[?(@.name==&quot;ui&quot;)].uri}&#39;</span>
</code></pre></div> <p>where <code>&lt;APIC_NAME&gt;</code> is the name of your IBM API Connect Cluster instance and <code>&lt;PROJECT&gt;</code> is the RedHat OpenShift Project where it is deployed (review the <a href=../deploy-apic/#ibm-api-connect-endpoints>IBM API Connect Endpoints section</a> for more details).</p> <p>If you have not logged into your IBM Cloud Pak Platform Navigator, you will be requested to do so first:</p> <p><img alt="cpd login" src=../images/cpd-login.png style=max-height:700px></p> <p>Select <code>IBM provided credentials (admin only)</code> to log in with the IBM Cloud Pak Common Services administrator OIDC credentials that were created when installing the IBM Cloud Pak Foundational Services as a result of installing IBM Message Queue and IBM Cloud Pak Platform Navigator. To retrieve such credentials execute:</p> <div class=highlight><pre><span></span><code>oc extract -n ibm-common-services secrets/platform-auth-idp-credentials --keys<span class=o>=</span>admin_username,admin_password --to<span class=o>=</span>-
</code></pre></div> <p><img alt="cpd credentials" src=../images/cpd-credentials.png style=max-height:700px></p> <p>If you had logged into your IBM Cloud Pak Platform Navigator recently, you would get to the IBM API Connect API Manager login page directly.</p> <p>You will use your <code>Provider Organization Owner</code> user that exists in the <code>API Manager User Registry</code>. Therefore, click on the <code>API Manager User Registry</code> button.</p> <p><img alt="API Manager" src=../images/api-manager-login-1.png style=max-height:1000px></p> <p>You will be prompted to provide the credentials for the <code>Provider Organization Owner</code>. Use the <code>Username</code> and <code>Password</code> you set when creating the <code>Provider Organization Owner</code>:</p> <p><img alt="API Manager" src=../images/api-manager-login-2.png style=max-height:1100px></p> <p>Once you successfully get authenticated, you should get to the IBM API Connect API Manager dashboard. </p> <p><img alt="API Manager" src=../images/api-manager-2.png style=max-height:1000px></p> <p>From your IBM API Connect API Manager dashboard, select <code>Manage catalogs</code>. You should see the default <code>Sandbox</code> catalog and <code>dev</code> catalog you created in the previous chapters of this section of the tutorial.</p> <p><img alt="Promotion API" src=../images/promotion-1.png style=max-height:500px></p> <p>Click on the <code>Add</code> button at the top right corner and then select <code>Create catalog</code>.</p> <p>In the form you are presented with, select the <code>po-admin</code> user (in fact, you can not select any other user since there should not be any other user) in order to create your new catalog. Then provide <code>prod</code> as the name for your new catalog.</p> <p><img alt="Promotion API" src=../images/promotion-2.png style=max-height:700px></p> <p>You should now see your <code>prod</code> catalog as well.</p> <p><img alt="Promotion API" src=../images/promotion-3.png style=max-height:500px></p> <p>Click on your <code>prod</code> catalog. You should see there is no product yet published to the catalog.</p> <p><img alt="Promotion API" src=../images/promotion-4.png style=max-height:450px></p> <h2 id=apis-and-products-as-code>APIs and Products as Code<a class=headerlink href=#apis-and-products-as-code title="Permanent link">&para;</a></h2> <p>Next step is to define your APIs and Products as code.</p> <h3 id=apis-and-products-github-repository>APIs and Products GitHub Repository<a class=headerlink href=#apis-and-products-github-repository title="Permanent link">&para;</a></h3> <p>In order to store your APIs and Products as code in GitHub, you first need to create a new empty repository to store your API and Product definitions as code into. In your terminal, execute</p> <div class=highlight><pre><span></span><code><span class=nb>echo</span> https://github.com/<span class=si>${</span><span class=nv>GIT_ORG</span><span class=si>}</span>
</code></pre></div> <p>Point your browser to the result of the above command. This should open the GitHub organization you created at the beginning of this MQ tutorial to drive GitOps from with all the different repositories you have forked or created from a template for the task.</p> <p><img alt="Promotion API" src=../images/promotion-5.png style=max-height:1000px></p> <p>Click on the green <code>New</code> button on top of your repository list to create your new GitHub repository that will store your API and Product definitions. Provide <code>api-product-definitions</code> for the name of the GitHub repository and a meaningful description for it if you want. Make sure you have selected <strong>Private</strong> (in this case, you are going to make this repository private so that your promotion pipeline requires a GitHub token in order to access your API and Product definitions for security).</p> <p><img alt="Promotion API" src=../images/promotion-6.png style=max-height:800px></p> <p>Click <code>Create repository</code>.</p> <p>Clone your newly created GitHub repository to your local workstation and change directory into it (bear in mind we are using <code>api-product-definitions</code> as the name for the GitHub repository). On your terminal, execute:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span> <span class=nv>$HOME</span>/git
git clone https://github.com/<span class=si>${</span><span class=nv>GIT_ORG</span><span class=si>}</span>/api-product-definitions
<span class=nb>cd</span> api-product-definitions
</code></pre></div> <p>Create a folder for your <code>APIs</code> and another for your <code>Products</code>.</p> <div class=highlight><pre><span></span><code>mkdir APIs
mkdir Products
</code></pre></div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>This tutorial assumes the strategy whereby your API and Product code definitions are stored in a separate and private GitHub repository and both API and Product definitions will have their own folder in such GitHub repository. Having things as much separated as possible was believed to be the best strategy for students understanding the core concepts of an API promotion pipeline. As a result, such API promotion pipeline and has been built accordingly to the strategy explained in this chapter. However, it does not imply by any means it is the best strategy clients could implement and should align with. We believe it is one of the clearest strategies but each client can decide where to store their API and Product code definitions according to their needs and preferences building their API promotion pipeline based on their strategy. For example, there might be clients that prefer these definitions to be stored along with the application code and that is perfectly fine if that works for them. Another example could be to separate <code>dev</code>, <code>test</code>, <code>staging</code>, <code>prod</code>, etc API and Product definitions in separate GitHub repositories, or branches or folders...</p> </div> <h3 id=api-and-product-code-definitions>API and Product Code Definitions<a class=headerlink href=#api-and-product-code-definitions title="Permanent link">&para;</a></h3> <p>Back in your IBM API Connect API Manager, you have only one Product (<code>MQ Spring App</code>) that contains one API (<code>mq-spring-app</code>). In the <a href=../publish-apis/ >Publish APIs</a> chapter you went through how to develop/create an API and publish it into a Product from the IBM API Connect API Manager UI. Throughout that process, you realized that IBM API Connect API Manager provided you with a graphical interface as well as a code interface for developing your APIs and Products. Back at that time you were also advised to remember the <code>code</code> interface as that will be used during the API promotion pipeline.</p> <p>Let's see how can you retrieve that code definition of your APIs and Products, once you have tested these and are comfortable that these are ready to get promoted to production, to check these into your GitHub repository that the API Publish pipeline will use to promote them into your production environment (in this case, into your <code>prod</code> catalog).</p> <div class="admonition warning"> <p class=admonition-title>Important</p> <p>Once again, you are skipping the promotion of APIs and Products through intermediate phases and their respective environments, such as test, staging, etc, and promoting these straight into production for simplicity but by any means this is a recommended practice for clients.</p> </div> <p>Go back to the <code>Develop</code> section of your IBM API Connect API Manager. For that, click on the pencil icon on the left hand side menu bar. You should see your <code>mq-spring-app</code> API.</p> <p><img alt="Promotion API" src=../images/promotion-7.png style=max-height:500px></p> <p>Click on your <code>mq-spring-app</code> API. The graphical view for your API should display. Click on the <code>Source</code> icon to switch to the source code view.</p> <p><img alt="Promotion API" src=../images/promotion-8.png style=max-height:1300px></p> <p>Copy the source code definition of your API into a local file called <code>mq-spring-app_1.0.0.yaml</code> where <code>mq-spring-app</code> is the title of the API and <code>1.0.0</code> its version (this naming pattern will take special relevance during the pipeline execution as the scripts this pipeline executes expects the API definitions files to have that naming convention). Store such file in the <code>APIs</code> folder within your local <code>api-product-definitions</code> GitHub repository clone.</p> <p>Go back to the <code>Develop</code> section of your IBM API Connect API Manager and click on the <code>Products</code> tab this time. You should see your <code>MQ Spring App</code> product.</p> <p><img alt="Promotion API" src=../images/promotion-9.png style=max-height:450px></p> <p>Click on the product to open its definition in the graphical view. Click on the <code>Source</code> tab to display the product code definition.</p> <p><img alt="Promotion API" src=../images/promotion-10.png style=max-height:900px></p> <p>Copy the source code definition of your product into a local file called <code>mq-spring-app_1.0.0.yaml</code> where <code>mq-spring-app</code> is the title of the Product and <code>1.0.0</code> its version (this naming pattern will take special relevance during the pipeline execution as the scripts this pipeline executes expects the API definitions files to have that naming convention). Store such file in the <code>Products</code> folder within your local <code>api-product-definitions</code> GitHub repository clone.</p> <p>If you execute <code>tree .</code> you should see the following structure for your <code>api-product-definitions</code>GitHub repository:</p> <div class="no-copy highlight"><pre><span></span><code>.
├── APIs
│   └── mq-spring-app_1.0.0.yaml
└── Products
    └── mq-spring-app_1.0.0.yaml

2 directories, 2 files
</code></pre></div> <h3 id=parametrize-environment>Parametrize Environment<a class=headerlink href=#parametrize-environment title="Permanent link">&para;</a></h3> <p>One may think that your API and Product code definitions are ready to be committed and delivered to GitHub. However, if you take a closer look at your API code definition, you should realise of the following value for the <code>target-url</code> property:</p> <p><img alt="Promotion API" src=../images/promotion-11.png style=max-height:800px></p> <p>which ties your API definition to your development environment because despite this API definition being promoted and therefore published to the <code>prod</code> catalog, it would still direct the requests to the Spring MQ Application in the development environment (which is the <code>dev</code> RedHat OpenShift Project in this specific scenario of this tutorial). Because the environment separation and segregation for this tutorial has been done at the RedHat OpenShift Project level, due to the resource limitations for this tutorial already explained, the RedHat OpenShift Project for the <code>target-url</code> property value of the API needs to be parametrized. If you had completely separate environments for <code>dev</code>, <code>staging</code>, <code>prod</code>, etc you could always configure the deployment of your Spring MQ Application to the same RedHat OpenShift Project so that you would not need to parametrize it in your API definition.</p> <p>Also, because of those resource limitations for this tutorials too you did not have the chance to separate or segregate your API management strategy by having separate and segregated IBM API Connect API Cloud instances. As a result, you decided to separate and segregate at the catalog level. As a result, the parametrization of the RedHat OpenShift Project value for the <code>target-url</code> property that will direct the requests to the appropriate Spring MQ Application instance, will need to be done at the catalog level. That is, depending on which catalog the API is published to, the RedHat OpenShift Project value for the <code>target-url</code> property will change.</p> <p>Let's have a look at how to do such parametrization. First, open up your <code>mq-spring-app_1.0.0.yaml</code> <strong>API definition</strong> file within your <code>api-product-definitions</code> local GitHub repository clone and change the value of the <code>target-ul</code> property in line <code>129</code> from</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://mq-spring-app.dev:80</span><span class=w></span>
</code></pre></div> <p>to</p> <div class=highlight><pre><span></span><code><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://mq-spring-app.$(environment-name):80</span><span class=w></span>
</code></pre></div> <p>where <code>$(environment-name)</code> will be a catalog property you will need to set when creating a catalog so that it gets the appropriate RedHat OpenShift Project where requests to your Spring MQ Application will need to be redirected to when poking the <code>mq-spring-app</code> API on the catalog. Save the file.</p> <p>Now, go back to your IBM API Connect API Manager home dashboard by clicking on the home icon that appears on top of the left hand side menu. Then, click on <code>Manage catalogs</code> and click on the <code>prod</code> catalog. Once your <code>prod</code> catalog opens up, click on the <code>Catalog settings</code> tab at the top and then on the <code>Catalog properties</code> section on the left hand side menu. You would see that there is not catalog property defined yet.</p> <p><img alt="Promotion API" src=../images/promotion-12.png style=max-height:600px></p> <p>Click on the <code>Create</code> blue button on the top right corner. On the form, set the name of the catalog property to <code>environment-name</code> so that it matches with the variable you have defined above in the API code definition and set the value to <code>prod</code> so that it resolves to the <code>prod</code> RedHat OpenShift Project at runtime.</p> <p><img alt="Promotion API" src=../images/promotion-13.png style=max-height:600px></p> <p>Click on <code>Create</code>. You should now see your newly <code>environment-name</code> catalog property and its default value listed.</p> <p><img alt="Promotion API" src=../images/promotion-14.png style=max-height:600px></p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Create the same <code>environment-name</code> property for the <code>dev</code> catalog.</p> </div> <p>You could right now publish the API definition to the <code>prod</code> catalog and the <code>$(environment-name)</code> catalog property in the <code>target-url</code> API property should resolve correctly.</p> <h3 id=commit-and-deliver>Commit and Deliver<a class=headerlink href=#commit-and-deliver title="Permanent link">&para;</a></h3> <p>You should now be ready to commit and deliver your API and Product code definitions to your <code>api-product-definitions</code> GitHub remote repository so that the API promotion pipeline can take over. On your terminal, execute:</p> <div class=highlight><pre><span></span><code>git add .
git commit -s -m &quot;mq-spring-app API and Product code definitions&quot;
git push origin master
</code></pre></div> <p><img alt="Promotion API" src=../images/promotion-15.png style=max-height:700px></p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Again, because of the simplicity of the API promotion pipeline of this tutorial where you are promoting APIs and Products straight from development to production the strategy followed as to how and where to store those API and Product code definitions allows you to simply work with the <code>master</code> branch of your APIs and Product definitions GitHub repository. As already said, this does not need to be the strategy for all clients and each of them can accommodate to what works best for them for separating and segregating these APIs and Product code definitions for their different phases and respective environments.</p> </div> <h2 id=publish-apis-and-products-pipeline>Publish APIs and Products Pipeline<a class=headerlink href=#publish-apis-and-products-pipeline title="Permanent link">&para;</a></h2> <p>So far you have:</p> <ol> <li>Created the <code>prod</code> catalog.</li> <li>Created the <code>$(environment-name)</code> catalog property and set the appropriate value for it.</li> <li>Extracted your <code>mq-spring-app</code> API and <code>MQ Spring APP</code> Product code definitions.</li> <li>Committed and delivered those API and Product code definitions to your <code>api-product-definitions</code> private GitHub repository.</li> </ol> <p>You are then all set to execute the <code>Publish APIs and Products Pipeline</code> which is a <strong>Tekton pipeline</strong> created as part of the in-depth <a href=../../../apic/publish/ibm-cloud/ >API Connect tutorial</a> that will allow you to publish APIs and Products that are defined as code in a private GitHub repository into a specific catalog of a specific Provider Organization within a specific IBM API Connect API Manager.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Do not confuse the <code>Publish APIs and Products Pipeline</code> technical piece with the term 'Promotion API pipeline' used throughout this IBM API Connect extension section for the in-depth MQ tutorial as the set of actions, technical pieces, processes, etc that are required to promote your APIs through the different environments (<code>dev</code>, <code>test</code>, <code>staging</code>, <code>QA</code>, <code>prod</code>, etc ).</p> </div> <h3 id=deploy-the-pipeline>Deploy the Pipeline<a class=headerlink href=#deploy-the-pipeline title="Permanent link">&para;</a></h3> <p>In order to deploy the <code>Publish APIs and Products Pipeline</code> <strong>Tekton pipeline</strong> created as part of the in-depth <a href=../../../apic/publish/ibm-cloud/ >API Connect tutorial</a>, you need to follow the same GitOps approach you have been following in order to deploy or create any resource in your RedHat OpenShift cluster. That means that in order to create the aforementioned Tekton pipeline you have to it through your <code>multi-tenancy-gitops</code> repository that is driving the GitOps framework for your RedHat OpenShift cluster.</p> <p>As a result, open up the <code>kustomization.yaml</code> file located under <code>multi-tenancy-gitops/0-bootstrap/single-cluster/3-apps</code> and uncomment the following line:</p> <div class="no-copy highlight"><pre><span></span><code><span class=c1>#- argocd/apic/single-cluster-cp4i.yaml</span><span class=w></span>
</code></pre></div> <p>Save the file and commit and deliver your changes:</p> <div class=highlight><pre><span></span><code>git add .
git commit -s -m <span class=s2>&quot;Deploying Publish API and Products Pipeline&quot;</span>
git push origin <span class=nv>$GIT_BRANCH</span>
</code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Make sure your are under the <code>multi-tenancy-gitops</code> folder within your terminal.</p> </div> <p>After few minutes, you check your ArgoCD dashboard and make sure two new ArgoCD applications have been successfully created.</p> <p><img alt="Promotion API" src=../images/promotion-16.png style=max-height:600px></p> <p>If you go to your RedHat OpenShift web console to the <code>Pipelines</code> section on the left hand side under the <code>ci</code> project, you should see one new pipeline called <code>apic-publish-products-apis-pipeline</code> which is the pipeline that will publish your API and Products based on their code definitions you have stored in GitHub.</p> <p><img alt="Promotion API" src=../images/promotion-17.png style=max-height:900px></p> <p>By now, you should also be able to navigate the <code>single-cluster-cp4i.yaml</code> along with the <code>kustomization.yaml</code> file you worked with above within the <code>multi-tenancy-gitops</code> repository to find out how the new pipeline was deployed and where this is defined. You should be able to find out this new pipeline reside within the <code>multi-tenancy-gitops-apps/apic/environments/single-cluster-cp4i</code> folder:</p> <div class="no-copy highlight"><pre><span></span><code>multi-tenancy-gitops-apps/apic/environments/single-cluster-cp4i
├── kustomization.yaml
├── pipelines
│   └── apic-publish-pipeline.yaml
├── roles
│   ├── role.yaml
│   └── rolebinding.yaml
├── secrets
└── tasks
    └── apic-publish-task.yaml
</code></pre></div> <h3 id=pipeline-scripts>Pipeline scripts<a class=headerlink href=#pipeline-scripts title="Permanent link">&para;</a></h3> <p>If you inspect the <code>apic-publish-pipeline.yaml</code> file located under <code>multi-tenancy-gitops-apps/apic/environments/single-cluster-cp4i/pipelines</code> that defines the Publish API and Products Tekton pipeline and review the params section for it you should notice that you already have all the information the pipeline parameters need except for one of them:</p> <div class="no-copy highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">git-apic-pipeline-git-url</span><span class=w></span>
<span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class=w></span>
<span class=w>  </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class=s>&#39;https://github.com/&lt;GIT_ORG&gt;/apic-publish-pipeline.git&#39;</span><span class=w></span>
<span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">GitHub url where the pipeline scripts are stored. These are the python scripts the pipeline will execute</span><span class=w></span>
</code></pre></div> <p>which as per the description is the GitHub repository where the scripts the pipeline will execute are located. So far, you have done or been told nothing about that GitHub repository. However, it is needed for the Publish APIs and Products pipeline to execute. Therefore, it must be part of the GitHub organization you created at the beginning of this in-depth MQ tutorial to contain all GitHub repos. Therefore, you need to make sure a fork of the repository containing the scripts that the Publish APIs and Products pipeline will execute is also in your GitHub organization.</p> <p>The GitHub repository that contains the scripts that the Publish APIs and Products pipeline will execute is at <a href=https://github.com/cloud-native-toolkit/apic-publish-pipeline>https://github.com/cloud-native-toolkit/apic-publish-pipeline</a>. Open up that GitHub repository on your browser and click on the <code>Use this template</code> green button on the top right corner to make a copy of it on your GitHub organization.</p> <p>On the following form, make sure you select the appropriate GitHub organization (you might have several), you provide <code>apic-publish-pipeline</code> for the GitHub repository name, you make sure you select your GitHub repository to be <strong>Private</strong> and you select the <strong><code>Include all branches</code></strong> option to get all branches copied (you will use the branch called <strong><code>cp4i</code></strong> when executing the pipeline as you will see later on in the Execute the Pipeline](#execute-the-pipeline) section).</p> <p><img alt="Promotion API" src=../images/promotion-18.png style=max-height:650px></p> <p>Once this GitHub repository has been copied over to your GitHub organization, this should contain all the following repositories.</p> <p><img alt="Promotion API" src=../images/promotion-19.png style=max-height:1200px></p> <p>The scripts contained in this <code>apic-publish-pipeline</code> GitHub repository under the <code>scripts</code> folder are python scripts that will use the <a href=https://apic-api.apiconnect.ibmcloud.com/v10/10.0.4.0.html#/documentation/introduction>IBM API Connect platform REST APIs</a> to carry out the needed actions against your IBM API Connect Cluster instance.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The platform REST APIs for IBM API Connect v10 provide complete access to the capability of the platform. They may be used to automate administration of the platform; for scripts and tools to support a continuous integration environment for API development and publishing; and for management of catalogs of APIs and their subscribers. The operations provided in the REST API also correspond directly with commands in the <a href="https://www.ibm.com/docs/en/api-connect/10.0.x?topic=information-toolkit-command-line-tool-reference">Toolkit CLI</a>.</p> </div> <p>Feel free to inspect the scripts within this GitHub repository for better understanding of the automation developed for the IBM API Connect Promotion Pipeline use case explained throughout this chapter.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The scripts the Publish APIs and Products pipeline executes are by no means a set of production ready assets. These scripts are just an educational example as to how you could work with your API and Product source code definitions and the IBM API Connect Platform REST APIs on a programmatic way. These are not intended to be used by clients and these would need to be enhanced and tailored to every client use case, standards, best practices and interests</p> </div> <h3 id=provide-credentials>Provide Credentials<a class=headerlink href=#provide-credentials title="Permanent link">&para;</a></h3> <p>If you inspect again the <code>apic-publish-pipeline.yaml</code> file located under <code>multi-tenancy-gitops-apps/apic/environments/single-cluster-cp4i/pipelines</code> that defines the Tekton pipeline you should realise that such pipeline executes just one Tekton task. That Tekton task is called <code>apic-publish-products-apis</code> and it is defined in the <code>apic-publish-task.yaml</code> file under the <code>multi-tenancy-gitops-apps/apic/environments/single-cluster-cp4i/tasks</code> folder. If you take a close look at that Tekton task, you should be able to find the following lines of code:</p> <div class="no-copy highlight"><pre><span></span><code><span class=nt>envFrom</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>secretRef</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apic-pipeline-git</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>secretRef</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apic-pipeline-provider-org</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>secretRef</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apic-pipeline-toolkit</span><span class=w></span>
</code></pre></div> <p>which means nothing but that the Tekton task expects to load three secrets from the RedHat OpenShift project it runs on (<code>ci</code>). That is, the Tekton task and therefore Tekton pipeline depend on those three secrets to successfully run. As a result, you need to create those secrets.</p> <p>But, what are those secrets and what information do they hold?</p> <ul> <li><code>apic-pipeline-git</code> secret will hold the GitHub personal access token credentials required for the Tekton pipeline to be able to access your <code>api-product-definitions</code> private GitHub repository where your API and Product definitions the pipeline will publish to a catalog in your IBM API Connect API Manager are.</li> <li><code>apic-pipeline-provider-org</code> secret will hold your IBM API Connect Provider Organization details (such as admin user and credentials) so that the Tekton pipeline is allowed to interact with the <a href="https://apic-api.apiconnect.ibmcloud.com/v10/?_ga=2.233587928.752341463.1623867527-1939642083.1623276281#/documentation/introduction">IBM API Connect API Manager management endpoints</a>.</li> <li><code>apic-pipeline-toolkit</code> secret will hold your IBM API Connect Toolkit default application credentials.</li> </ul> <div class="admonition info"> <p class=admonition-title>Info</p> <p>In order to use the IBM API Connect platform REST APIs or the Toolkit CLI, you first need to register a client application which will be requesting the actions on your behalf. Each client app that accesses the API Connect REST API must be registered with the API Connect cloud. The process of registering a client associates the application's client ID with a set of scopes that determine which operations the application may access.</p> <p>You can check what application registrations have been made within your IBM API Connect API Cloud using the following Toolkit CLI command: </p> <div class=highlight><pre><span></span><code>apic registrations:list --server &lt;API Connect management server endpoint&gt;
</code></pre></div> <p>And the Toolkit is no exception. That is, the Toolkit CLI uses the IBM API Connect platform REST APIs underneath (you can check that out using the <code>--debug</code> flag). However, the Toolkit has been pre-configured so that an application for it is created out of the box. This application registration is called <code>toolkit-default</code> and you can check its details, such as its credentials and scope, with the following command: </p> <div class=highlight><pre><span></span><code>apic registrations:get --server &lt;API Connect management server endpoint&gt; toolkit-default --format json --output -
</code></pre></div> <p>It should look like:</p> <div class="no-copy highlight"><pre><span></span><code><span class=p>{</span><span class=w></span>
<span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;registration&quot;</span><span class=p>,</span><span class=w></span>
<span class=nt>&quot;api_version&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2.0.0&quot;</span><span class=p>,</span><span class=w></span>
<span class=nt>&quot;id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;11e166b4-84ac-49e8-8f43-8c973b31a8d2&quot;</span><span class=p>,</span><span class=w></span>
<span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;toolkit-default&quot;</span><span class=p>,</span><span class=w></span>
<span class=nt>&quot;title&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Toolkit Application Registration&quot;</span><span class=p>,</span><span class=w></span>
<span class=nt>&quot;state&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;enabled&quot;</span><span class=p>,</span><span class=w></span>
<span class=nt>&quot;client_type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;toolkit&quot;</span><span class=p>,</span><span class=w></span>
<span class=nt>&quot;client_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1e78b8a8-6011-4c4a-8365-c5747d0fa3ad&quot;</span><span class=p>,</span><span class=w></span>
<span class=nt>&quot;client_secret&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;********&quot;</span><span class=p>,</span><span class=w></span>
<span class=nt>&quot;scopes&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;cloud:view&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;cloud:manage&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;provider-org:view&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;provider-org:manage&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;org:view&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;org:manage&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;product-drafts:view&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;product-drafts:edit&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;api-drafts:view&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;api-drafts:edit&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;child:view&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;child:create&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;child:manage&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;product:view&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;product:stage&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;product:manage&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;approval:view&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;approval:manage&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;api-analytics:view&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;api-analytics:manage&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;consumer-org:view&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;consumer-org:manage&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;app:view:all&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;app:manage:all&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;my:view&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;my:manage&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=s2>&quot;webhook:view&quot;</span><span class=w></span>
<span class=p>],</span><span class=w></span>
<span class=nt>&quot;created_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2022-01-12T23:34:10.000Z&quot;</span><span class=p>,</span><span class=w></span>
<span class=nt>&quot;updated_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2022-01-12T23:34:10.000Z&quot;</span><span class=p>,</span><span class=w></span>
<span class=nt>&quot;url&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://cpd-tools.xxxxx.eu-gb.containers.appdomain.cloud/integration/apis/tools/apic-cluster/api/cloud/registrations/11e166b4-84ac-49e8-8f43-8c973b31a8d2&quot;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>You will see how to retrieve your Toolkit credentials to create the secret <code>apic-pipeline-toolkit</code> above directly from your IBM API Connect API Manager dashboard.</p> </div> <p>To create these secrets, or sealed secrets to be more explicit:</p> <h4 id=apic-pipeline-git>apic-pipeline-git<a class=headerlink href=#apic-pipeline-git title="Permanent link">&para;</a></h4> <p>As said above, this secret will hold the GitHub personal access token credentials required for the Tekton pipeline to be able to access your <code>api-product-definitions</code> private GitHub repository where your API and Product definitions the pipeline will publish to a catalog in your IBM API Connect API Manager are. The pipeline will use the GitHub personal access token to identify it as a valid user to GitHub. A Personal Access Token is used in place of a user password to authenticate with GitHub.</p> <p>This token provides specific access to all repositories owned by a particular GitHub user or organization. When GitHub is accessed using this token, the only permitted operations are those defined by the specific token.</p> <p>Navigate to your <a href=https://github.com/settings/tokens>GitHub Developer Settings</a> to generate a new token.</p> <p>Click on <code>Generate new token</code>. Provide a name for your GitHub personal access token and make the following selections:</p> <ul> <li>Select <code>repo</code> to allow the pipeline access to private repository to enable git clone.</li> <li>Select <code>admin:repo_hook</code> so the pipeline can create a web hook</li> </ul> <p><img alt="Promotion API" src=../images/promotion-20.png style=max-height:800px></p> <p>After you click <code>Generate token</code> to create the personal access token with these permissions, the GitHub UI will let you see the generated token once, but never again.</p> <p><strong>Therefore, save the token somewhere safe -- so that you can use it later if required.</strong></p> <p>Now, you are able to create the <code>apic-pipeline-git</code> containing your GitHub credentials (or personal access token to be more precise). On your terminal, go to <code>multi-tenancy-gitops-apps/apic/environments/single-cluster-cp4i/secrets</code> and execute the following command to create the <code>apic-pipeline-git</code> sealed secret:</p> <div class=highlight><pre><span></span><code>oc create secret generic apic-pipeline-git <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>GIT_USERNAME</span><span class=o>=</span>***** <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>GIT_PRIV_TOKEN</span><span class=o>=</span>***** <span class=se>\</span>
--dry-run<span class=o>=</span><span class=nb>true</span> -o yaml &gt; delete-apic-pipeline-git.yaml <span class=se>\</span>
<span class=o>&amp;&amp;</span> <span class=se>\</span>
kubeseal -n ci --controller-name<span class=o>=</span>sealed-secrets --controller-namespace<span class=o>=</span>sealed-secrets -o yaml &lt; delete-apic-pipeline-git.yaml &gt; apic-pipeline-git.yaml <span class=se>\</span>
<span class=o>&amp;&amp;</span> <span class=se>\</span>
rm delete-apic-pipeline-git.yaml
</code></pre></div> <p>where</p> <ul> <li><code>GIT_USERNAME</code> is your GitHub username</li> <li><code>GIT_PRIV_TOKEN</code> is the personal access token you have just created.</li> </ul> <h4 id=apic-pipeline-provider-org>apic-pipeline-provider-org<a class=headerlink href=#apic-pipeline-provider-org title="Permanent link">&para;</a></h4> <p>This secret will hold your IBM API Connect Provider Organization details (such as admin user and credentials) so that the Tekton pipeline is allowed to interact with the <a href="https://apic-api.apiconnect.ibmcloud.com/v10/?_ga=2.233587928.752341463.1623867527-1939642083.1623276281#/documentation/introduction">IBM API Connect API Manager management endpoints</a>.</p> <p>On your terminal, go to <code>multi-tenancy-gitops-apps/apic/environments/single-cluster-cp4i/secrets</code> and execute the following command to create the <code>apic-pipeline-provider-org</code> sealed secret:</p> <div class=highlight><pre><span></span><code>oc create secret generic apic-pipeline-provider-org <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>PROV_ORG_OWNER_USERNAME</span><span class=o>=</span>po-admin <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>PROV_ORG_OWNER_PASSWORD</span><span class=o>=</span>***** <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>PROV_ORG_NAME</span><span class=o>=</span>mq-tutorial <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>PROV_ORG_CATALOG_NAME</span><span class=o>=</span>prod <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>PROV_ORG_REALM</span><span class=o>=</span>provider/default-idp-2 <span class=se>\</span>
--dry-run<span class=o>=</span><span class=nb>true</span> -o yaml &gt; delete-apic-pipeline-provider-org.yaml <span class=se>\</span>
<span class=o>&amp;&amp;</span> <span class=se>\</span>
kubeseal -n ci --controller-name<span class=o>=</span>sealed-secrets --controller-namespace<span class=o>=</span>sealed-secrets -o yaml &lt; delete-apic-pipeline-provider-org.yaml &gt; apic-pipeline-provider-org.yaml <span class=se>\</span>
<span class=o>&amp;&amp;</span> <span class=se>\</span>
rm delete-apic-pipeline-provider-org.yaml
</code></pre></div> <p>where</p> <ul> <li><code>PROV_ORG_OWNER_USERNAME</code> is your Provider Organization Owner username you set when creating your Provider Organization in the <a href=../configure-apic/#provider-organization>Provider Organization</a> section in the Configure API Connect chapter. This is the Provider Organization Owner that was created in the API Manager User Registry that you use to log into the IBM API Connect API Manager. Set to <code>po-admin</code> by default.</li> <li><code>PROV_ORG_OWNER_PASSWORD</code> is your Provider Organization Owner password you set when creating your Provider Organization in the <a href=../configure-apic/#provider-organization>Provider Organization</a> section in the Configure API Connect chapter. This is the Provider Organization Owner that was created in the API Manager User Registry that you use to log into the IBM API Connect API Manager.</li> <li><code>PROV_ORG_NAME</code> is the Provider Organization name. In this tutorial <code>mq-tutorial</code> was used for the name of the Provider Organization created.</li> <li><code>PROV_ORG_CATALOG_NAME</code> is the catalog where the APIs and Products within your Provider Organization will be published to. In this tutorial, <code>prod</code> was used as the name for the catalog.</li> <li> <p><code>PROV_ORG_REALM</code> is the realm for the IBM Common Servicer User Registry which is <code>provider/default-idp-2</code>. You can find the realms of your IBM API Connect API Cloud with:</p> <div class=highlight><pre><span></span><code>apic identity-providers:list --scope provider --server &lt;API Connect management server endpoint&gt; --format yaml --output<span class=o>=</span>-
</code></pre></div> </li> </ul> <h4 id=apic-pipeline-toolkit>apic-pipeline-toolkit<a class=headerlink href=#apic-pipeline-toolkit title="Permanent link">&para;</a></h4> <p>Last secret you need to create contains, as already explained, your IBM API Connect Toolkit default application credentials. In order for you to figure out or retrieve those credentials go to either your IBM API Connect Cloud Manager or IBM API Connect API Manager dashboard and click on the <code>Download toolkit</code> option.</p> <p><img alt="Promotion API" src=../images/promotion-21.png style=max-height:900px></p> <p>A hovering window will pop up. Click on <code>Download</code> next to <code>Toolkit credentials</code></p> <p><img alt="Promotion API" src=../images/promotion-22.png style=max-height:800px></p> <p>It will download a <code>credentials.json</code> file that will contain your IBM API Connect Toolkit credentials. Make sure your <strong>DO NOT</strong> store that file within the <code>multi-tenancy-gitops-apps</code> folder so that you <strong>DO NOT</strong> commit that file to GitHub at all.</p> <p>If you inspect that file, it should look like the following</p> <div class="no-copy highlight"><pre><span></span><code><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nt>&quot;cloud_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;6d5946f6-1277-45e9-8e2d-f046ce309faf&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>  </span><span class=nt>&quot;toolkit&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;endpoint&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://cpd-tools.xxxxx.eu-gb.containers.appdomain.cloud/integration/apis/tools/apic-cluster/api&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;client_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;1e78b8a8-6011-4c4a-8365-c5747d0fa3ad&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;client_secret&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;63af274c-d9a1-4471-8213-ce4b66cb130b&quot;</span><span class=w></span>
<span class=w>  </span><span class=p>},</span><span class=w></span>
<span class=w>  </span><span class=nt>&quot;consumer_toolkit&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;endpoint&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;https://cpd-tools.xxxxx.eu-gb.containers.appdomain.cloud/integration/apis/tools/apic-cluster/consumer-api&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;client_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;88e77352-948d-4996-be95-d6aec03abf80&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nt>&quot;client_secret&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;304a5845-fede-4f3b-8d05-1e9e1e7abe5f&quot;</span><span class=w></span>
<span class=w>  </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p><strong>IMPORTANT:</strong> The credentials you are interested in are <code>client_id</code> and <code>client_secret</code> for the <code>toolkit</code> and <strong>NOT</strong> the <code>consumer_toolkit</code>.</p> <p>To create the <code>apic-pipeline-toolkit</code> secret, go to <code>multi-tenancy-gitops-apps/apic/environments/single-cluster-cp4i/secrets</code> on your terminal and execute the following command:</p> <div class=highlight><pre><span></span><code>oc create secret generic apic-pipeline-toolkit <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>TOOLKIT_CLIENT_ID</span><span class=o>=</span>***** <span class=se>\</span>
--from-literal<span class=o>=</span><span class=nv>TOOLKIT_CLIENT_SECRET</span><span class=o>=</span>***** <span class=se>\</span>
--dry-run<span class=o>=</span><span class=nb>true</span> -o yaml &gt; delete-apic-pipeline-toolkit.yaml <span class=se>\</span>
<span class=o>&amp;&amp;</span> <span class=se>\</span>
kubeseal -n ci --controller-name<span class=o>=</span>sealed-secrets --controller-namespace<span class=o>=</span>sealed-secrets -o yaml &lt; delete-apic-pipeline-toolkit.yaml &gt; apic-pipeline-toolkit.yaml <span class=se>\</span>
<span class=o>&amp;&amp;</span> <span class=se>\</span>
rm delete-apic-pipeline-toolkit.yaml
</code></pre></div> <p>where</p> <ul> <li><code>TOOLKIT_CLIENT_ID</code> is your Toolkit <code>client_id</code> value from the above <code>credentials.json</code> file.</li> <li><code>TOOLKIT_CLIENT_SECRET</code> is your Toolkit <code>client_secret</code> value from the above <code>credentials.json</code> file.</li> </ul> <p>Now that you have all the three sealed secrets that the Publish API and Products pipeline expects to successfully run locally under your <code>multi-tenancy-gitops-apps</code> repository, it is time for you to tell your GitOps processes to deploy these on your cluster. For that, open the <code>kustomization.yaml</code> file in <code>multi-tenancy-gitops-apps/apic/environments/single-cluster-cp4i</code> and make sure the three secrets are uncommented:</p> <div class="no-copy highlight"><pre><span></span><code><span class=c1># Secrets required for IBM API Connect Pipelines</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets/apic-pipeline-git.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets/apic-pipeline-provider-org.yaml</span><span class=w></span>
<span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">secrets/apic-pipeline-toolkit.yaml</span><span class=w></span>
</code></pre></div> <p>Then, commit and deliver these changes to GitHub:</p> <div class=highlight><pre><span></span><code>git add --all
git commit -s -m <span class=s2>&quot;Deploying secrets for Publish API and Products Pipeline&quot;</span>
git push origin <span class=nv>$GIT_BRANCH</span>
</code></pre></div> <p>Once you do that, you can go to your ArgoCD dashboard and click on the <code>apic-pipelines-prod</code> ArgoCD application to inspect whether those three secrets have been created or not:</p> <p><img alt="Promotion API" src=../images/promotion-23.png style=max-height:750px></p> <h3 id=execute-the-pipeline>Execute the Pipeline<a class=headerlink href=#execute-the-pipeline title="Permanent link">&para;</a></h3> <p>So far you have successfully deployed the Publish API and Products pipeline, review its definition and scripts as well as created three secrets that will hold important information for the pipeline to successfully publish the APIs and Products you desire into the appropriate catalog. Therefore, you are now ready to execute the pipeline.</p> <p>Go to <code>Pipelines --&gt; Pipelines</code> on your RedHat OpenShift cluster dashboard. You should see the <code>apic-publish-products-apis-pipeline</code> pipeline.</p> <p><img alt="Promotion API" src=../images/promotion-24.png style=max-height:900px></p> <p>Click on it to inspect the pipeline. You should be able to see it only contains one task as already figured out earlier when looking that its source code. Also, if you hover over that task you should be able to see all the steps the task will execute.</p> <p><img alt="Promotion API" src=../images/promotion-25.png style=max-height:900px></p> <p>Now, click on the <code>Actions</code> button on the top right corner and click on <code>Start</code>. You will get presented with the <code>Start Pipeline</code> form you have already seen in other pipelines for this MQ tutorial where you are allowed to provide the desired values for the pipeline parameters (and, of course, these correspond and match the parameters you saw earlier in the pipeline's source code when inspecting it).</p> <p><img alt="Promotion API" src=../images/promotion-26.png style=max-height:1200px></p> <p>where </p> <ul> <li><code>git-apic-pipeline-git-url</code> is the GitHub repository where the pipeline scripts are stored. These are the python scripts the pipeline will execute. You should have copied that GitHub repository into your GitHub organization earlier in this chapter. If you followed the naming recommendation you would only <strong>need to replace <code>&lt;GIT_ORG&gt;</code> with the name of your GitHub organization</strong> (that you should be able to retrieve by executing <code>echo $GIT_ORG</code> on your terminal). Pay attention the value of the GitHub repository that must end in <code>.git</code> since it will be cloned by the pipeline scripts.</li> <li><code>git-apic-pipeline-git-branch</code> is the Github branch for the pipeline scripts. This <strong>must</strong> be <strong>cp4i</strong>. </li> <li><code>git-apic-yaml-url</code> is the GitHub url where the products and APIs definitions are stored. You should have created this GitHub repository and delivered your API and Product definitions into it earlier in this chapter. If you followed the naming recommendation you would only need to replace <code>&lt;GIT_ORG&gt;</code> with the name of your GitHub organization (that you should be able to retrieve by executing <code>echo $GIT_ORG</code> on your terminal). Pay attention the value of the GitHub repository url that on the contrary to the first parameter of the pipeline it must not end in <code>.git</code> since it will not be cloned by the pipeline scripts, it will be simply used to access its files through its url.</li> <li><code>git-apic-yaml-branch</code> is the GitHub branch for the products and APIs. This <strong>must</strong> be <strong>master</strong>.</li> <li><code>git-products-path</code> is the path to where the products definitions are stored within your GitHub <code>git-apic-yaml-url</code> repository. If you followed the recommendations in this chapter this will be <code>Products</code>.</li> <li><code>git-apis-path</code> is the path to where the API definitions are stored within your GitHub <code>git-apic-yaml-url</code> repository. If you followed the recommendations in this chapter this will be <code>APIs</code>.</li> <li><code>apic-project</code> is the RedHat OpenShift project where your IBM API Connect Cluster v10 has been deployed into. If you followed the recommendations in this tutorial this should be <code>tools</code>.</li> </ul> <div class="admonition warning"> <p class=admonition-title>Important</p> <p>Remember that if you followed the instructions and recommendations from all previous chapters in this tutorial, you would only need to replace <code>GIT_ORG</code> with your GitHub organization name that you can find out executing <code>echo $GIT_ORG</code> on your terminal.</p> </div> <p>Once you have replaced the <code>&lt;GIT_ORG&gt;</code> placeholder, click on <code>Start</code>.</p> <p>You will get into the Pipeline Run for the pipeline you have just kicked off where you would see the different tasks and steps getting executed.</p> <p><img alt="Promotion API" src=../images/promotion-29.png style=max-height:1000px></p> <p>You can click on the <code>Logs</code> tab to follow along the execution of the different scripts the pipeline has been developed to execute. After a couple of minutes, you should see that the pipeline has successfully finished and that your <code>mq-spring-app_1.0.0</code> API and Product have been successfully published.</p> <p><img alt="Promotion API" src=../images/promotion-30.png style=max-height:1200px></p> <h2 id=consume-production-apis>Consume Production APIs<a class=headerlink href=#consume-production-apis title="Permanent link">&para;</a></h2> <p>In the previous section you saw how to deploy, configure and execute the Publish APIs and Products pipeline. You successfully executed the pipeline whose logs suggested that your <code>mq-spring-app_1.0.0</code> API and Product got successfully published to the production environment, which in your case is the <code>prod</code> catalog as already explained.</p> <p>Now, let's see if the above is correct and you got your API and Product into your <code>prod</code> catalog.</p> <p>First, if you go back to your IBM API Connect API Manager and go into your <code>prod</code> catalog you should now see the MQ Spring App product being part of your catalog.</p> <p><img alt="Promotion API" src=../images/promotion-31.png style=max-height:450px></p> <p>Of course, that product should not have any subscription yet.</p> <p>If you click on the dots icon on the right hand side of the product, a menu with different options for your product will drop down. Click on <code>Manage APIs</code>. You should now see that the <code>mq-spring-app</code> version <code>1.0.0</code> is part of your product.</p> <p><img alt="Promotion API" src=../images/promotion-32.png style=max-height:550px></p> <p>So far, it seems like the Products and APIs you have defined as code in your GitHub repository have made it to your <code>prod</code> catalog as expected thanks to the Publish APIs and Products pipeline.</p> <p>However, you still need to make sure that the product and API do in fact work and you can reach the Spring MQ Application that is in production as expected. For that, follow the steps below where some of which are actions you have already done before when going through this tutorial that you are now expected to know how to complete on your own. Feel free to review any of the previous chapters and sections if you don't remember how to exactly do some of the steps below.</p> <ol> <li> <p>Create an IBM Developer Portal for your <code>prod</code> catalog.</p> <p><img alt="Promotion API" src=../images/promotion-33.png style=max-height:650px></p> </li> <li> <p>Complete the admin registration for that IBM Developer Portal and tailor it to display a more specific title as to what catalog it belongs to or represents.</p> <p><img alt="Promotion API" src=../images/promotion-34.png style=max-height:900px></p> </li> <li> <p>Create an Application Developer account for your <code>Prod</code> IBM Developer Portal so that you can use it to create an application and consume your newly promoted Product and APIs to production.</p> </li> <li> <p>Make sure the <code>mq-spring-app</code> version <code>1.0.0</code> Product and API do show in the production IBM Developer Portal.</p> <p><img alt="Promotion API" src=../images/promotion-35.png style=max-height:1000px></p> </li> <li> <p>Create an application that subscribes to the <code>MQ Spring App</code> product above so that you can consume its APIs.</p> <p><img alt="Promotion API" src=../images/promotion-36.png style=max-height:450px></p> </li> <li> <p>Make sure you subscribe to the <code>MQ Spring App</code> product.</p> <p><img alt="Promotion API" src=../images/promotion-37.png style=max-height:700px></p> </li> <li> <p>Go to the <code>MQ Spring App</code> product APIs and make sure you can try/test them. Use the any of the APIs that is meant to send a message to your IBM Queue Manager that is deployed in production. In our case, we have used the <code>POST /api/send-json</code> to send a specific message.</p> <p><img alt="Promotion API" src=../images/promotion-38.png style=max-height:1200px></p> </li> <li> <p>You should see straight in your IBM Developer Portal that the response to the API call has been successful and that your message has apparently be sent correctly.</p> <p><img alt="Promotion API" src=../images/promotion-39.png style=max-height:1200px></p> </li> <li> <p>For a further check to make sure the message has been in fact sent to the IBM Queue Manager in production, let's check the actual production IBM Queue Manager.</p> <p><img alt="Promotion API" src=../images/promotion-40.png style=max-height:800px> </p> </li> <li> <p>Click on the hamburger icon on the right hand side of the <code>IBM.DEMO.Q</code> and select <code>View messages</code> to make sure the message has arrived as expected.</p> <p><img alt="Promotion API" src=../images/promotion-41.png style=max-height:550px></p> </li> </ol> <hr> <div class="admonition success"> <p class=admonition-title>Congratulations!</p> <p>You have successfully completed this chapter where you went from extracting your API and Product definitions as code, store them in GitHub and then deploy and execute a Tekton Pipeline that would take those definitions and publish them in the production environment, hence completing the promotion process of your Products and APIs. Remember this promotion process explained in this chapter is for education purposes providing room to be improved based on client demands, requisites and standards. For example, you can use the knowledge acquired during this MQ tutorial on Event Listeners and Triggers to automate the execution of the promotion pipeline. Or implement a set of automated tests to be added to the promotion pipeline to make sure APIs and Products work as expected.</p> </div> <h2 id=links>Links<a class=headerlink href=#links title="Permanent link">&para;</a></h2> <ul> <li><a href="https://www.ibm.com/docs/en/api-connect/10.0.x?topic=definitions-variable-references-in-api-connect">Variable references in API Connect</a></li> <li><a href="https://www.ibm.com/docs/en/api-connect/10.0.x?topic=properties-defining-catalog-specific-property-values">Defining Catalog specific property values</a></li> <li><a href="https://apic-api.apiconnect.ibmcloud.com/v10/?_ga=2.233587928.752341463.1623867527-1939642083.1623276281#/documentation/introduction">IBM API Connect Platform REST APIs</a>.</li> <li><a href="https://www.ibm.com/docs/en/api-connect/10.0.x?topic=toolkit-installing">Toolkit install</a></li> <li><a href="https://www.ibm.com/docs/en/api-connect/10.0.x?topic=information-toolkit-command-line-tool-reference">Toolkit command reference</a></li> <li><a href=https://apic-api.apiconnect.ibmcloud.com/v10/10.0.4.0.html#/documentation/introduction>IBM API Connect Platform REST APIs</a></li> <li><a href=https://github.com/ibm-apiconnect/example-toolkit-scripts>Examples for toolkit scripts</a></li> <li><a href="https://www.ibm.com/docs/en/cloud-paks/cp-integration/2021.3?topic=connect-determining-endpoint-url-toolkit">Determining the endpoint URL for the toolkit</a></li> <li><a href="https://www.ibm.com/docs/en/api-connect/10.0.x?topic=tool-logging-in-management-server-oidc-registry">Logging in to a management server with an OIDC registry</a></li> </ul> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <!-- Footer --> <footer class=md-footer> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../monitor-apis/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Monitor APIs </div> </div> </a> <!-- Link to next page --> <a href=../../ad/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Decision Index </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright © 2021 Cloud Pak Production Deployment Guides </div> </div> <div class=md-footer-social> <a href=https://github.ibm.com/cloudpakbringup/deployment-guides target=_blank rel=noopener title="Production Deployment Guides on Github Enterprise" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"> <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"> </path> </svg> </a> <a href=https://ibm-cloud.slack.com/archives/C02CQ6M2D2R target=_blank rel=noopener title=Slack class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"> <path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"> </path> </svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tracking", "navigation.tabs.sticky", "navigation.top", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script> <script src=../../../../../assets/javascripts/bundle.467223ff.min.js></script> </body> </html>